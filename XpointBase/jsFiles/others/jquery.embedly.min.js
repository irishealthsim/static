(function(n){(window.embedlyURLre=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n.embedly=n.embedly||{},n.embedly.version)||(n.extend({embedly:function(t,i,r){var s=[],e="http://api.embed.ly/",u,h,o,f;i=i?i:{};u=n.extend({},n.embedly.defaults,i);u.urlRe||(u.urlRe=window.embedlyURLre);typeof t=="string"&&(t=new Array(t));typeof r!="undefined"&&(u.success=r);u.secure&&(e="https://api.embed.ly/");u.success||(u.success=function(t,i){var r,f=n(i.node);return t?(r=u.method)==="replace"?f.replaceWith(t.code):r==="after"?f.after(t.code):r==="afterParent"?f.parent().after(t.code):r==="replaceParent"?f.parent().replaceWith(t.code):void 0:null});u.error||(u.error=function(){});var c=function(n){return u.urlRe.test(n)},a=function(n){var t="urls="+n;return u.maxWidth?t+="&maxwidth="+u.maxWidth:typeof dimensions!="undefined"&&(t+="&maxwidth="+dimensions.width),u.maxHeight&&(t+="&maxheight="+u.maxHeight),u.chars&&(t+="&chars="+u.chars),u.words&&(t+="&words="+u.words),u.secure&&(t+="&secure=true"),u.frame&&(t+="&frame=true"),t+="&wmode="+u.wmode,typeof u.key=="string"&&(t+="&key="+u.key),(typeof u.autoplay=="string"||typeof u.autoplay=="boolean")&&(t+="&autoplay="+u.autoplay),u.width&&(t+="&width="+u.width),t},v=function(){if(typeof u.key=="string"){if(u.endpoint.search(/objectify/i)>=0)return e+"2/objectify";if(u.endpoint.search(/preview/i)>=0)return e+"1/preview"}return e+"1/oembed"},l=function(){var n=[];return u.addImageStyles&&(u.maxWidth&&(units=isNaN(parseInt(u.maxWidth,10))?"":"px",n.push("max-width: "+u.maxWidth+units)),u.maxHeight&&(units=isNaN(parseInt(u.maxHeight,10))?"":"px",n.push("max-height: "+u.maxHeight+units))),n.join(";")},y=function(t,i){if(u.endpoint!=="oembed")return u.success(t,i);var e,r,f,o,s,h;return(e=t.type)==="photo"?(f=t.title||"",r="<a href='"+i.url+"' target='_blank'><img style='"+l()+"' src='"+t.url+"' alt='"+f+"' /><\/a>"):e==="video"?r=t.html:e==="rich"?r=t.html:(f=t.title||i.url,o=t.thumbnail_url?"<img src='"+t.thumbnail_url+"' class='thumb' style='"+l()+"'/>":"",h=t.description?'<div class="description">'+t.description+"<\/div>":"",s=t.provider_name?"<a href='"+t.provider_url+"' class='provider'>"+t.provider_name+"<\/a>":"",r=o+"<a href='"+i.url+"'>"+f+"<\/a>",r+=s,r+=h),u.wrapElement&&u.wrapElement==="div"&&n.browser.msie&&n.browser.version<9&&(u.wrapElement="span"),u.wrapElement&&(r="<"+u.wrapElement+' class="'+u.className+'">'+r+"<\/"+u.wrapElement+">"),t.code=r,typeof i.node!="undefined"&&n(i.node).data("oembed",t).trigger("embedly-oembed",[t]),u.success(t,i)},p=function(t){var r,f,i;r=n.map(t,function(t,r){return r===0&&t.node!==null&&(i=n(t.node),f={width:i.parent().width(),height:i.parent().height()}),encodeURIComponent(t.url)}).join(",");n.support.cors=!0;n.ajax({url:v(),dataType:"jsonp",data:a(r),success:function(i){return n.each(i,function(n,i){return i.type!=="error"?y(i,t[n]):u.error(t[n].node,i)})}})};for(n.each(t,function(t,i){var r=typeof u.elems!="undefined"?u.elems[t]:null,f;return typeof r=="undefined"||c(i)||n(r).data("oembed",!1),f={url:i,error_code:400,error_message:"HTTP 400: Bad Request",type:"error"},i&&c(i)?s.push({url:i,node:r}):u.error(r,f)}),h=[],o=s.length,f=0;0<=o?f<o:f>o;f+=20)h=h.concat(p(s.slice(f,f+20)));return u.elems?u.elems:this}}),n.embedly.version="2.2.0",n.embedly.defaults={endpoint:"oembed",secure:!1,frame:!1,wmode:"opaque",method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",elems:[]},n.fn.embedly=function(t,i){var f=typeof t!="undefined"?t:{},r,u,e;return typeof i!="undefined"&&(t.success=i),r=[],u=[],this.each(function(){typeof n(this).attr("href")!="undefined"?(r.push(n(this).attr("href")),u.push(n(this))):n(this).find("a").each(function(){r.push(n(this).attr("href"));u.push(n(this))});f.elems=u}),e=n.embedly(r,f),this})})(jQuery);
/*
//# sourceMappingURL=jquery.embedly.min.js.map
*/