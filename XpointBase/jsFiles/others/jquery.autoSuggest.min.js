(function(n){n.fn.autoSuggest=function(t,i){var s={loadingCSS:"",asHtmlID:!1,startText:"Enter Name Here",emptyText:"No Results Found",preFill:{},limitText:"No More Selections Are Allowed",showItemProp:"value",selectedItemProp:"value",selectedValuesProp:"value",searchObjProps:"value",queryParam:"q",retrieveLimit:!1,extraParams:"",matchCase:!1,isProject:!1,contentTypes:"",minChars:1,keyDelay:200,resultsHighlight:!0,neverSubmit:!1,selectionLimit:!1,showResultList:!0,start:function(){},selectionClick:function(){},selectionAdded:function(){},selectionRemoved:function(n){n.remove()},formatList:!1,beforeRetrieve:function(n){return n},retrieveComplete:function(n){return n},resultClick:function(){},resultsComplete:function(){}},r=n.extend(s,i),f="object",u=0,e,o;if(typeof t=="string")f="string",e=t;else{o=t;for(k in t)t.hasOwnProperty(k)&&u++}if(f=="object"&&u>0||f=="string")return this.each(function(t){function st(){var t,s;if(lastKeyPressCode==46||lastKeyPressCode>8&&lastKeyPressCode<32)return i.hide();(t=h.val().replace(/[\\]+|[\/]+/g,""),t!=tt)&&(tt=t,t.length>=r.minChars?(c.addClass(r.loadingCSS),f=="string"?(s="",r.retrieveLimit&&(s="&limit="+encodeURIComponent(r.retrieveLimit)),r.beforeRetrieve&&(t=r.beforeRetrieve.call(this,t)),r.isProject?n.getJSON(e+"?"+r.queryParam+"="+encodeURIComponent(t)+s+"&contentTypes="+r.contentTypes,function(n){u=0;var i=r.retrieveComplete.call(this,n);for(k in i)i.hasOwnProperty(k)&&u++;et(i,t)}):n.getJSON(e+"?"+r.queryParam+"="+encodeURIComponent(t)+s+r.extraParams,function(n){u=0;var i=r.retrieveComplete.call(this,n);for(k in i)i.hasOwnProperty(k)&&u++;et(i,t)})):(r.beforeRetrieve&&(t=r.beforeRetrieve.call(this,t)),et(o,t))):(c.removeClass(r.loadingCSS),i.hide()))}function et(t,f){var y,w,e,k,o,g,b,nt,a,l,ut;for(r.matchCase||(f=f.toLowerCase()),y=0,i.html(p.html("")).hide(),w=0;w<u;w++){if(e=w,rt++,k=!1,r.searchObjProps=="value")o=t[e].value;else for(o="",g=r.searchObjProps.split(","),b=0;b<g.length;b++)nt=n.trim(g[b]),o=o+t[e][nt]+" ";if(o&&(r.matchCase||(o=o.toLowerCase()),o.search(f)!=-1&&s.val().search(","+t[e][r.selectedValuesProp]+",")==-1&&(k=t[e].IsGroup&&r.singleEntry?!1:!0)),k&&(a=n('<li class="as-result-item" id="as-result-item-'+e+'"><\/li>').click(function(){var u=n(this).data("data"),f=u.num,t;n("#as-selection-"+f,c).length<=0&&!it&&(t=u.attributes,h.val("").focus(),tt="",t.IsGroup?n.getJSON(r.groupUrl+"?id="+t.Id,function(t){t=n.parseJSON(t.GroupUsersResult);n.each(t,function(){s.val().search(","+this[r.selectedValuesProp]+",")==-1&&d(this,++rt)})}):d(t,f),r.resultClick.call(this,u),i.hide());it=!1}).mousedown(function(){v=!1}).mouseover(function(){n("li",p).removeClass("active");n(this).addClass("active")}).data("data",{attributes:t[e],num:rt}),l=n.extend({},t[e]),ut=r.matchCase?new RegExp("(?![^&;]+;)(?!<[^<>]*)("+f+")(?![^<>]*>)(?![^&;]+;)","g"):new RegExp("(?![^&;]+;)(?!<[^<>]*)("+f+")(?![^<>]*>)(?![^&;]+;)","gi"),r.resultsHighlight&&(l[r.showItemProp]=l[r.showItemProp].replace(ut,"<em>$1<\/em>")),a=r.formatList?r.formatList.call(this,l,a):a.html(l[r.showItemProp]),p.append(a),delete l,y++,r.retrieveLimit&&r.retrieveLimit==y))break}c.removeClass(r.loadingCSS);y<=0&&p.html('<li class="as-message">'+r.emptyText+"<\/li>");p.css("width",c.outerWidth());i.show();r.resultsComplete.call(this)}function d(t,i){var u,e,f,o;r.singleEntry&&n("li.as-selection-item",c).length>0||(u=s.val(),e="",n.trim(u).length>0&&(e=u+","),s.val(s.val()+t[r.selectedValuesProp]+","),f=n('<li class="as-selection-item" id="as-selection-'+i+'"><\/li>').click(function(){r.selectionClick.call(this,n(this));c.children().removeClass("selected");n(this).addClass("selected")}).mousedown(function(){v=!1}),o=n('<a class="as-close">&times;<\/a>').click(function(){return s.val(s.val().replace(","+t[r.selectedValuesProp]+",",",")),r.selectionRemoved.call(this,f),v=!0,h.focus(),!1}),y.before(f.html(t[r.selectedItemProp]).prepend(o)),r.selectionAdded.call(this,y.prev()))}function ht(t){var r,f,u;n(":visible",i).length>0&&(r=n("li",i),f=t=="down"?r.eq(0):r.filter(":last"),u=n("li.active:first",i),u.length>0&&(f=t=="down"?u.next():u.prev()),r.removeClass("active"),f.addClass("active"))}var ut,h,v,g,ft,nt,l,b,ot,rt;r.asHtmlID?(t=r.asHtmlID,ut=t):(t=t+""+Math.floor(Math.random()*100),ut="as-input-"+t);r.start.call(this);h=n(this);h.attr("autocomplete","off").addClass("as-input").attr("id",ut).val(r.startText);v=!1;h.wrap('<ul class="as-selections" id="as-selections-'+t+'"><\/ul>').wrap('<li class="as-original" id="as-original-'+t+'"><\/li>');var c=n("#as-selections-"+t),y=n("#as-original-"+t),i=n('<div class="as-results" id="as-results-'+t+'"><\/div>').hide(),p=n('<ul class="as-list"><\/ul>'),s=n('<input autocomplete="off" type="hidden" class="as-values" name="as_values_'+t+'" id="as-values-'+t+'" />'),a="";if(typeof r.preFill=="string"){for(g=r.preFill.split(","),l=0;l<g.length;l++)ft={},ft[r.selectedValuesProp]=g[l],g[l]!=""&&d(ft,"000"+l);a=r.preFill}else{a="";nt=0;for(k in r.preFill)r.preFill.hasOwnProperty(k)&&nt++;if(nt>0)for(l=0;l<nt;l++)b=r.preFill[l][r.selectedValuesProp],b==undefined&&(b=""),a=a+b+",",b!=""&&d(r.preFill[l],"000"+l)}a!=""&&(h.val(""),ot=a.substring(a.length-1),ot!=","&&(a=a+","),s.val(","+a),n("li.as-selection-item",c).addClass("blur").removeClass("selected"));h.after(s);c.click(function(){v=!0;h.focus()}).mousedown(function(){v=!1}).after(i);var w=null,tt="",it=!1;h.focus(function(){return n(this).val()==r.startText&&s.val()==""?n(this).val(""):v&&(n("li.as-selection-item",c).removeClass("blur"),n(this).val()!=""&&(p.css("width",c.outerWidth()),i.show())),v=!0,!0}).blur(function(){r.anonymousEntry||h.val("");n(this).val()==""&&s.val()==""&&a==""?n(this).val(r.startText):v&&(n("li.as-selection-item",c).addClass("blur").removeClass("selected"),i.hide())}).keypress(function(){if(r.singleEntry===!0){var t=s.val().replace(/\,/g,"");if(t&&n.trim(t).length>1)return!1}}).keydown(function(t){var f,u,e,l,o;lastKeyPressCode=t.keyCode;first_focus=!1;switch(t.keyCode){case 38:t.preventDefault();ht("up");break;case 40:t.preventDefault();ht("down");break;case 8:h.val()==""&&(f=s.val().split(","),f=f[f.length-2],c.children().not(y.prev()).removeClass("selected"),y.prev().hasClass("selected")?(s.val(s.val().replace(","+f+",",",")),r.selectionRemoved.call(this,y.prev())):(r.selectionClick.call(this,y.prev()),y.prev().addClass("selected")));h.val().length==1&&(i.hide(),tt="");n(":visible",i).length>0&&(w&&clearTimeout(w),w=setTimeout(function(){st()},r.keyDelay));break;case 9:case 188:if(!r.anonymousEntry)return!1;it=!0;u=h.val().replace(/(,)/g,"");u!=""&&s.val().search(","+u+",")<0&&u.length>=r.minChars&&(t.preventDefault(),e={},e[r.selectedItemProp]=u,e[r.selectedValuesProp]=u,l=n("li",c).length,d(e,"00"+(l+1)),h.val(""));case 13:it=!1;o=n("li.active:first",i);o.length>0&&(o.click(),i.hide());(r.neverSubmit||o.length>0)&&t.preventDefault();break;default:r.showResultList&&(r.selectionLimit&&n("li.as-selection-item",c).length>=r.selectionLimit?(p.html('<li class="as-message">'+r.limitText+"<\/li>"),i.show()):(w&&clearTimeout(w),w=setTimeout(function(){st()},r.keyDelay)))}});rt=0})}})(jQuery);
/*
//# sourceMappingURL=jquery.autoSuggest.min.js.map
*/