$.fn.extend({autocomplete:function(n,t){var i=typeof n=="string";return t=$.extend({},$.Autocompleter.defaults,{url:i?n:null,data:i?null:n,delay:i?$.Autocompleter.defaults.delay:5,max:t&&!t.scroll?10:150},t),t.highlight=t.highlight||function(n){return n},t.formatMatch=t.formatMatch||t.formatItem,this.each(function(){new $.Autocompleter(this,t)})},result:function(n){return this.bind("result",n)},search:function(n){return this.trigger("search",[n])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(n){return this.trigger("setOptions",[n])},unautocomplete:function(){return this.trigger("unautocomplete")}});$.Autocompleter=function(n,t){function f(){t.hoverprofile&&$("#Popupviewprofile").length>0&&$("#Popupviewprofile").remove()}function k(n){var i,t;if(n.createTextRange){for(t=n.value.length+1,theCaret=document.selection.createRange().duplicate();theCaret.parentElement()==n&&theCaret.move("character",1)==1;)--t;i=t==n.value.length+1?-1:t}else i=n.selectionStart;return i}function d(){var o=r.selected(),u,s,f,l;if(!o)return!1;if(u=o.result,s=o.userdata.UserName.replace("\\","_"),e=u,t.multiple){if(f=h(i.val()),f.length>1){var a=t.multipleSeparator.length,v=$(n).selection().start;f.pop();$.inArray(u,f)==-1&&(f[f.length]=u);u=f.join(t.multipleSeparator)}u+=t.multipleSeparator}return t.chatenabled&&$.isFunction(startChatSession)?(l=i.validatepp({loginname:s})[0].validate,l&&(startChatSession(s,"Chat"),i.val(""))):(i.val(u),g(n,n.value.length)),t.hoverprofile&&$("#Popupviewprofile").length>0&&$("#Popupviewprofile").remove(),c(),i.trigger("result",[o.data,o.value]),!0}function g(n,t){var i=n,r;i!=null&&(i.createTextRange?(r=i.createTextRange(),r.move("character",t),r.select()):i.selectionStart?(i.focus(),i.setSelectionRange(t,t)):i.focus())}function s(n,f){if(y==u.DEL){r.hide();return}var o=i.val();(f||o!=e)&&(e=o,o=v(o),o.length>=t.minChars?(i.addClass(t.loadingClass),t.matchCase||(o=o.toLowerCase()),nt(o,rt,c)):(w(),r.hide()))}function h(n){return n?t.multiple?$.map(n.split(t.multipleSeparator),function(t){return $.trim(n).length?$.trim(t):null}):[$.trim(n)]:[""]}function v(i){var r,u;return t.multiple?(r=h(i),r.length==1)?r[0]:(u=$(n).selection().start,r=u==i.length?h(i):h(i.replace(i.substring(u),"")),r[r.length-1]):i}function tt(r,f){t.autoFill&&v(i.val()).toLowerCase()==r.toLowerCase()&&y!=u.BACKSPACE&&(i.val(i.val()+f.substring(v(e).length)),$(n).selection(e.length,e.length+f.length))}function it(){clearTimeout(l);l=setTimeout(c,200)}function c(){var n=r.visible();r.hide();clearTimeout(l);w();t.mustMatch&&i.search(function(n){if(!n)if(t.multiple){var r=h(i.val()).slice(0,-1);i.val(r.join(t.multipleSeparator)+(r.length?t.multipleSeparator:""))}else i.val(""),i.trigger("result",null)})}function rt(n,t){t&&t.length&&o?(w(),r.display(t,n),tt(n,t[0].value),r.show()):c()}function nt(i,u,f){var e,o;t.matchCase||(i=i.toLowerCase());e=a.load(i);e&&e.length?u(i,e):typeof t.url=="string"&&t.url.length>0?(o={timestamp:+new Date},$.each(t.extraParams,function(n,t){o[n]=typeof t=="function"?t():t}),$.ajax({mode:"abort",port:"pautocomplete"+n.name,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",url:t.url,data:"{q:'"+v(i)+"'}",success:function(n){var r=t.parse&&t.parse(n)||ut(n);a.add(i,r);u(i,r)}})):(r.emptyList(),f(i))}function ut(n){for(var i,f,r=[],e=n.d,u=0;u<e.length;u++)i=e[u],i&&(f=[],f[0]=i.Name,f[1]=i.ImageUrl,r[r.length]={data:i.Name,value:i.Name,userdata:i,result:t.formatResult&&t.formatResult(i.Name,i.Name)||i.Name});return r}function w(){i.removeClass(t.loadingClass)}var u={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,BACKWORD:37,FORWARD:39},i=$(n).attr("autocomplete","off").addClass(t.inputClass),l,e="",a=$.Autocompleter.Cache(t),o=0,y,b={mouseDownOnSelect:!1},r=$.Autocompleter.Select(t,n,d,b),p;$.browser.opera&&$(n.form).bind("submit.autocomplete",function(){if(p)return p=!1,!1});i.bind(($.browser.opera?"keypress":"keydown")+".pautocomplete",function(i){o=1;y=i.keyCode;switch(i.keyCode){case u.UP:i.preventDefault();r.visible()?r.prev():s(0,!0);f();break;case u.DOWN:i.preventDefault();r.visible()?r.next():s(0,!0);f();break;case u.PAGEUP:i.preventDefault();r.visible()?r.pageUp():s(0,!0);f();break;case u.PAGEDOWN:i.preventDefault();r.visible()?r.pageDown():s(0,!0);f();break;case u.BACKSPACE:c();break;case u.BACKWORD:case u.FORWARD:break;case t.multiple&&$.trim(t.multipleSeparator)==","&&u.COMMA:case u.TAB:case u.RETURN:if(d())return i.preventDefault(),p=!0,!1;f();break;case u.ESC:r.hide();f();break;default:k(n)<n.value.length&&!r.visible()&&t.multiple?(i.preventDefault(),n.focus()):(clearTimeout(l),l=setTimeout(function(){s(0,!0)},t.delay));f()}}).focus(function(){o==0&&g(n,n.value.length);o++}).blur(function(){o=0;b.mouseDownOnSelect||it()}).click(function(){o++>1&&!r.visible()?s(0,!0):k(n)<n.value.length&&c()}).bind("search",function(){function t(t,r){var u,f;if(r&&r.length)for(f=0;f<r.length;f++)if(r[f].result.toLowerCase()==t.toLowerCase()){u=r[f];break}typeof n=="function"?n(u):i.trigger("result",u&&[u.data,u.value])}var n=arguments.length>1?arguments[1]:null;$.each(h(i.val()),function(n,i){nt(i,t,t)})}).bind("flushCache",function(){a.flush()}).bind("setOptions",function(){$.extend(t,arguments[1]);"data"in arguments[1]&&a.populate()}).bind("unautocomplete",function(){r.unbind();i.unbind();$(n.form).unbind(".pautocomplete")})};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:100,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:0,firstload:!0,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(n){return n},formatMatch:null,autoFill:!1,width:0,left:0,chatenabled:!1,multiple:!1,multipleSeparator:";",highlight:function(n,t){if(n!=null)return n.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1<\/strong>")},scroll:!0,scrollHeight:180};$.Autocompleter.Cache=function(n){function r(t,i){n.matchCase||(t=t.toLowerCase());var r=t.indexOf(i);return(n.matchContains=="word"&&(r=t.toLowerCase().search("\\b"+i.toLowerCase())),r==-1)?!1:r==0||n.matchContains}function u(r,u){i>n.cacheLength&&e();t[r]||i++;t[r]=u}function f(){var i,s,r,h,t,f,e,o;if(!n.data)return!1;for(i={},s=0,n.url||(n.cacheLength=1),i[""]=[],r=0,h=n.data.length;r<h;r++)(t=n.data[r],t=typeof t=="string"?[t]:t,f=n.formatMatch(t,r+1,n.data.length),f!==!1)&&(e=f.charAt(0).toLowerCase(),i[e]||(i[e]=[]),o={value:f,data:t,result:n.formatResult&&n.formatResult(t)||f},i[e].push(o),s++<n.max&&i[""].push(o));$.each(i,function(t,i){n.cacheLength++;u(t,i)})}function e(){t={};i=0}var t={},i=0;return setTimeout(f,25),{flush:e,add:u,populate:f,load:function(u){var s,o,e,f;if(!n.cacheLength||!i)return null;if(!n.url&&n.matchContains){f=[];for(s in t)s.length>0&&(e=t[s],$.each(e,function(n,t){r(t.value,u)&&f.push(t)}));return f}if(t[u])return t[u];if(n.matchSubset)for(o=u.length-1;o>=n.minChars;o--)if(e=t[u.substr(0,o)],e)return f=[],$.each(e,function(n,t){r(t.value,u)&&(f[f.length]=t)}),f;return null}}};$.Autocompleter.Select=function(n,t,i,r){function y(){v&&(o=$("<div/>").hide().addClass(n.resultsClass).css("position","absolute").appendTo(document.body),e=$("<ul/>").appendTo(o).mouseover(function(n){l(n).nodeName&&l(n).nodeName.toUpperCase()=="LI"&&(f=$("li",e).removeClass(s.ACTIVE).index(l(n)),$(l(n)).addClass(s.ACTIVE))}).click(function(n){return $(l(n)).addClass(s.ACTIVE),i(),t.focus(),!1}).mousedown(function(){r.mouseDownOnSelect=!0}).mouseup(function(){r.mouseDownOnSelect=!1}),n.width>0&&o.css("width",n.width),v=!1)}function l(n){for(var t=n.target;t&&t.tagName!="LI";)t=t.parentNode;return t?t:[]}function c(t){var r,i;u.slice(f,f+1).removeClass(s.ACTIVE);p(t);r=u.slice(f,f+1).addClass(s.ACTIVE);n.scroll&&(i=0,u.slice(0,f).each(function(){i+=this.offsetHeight}),i+r[0].offsetHeight-e.scrollTop()>e[0].clientHeight?e.scrollTop(i+r[0].offsetHeight-e.innerHeight()):i<e.scrollTop()&&e.scrollTop(i))}function p(n){f+=n;f<0?f=u.size()-1:f>=u.size()&&(f=0)}function w(t){return n.max&&n.max<t?n.max:t}function b(){var o,t,i,c,r;for(e.empty(),o=w(h.length),t=0;t<o;t++)h[t]&&(i=n.formatItem(h[t].userdata),i!==!1)&&(n.hoverprofile?(c=n.highlight(i,a),r=$("<li/>").html(n.highlight(i,a)).addClass(t%2==0?"ac_even":"ac_odd").appendTo(e)[0],$.data(r,"ac_data",h[t])):(r=$("<li/>").html(n.highlight(i,a)).addClass(t%2==0?"ac_even":"ac_odd").appendTo(e)[0],$.data(r,"ac_data",h[t])));u=e.find("li");n.selectFirst&&(u.slice(0,1).addClass(s.ACTIVE),f=0);$.fn.bgiframe&&e.bgiframe()}var s={ACTIVE:"ac_over"},u,f=-1,h,a="",v=!0,o,e;return{display:function(n,t){y();h=n;a=t;b()},next:function(){c(1)},prev:function(){c(-1)},pageUp:function(){f!=0&&f-8<0?c(-f):c(-8)},pageDown:function(){f!=u.size()-1&&f+8>u.size()?c(u.size()-1-f):c(8)},hide:function(){o&&o.hide();u&&u.removeClass(s.ACTIVE);f=-1},visible:function(){return o&&o.is(":visible")},current:function(){return this.visible()&&(u.filter("."+s.ACTIVE)[0]||n.selectFirst&&u[0])},show:function(){var s=$(t).offset(),i,r,f,h;n.direction=="top"?(i=0,n.firstload?(r=o.height(),r>n.scrollHeight&&(r=n.scrollHeight),i=s.top-r-6,n.firstload=!1):i=s.top-o.height()-6,o.css({width:typeof n.width=="string"||n.width>0?n.width:$(t).width(),top:i,left:n.left}).show()):o.css({width:typeof n.width=="string"||n.width>0?n.width:$(t).width(),top:s.top+t.offsetHeight,left:n.left}).show();n.scroll&&(e.scrollTop(0),e.css({maxHeight:n.scrollHeight,overflow:"auto"}),$.browser.msie&&typeof document.body.style.maxHeight=="undefined"&&(f=0,u.each(function(){f+=this.offsetHeight}),h=f>n.scrollHeight,e.css("height",h?n.scrollHeight:f),h||u.width(e.width()-parseInt(u.css("padding-left"))-parseInt(u.css("padding-right")))))},selected:function(){var n=u&&u.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return n&&n.length&&$.data(n[0],"ac_data")},emptyList:function(){e&&e.empty()},unbind:function(){o&&o.remove()}}};$.fn.selection=function(n,t){var i,r;if(n!==undefined)return this.each(function(){if(this.createTextRange){var i=this.createTextRange();t===undefined||n==t?(i.move("character",n),i.select()):(i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",t),i.select())}else this.setSelectionRange?this.setSelectionRange(n,t):this.selectionStart&&(this.selectionStart=n,this.selectionEnd=t)});if(i=this[0],i.createTextRange){var u=document.selection.createRange(),o=i.value,f="<->",e=u.text.length;return u.text=f,r=i.value.indexOf(f),i.value=o,this.selection(r,r+e),{start:r,end:r+e}}if(i.selectionStart!==undefined)return{start:i.selectionStart,end:i.selectionEnd}};
/*
//# sourceMappingURL=jqueryautocomplete.min.js.map
*/