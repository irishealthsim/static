function Menu(n,t){var r=this,n=$(n),i=$('<div class="fg-menu-container ui-widget xp-CusTopNav">'+$(n[0]).next().html()+"<\/div>"),t,u;this.menuOpen=!0;this.menuExists=!1;t=jQuery.extend({content:null,width:600,maxHeight:180,positionOpts:{posX:"left",posY:"bottom",offsetX:0,offsetY:0,directionH:"right",directionV:"down",detectH:!0,detectV:!0,linkToFront:!1},showSpeed:200,callerOnState:"xp-topnavhighlight",loadingState:"ui-state-loading",linkHover:"",linkHoverSecondary:"li-hover",crossSpeed:200,crumbDefaultText:"Choose an option:",backLink:!0,backLinkText:"Back",flyOut:!1,flyOutOnState:"ui-state-default",nextMenuLink:"ui-icon-triangle-1-e",topLinkText:"All",nextCrumbLink:"ui-icon-carat-1-e"},t);u=function(){$.each(allUIMenus,function(n){allUIMenus[n].menuOpen&&allUIMenus[n].kill()})};this.kill=function(){n.removeClass(t.loadingState).removeClass("fg-menu-open").removeClass(t.callerOnState);i.find("li").removeClass(t.linkHoverSecondary).find("a").removeClass(t.linkHover);t.flyOutOnState&&i.find("li a").removeClass(t.flyOutOnState);t.callerOnState&&n.removeClass(t.callerOnState);i.is(".fg-menu-ipod")&&r.resetDrilldownMenu();i.is(".fg-menu-flyout")&&r.resetFlyoutMenu();i.parent().hide();r.menuOpen=!1;$(document).unbind("click",u);$(document).unbind("keydown")};this.showLoading=function(){n.addClass(t.loadingState)};this.showMenu=function(){u();r.menuExists||r.create();n.addClass("fg-menu-open").addClass(t.callerOnState);i.parent().show().click(function(){return r.kill(),!1});i.hide().slideDown(t.showSpeed).find(".fg-menu:eq(0)");r.menuOpen=!0;n.removeClass(t.loadingState)};this.create=function(){if(i.css({width:t.width}).appendTo($(n).parent().get(0)).find("ul:first").not(".fg-menu-breadcrumb").addClass("fg-menu"),i.find("ul").attr("role","menu").eq(0).attr("aria-activedescendant","active-menuitem").attr("aria-labelledby",n.attr("id")),i.find("li").attr("role","menuitem"),i.find("li:has(ul)").attr("aria-haspopup","true").find("ul").attr("aria-expanded","false"),i.find("a").attr("tabindex","-1"),i.find("ul").size()>1?t.flyOut?r.flyout(i,t):r.drilldown(i,t):i.find("a").click(function(){return r.chooseItem(this),!1}),t.linkHover){var u=i.find(".fg-menu li a");$.browser.msie&&$.browser.version.substr(0,1)<7&&(u.width(80),i.find(".fg-menu li"));u.hover(function(){var n=$(this);$("."+t.linkHover,n.parents("span").get(0)).removeClass(t.linkHover).blur().parent().removeAttr("id");$(this).addClass(t.linkHover).focus().parent().attr("id","active-menuitem")},function(){$(this).removeClass(t.linkHover).blur().parent().removeAttr("id")})}t.linkHoverSecondary&&i.find(".fg-menu li").hover(function(){$(this).siblings("li").removeClass(t.linkHoverSecondary);t.flyOutOnState&&$(this).siblings("li").find("a").removeClass(t.flyOutOnState);$(this).addClass(t.linkHoverSecondary)},function(){$(this).removeClass(t.linkHoverSecondary)});r.setPosition(i,n,t);r.menuExists=!0};this.chooseItem=function(n){r.kill();$("#menuSelection").text($(n).text());location.href=$(n).attr("href")}}function sortBigToSmall(n,t){return t-n}function getScrollTop(){return self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}function getScrollLeft(){return self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft}function getWindowHeight(){var n=document.documentElement;return self.innerHeight||n&&n.clientHeight||document.body.clientHeight}function getWindowWidth(){var n=document.documentElement;return self.innerWidth||n&&n.clientWidth||document.body.clientWidth}function fitHorizontal(n,t){var i=parseInt(t)||$(n).offset().left;return i+$(n).width()+20<=getWindowWidth()+getScrollLeft()&&i-getScrollLeft()>=0}function fitVertical(n,t){var i=parseInt(t)||$(n).offset().top;return i+$(n).height()<=getWindowHeight()+getScrollTop()&&i-getScrollTop()>=0}var allUIMenus=[];$.fn.menu=function(n){if(allUIMenus.length==0){var n=n;return this.each(function(){var i=this,t=new Menu(i,n);allUIMenus.push(t);t.kill();$(this).mousedown(function(){!t.menuOpen}).click(function(){return t.menuOpen==!1?t.showMenu():t.kill(),!1});$(i).next().children().length>0&&$($($(i).next()).children()[0].childNodes).children(".xp-topsubnavhighlight").length>0&&t.showMenu()})}};Menu.prototype.flyout=function(n,t){var i=this;this.resetFlyoutMenu=function(){var t=n.find("ul ul");t.removeClass("ui-widget-content").hide()};n.addClass("fg-menu-flyout").find("li:has(ul)").each(function(){var r=n.width(),u,i,f=$(this).find("ul");f.css({left:r,width:r}).hide();$(this).find("a:eq(0)").addClass("fg-menu-indicator").html("<span>"+$(this).find("a:eq(0)").text()+'<\/span><span class="ui-icon '+t.nextMenuLink+'"><\/span>').hover(function(){clearTimeout(i);var n=$(this).next();fitVertical(n,$(this).offset().top)||n.css({top:"auto",bottom:0});fitHorizontal(n,$(this).offset().left+100)||n.css({left:"auto",right:r,"z-index":999});u=setTimeout(function(){n.addClass("ui-widget-content").show(t.showSpeed).attr("aria-expanded","true")},300)},function(){clearTimeout(u);var n=$(this).next();i=setTimeout(function(){n.removeClass("ui-widget-content").hide(t.showSpeed).attr("aria-expanded","false")},400)});$(this).find("ul a").hover(function(){clearTimeout(i);$(this).parents("ul").prev().is("a.fg-menu-indicator")&&$(this).parents("ul").prev().addClass(t.flyOutOnState)},function(){i=setTimeout(function(){f.hide(t.showSpeed);n.find(t.flyOutOnState).removeClass(t.flyOutOnState)},500)})});n.find("a").click(function(){return i.chooseItem(this),!1})};Menu.prototype.drilldown=function(n,t){var e=this,i=n.find(".fg-menu"),r=$('<ul class="fg-menu-breadcrumb ui-widget-header ui-helper-clearfix"><\/ul>'),o=$('<li class="fg-menu-breadcrumb-text">'+t.crumbDefaultText+"<\/li>"),h=t.backLink?t.backLinkText:t.topLinkText,c=t.backLink?"fg-menu-prev-list":"fg-menu-all-lists",l=t.backLink?"ui-state-default":"",a=t.backLink?'<span><img src="/_layouts/Images/XPointBase/nav-icon.png" style="border:none;" class="ui-icon" ><\/img><\/span>':"",s=$('<li class="'+c+'"><a href="#" class="'+l+'">'+a+h+"<\/a><\/li>"),u,f;n.addClass("fg-menu-ipod");t.backLink?r.addClass("fg-menu-footer").appendTo(n).hide():r.addClass("fg-menu-header").prependTo(n);r.append(o);u=function(n){n.height()>t.maxHeight&&n.addClass("fg-menu-scroll");n.css({height:t.maxHeight})};f=function(n){n.removeClass("fg-menu-scroll").removeClass("fg-menu-current").height("auto")};this.resetDrilldownMenu=function(){$(".fg-menu-current").removeClass("fg-menu-current");i.animate({left:0},t.crossSpeed,function(){$(this).find("ul").each(function(){$(this).hide();f($(this))});i.addClass("fg-menu-current")});$(".fg-menu-all-lists").find("span").remove();r.empty().append(o);$(".fg-menu-footer").empty().hide();u(i)};i.addClass("fg-menu-content fg-menu-current ui-widget-content ui-helper-clearfix").css({width:n.width()}).find("ul").css({width:n.width(),left:n.width()}).addClass("ui-widget-content").hide();u(i);i.find("a").each(function(){$(this).next().is("ul")?$(this).addClass("fg-menu-indicator").each(function(){$(this).html("<span>"+$(this).text()+'<\/span><span><img src="/_layouts/Images/XPointBase/nav-icon.png" style="border:none;" class="ui-icon" ><\/img><\/span>')}).click(function(){var l=$(this).next(),a=$(this).parents("ul:eq(0)"),y=a.is(".fg-menu-content")?0:parseFloat(i.css("left")),p=Math.round(y-parseFloat(n.width())),o=$(".fg-menu-footer"),h,v,c;return f(a),u(l),i.animate({left:p},t.crossSpeed),l.show().addClass("fg-menu-current").attr("aria-expanded","true"),h=function(n){var r=n,t=$(".fg-menu-current"),i=t.parents("ul:eq(0)");t.hide().attr("aria-expanded","false");f(t);u(i);i.addClass("fg-menu-current").attr("aria-expanded","true");i.hasClass("fg-menu-content")&&(r.remove(),o.hide())},t.backLink?o.find("a").size()==0&&(o.show(),$('<a href="#"><span class="ui-icon ui-icon-triangle-1-w"><\/span> <span>Back<\/span><\/a>').appendTo(o).click(function(){var r=$(this),u=parseFloat(i.css("left"))+n.width();return i.animate({left:u},t.crossSpeed,function(){h(r)}),!1})):(r.find("li").size()==1&&(r.empty().append(s),s.find("a").click(function(){return e.resetDrilldownMenu(),!1})),$(".fg-menu-current-crumb").removeClass("fg-menu-current-crumb"),v=$(this).find("span:eq(0)").text(),c=$('<li class="fg-menu-current-crumb"><a href="javascript://" class="fg-menu-crumb">'+v+"<\/a><\/li>"),c.appendTo(r).find("a").click(function(){if($(this).parent().is(".fg-menu-current-crumb"))e.chooseItem(this);else{var n=-($(".fg-menu-current").parents("ul").size()-1)*180;i.animate({left:n},t.crossSpeed,function(){h()});$(this).parent().addClass("fg-menu-current-crumb").find("span").remove();$(this).parent().nextAll().remove()}return!1}),c.prev().append(' <span class="ui-icon '+t.nextCrumbLink+'"><\/span>')),!1}):$(this).click(function(){return e.chooseItem(this),!1})})};Menu.prototype.setPosition=function(n,t,i){var r=n,u=t,o={refX:$("#contentmain").scrollLeft()>0?$("#contentmain").scrollLeft()+u.offset().left:u.offset().left,refY:$("#contentmain").scrollTop()>0?$("#contentmain").scrollTop()+u.offset().top:u.offset().top,refW:u.getTotalWidth(),refH:u.getTotalHeight()},i=i,f,e,s=$('<div class="positionHelper" ><\/div>');s.css({position:"absolute",left:o.refX,top:"auto",width:o.refW,height:o.refH});r.wrap(s);switch(i.positionOpts.posX){case"left":f=0;break;case"center":f=o.refW/2;break;case"right":f=o.refW}switch(i.positionOpts.posY){case"top":e=0;break;case"center":e=o.refH/2;break;case"bottom":e=o.refH}f+=i.positionOpts.offsetX;e+=i.positionOpts.offsetY;i.positionOpts.directionV=="up"?(r.css({top:"auto",bottom:e}),i.positionOpts.detectV&&!fitVertical(r)&&r.css({bottom:"auto",top:e})):(r.css({bottom:"auto",top:e}),i.positionOpts.detectV&&!fitVertical(r)&&r.css({top:"auto",bottom:e}));i.positionOpts.directionH=="left"?(r.css({left:"auto",right:f}),i.positionOpts.detectH&&!fitHorizontal(r)&&r.css({right:"auto",left:f})):(r.css({right:"auto",left:f}),i.positionOpts.detectH&&!fitHorizontal(r)&&(r.css({left:"auto",right:f}),$(r.children().get(0)).css({float:"right"})));i.positionOpts.linkToFront&&u.clone().addClass("linkClone").css({position:"absolute",top:0,right:"auto",bottom:"auto",left:0,width:u.width(),height:u.height()}).insertAfter(r)};jQuery.fn.getTotalWidth=function(){return $(this).width()+parseInt($(this).css("paddingRight"))+parseInt($(this).css("paddingLeft"))+parseInt($(this).css("borderRightWidth"))+parseInt($(this).css("borderLeftWidth"))};jQuery.fn.getTotalHeight=function(){return $(this).height()+parseInt($(this).css("paddingTop"))+parseInt($(this).css("paddingBottom"))+parseInt($(this).css("borderTopWidth"))+parseInt($(this).css("borderBottomWidth"))};Number.prototype.pxToEm=String.prototype.pxToEm=function(n){var i,t,r,u;return n=jQuery.extend({scope:"body",reverse:!1},n),i=this==""?0:parseFloat(this),r=function(){var n=document.documentElement;return self.innerWidth||n&&n.clientWidth||document.body.clientWidth},n.scope=="body"&&$.browser.msie&&(parseFloat($("body").css("font-size"))/r()).toFixed(1)>0?(u=function(){return(parseFloat($("body").css("font-size"))/r()).toFixed(3)*16},t=u()):t=parseFloat(jQuery(n.scope).css("font-size")),n.reverse==!0?(i*t).toFixed(2)+"px":(i/t).toFixed(2)+"em"};
/*
//# sourceMappingURL=fg.menu.min.js.map
*/