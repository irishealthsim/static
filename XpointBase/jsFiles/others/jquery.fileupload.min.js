(function(n){(function(t){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],t):typeof exports=="object"?t(require("jquery"),require("/layouts/XPointBase/jsFiles/others/jquery.ui.widget.js")):t(n)})(function(t){"use strict";function i(n){var i=n==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var u=r.dataTransfer;u&&t.inArray("Files",u.types)!==-1&&this._trigger(n,t.Event(n,{delegatedEvent:r}))!==!1&&(r.preventDefault(),i&&(u.dropEffect="copy"))}}t=n;t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled"));t.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);t.support.xhrFormDataFileUpload=!!window.FormData;t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(n,i){return n=this.messages[n]||n.toString(),i&&t.each(i,function(t,i){n=n.replace("{"+t+"}",i)}),n},formData:function(n){return n.serializeArray()},add:function(n,i){if(n.isDefaultPrevented())return!1;(i.autoUpload||i.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var n=this.slice||this.webkitSlice||this.mozSlice;return n.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(n,t,i){var r=n-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=n),this.bitrate}},_isXHRUpload:function(n){return!n.forceIframeTransport&&(!n.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(n){var i;return t.type(n.formData)==="function"?n.formData(n.form):t.isArray(n.formData)?n.formData:t.type(n.formData)==="object"?(i=[],t.each(n.formData,function(n,t){i.push({name:n,value:t})}),i):[]},_getTotal:function(n){var i=0;return t.each(n,function(n,t){i+=t.size||1}),i},_initProgressObject:function(n){var i={loaded:0,total:0,bitrate:0};n._progress?t.extend(n._progress,i):n._progress=i},_initResponseObject:function(n){var t;if(n._response)for(t in n._response)n._response.hasOwnProperty(t)&&delete n._response[t];else n._response={}},_onProgress:function(n,i){if(n.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),u;if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&n.loaded!==n.total)return;i._time=r;u=Math.floor(n.loaded/n.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0);this._progress.loaded+=u-i._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval);i._progress.loaded=i.loaded=u;i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,u,i.bitrateInterval);this._trigger("progress",t.Event("progress",{delegatedEvent:n}),i);this._trigger("progressall",t.Event("progressall",{delegatedEvent:n}),this._progress)}},_initProgressListener:function(n){var r=this,i=n.xhr?n.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable;t.loaded=i.loaded;t.total=i.total;r._onProgress(t,n)}),n.xhr=function(){return i})},_isInstanceOf:function(n,t){return Object.prototype.toString.call(t)==="[object "+n+"]"},_initXHRData:function(n){var f=this,i,r=n.files[0],e=n.multipart||!t.support.xhrFileUpload,u=t.type(n.paramName)==="array"?n.paramName[0]:n.paramName;n.headers=t.extend({},n.headers);n.contentRange&&(n.headers["Content-Range"]=n.contentRange);e&&!n.blob&&this._isInstanceOf("File",r)||(n.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"');e?t.support.xhrFormDataFileUpload&&(n.postMessage?(i=this._getFormData(n),n.blob?i.push({name:u,value:n.blob}):t.each(n.files,function(r,f){i.push({name:t.type(n.paramName)==="array"&&n.paramName[r]||u,value:f})})):(f._isInstanceOf("FormData",n.formData)?i=n.formData:(i=new FormData,t.each(this._getFormData(n),function(n,t){i.append(t.name,t.value)})),n.blob?i.append(u,n.blob,r.name):t.each(n.files,function(r,e){(f._isInstanceOf("File",e)||f._isInstanceOf("Blob",e))&&i.append(t.type(n.paramName)==="array"&&n.paramName[r]||u,e,e.uploadName||e.name)})),n.data=i):(n.contentType=r.type||"application/octet-stream",n.data=n.blob||r);n.blob=null},_initIframeSettings:function(n){var i=t("<a><\/a>").prop("href",n.url).prop("host");n.dataType="iframe "+(n.dataType||"");n.formData=this._getFormData(n);n.redirect&&i&&i!==location.host&&n.formData.push({name:n.redirectParamName||"redirect",value:n.redirect})},_initDataSettings:function(n){this._isXHRUpload(n)?(this._chunkedUpload(n,!0)||(n.data||this._initXHRData(n),this._initProgressListener(n)),n.postMessage&&(n.dataType="postmessage "+(n.dataType||""))):this._initIframeSettings(n)},_getParamName:function(n){var r=t(n.fileInput),i=n.paramName;return i?t.isArray(i)||(i=[i]):(i=[],r.each(function(){for(var n=t(this),u=n.prop("name")||"files[]",r=(n.prop("files")||[1]).length;r;)i.push(u),r-=1}),i.length||(i=[r.prop("name")||"files[]"])),i},_initFormSettings:function(n){n.form&&n.form.length||(n.form=t(n.fileInput.prop("form")),n.form.length||(n.form=t(this.options.fileInput.prop("form"))));n.paramName=this._getParamName(n);n.url||(n.url=n.form.prop("action")||location.href);n.type=(n.type||t.type(n.form.prop("method"))==="string"&&n.form.prop("method")||"").toUpperCase();n.type!=="POST"&&n.type!=="PUT"&&n.type!=="PATCH"&&(n.type="POST");n.formAcceptCharset||(n.formAcceptCharset=n.form.attr("accept-charset"))},_getAJAXSettings:function(n){var i=t.extend({},this.options,n);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(n){return n.state?n.state():n.isResolved()?"resolved":n.isRejected()?"rejected":"pending"},_enhancePromise:function(n){return n.success=n.done,n.error=n.fail,n.complete=n.always,n},_getXHRPromise:function(n,i,r){var u=t.Deferred(),f=u.promise();return i=i||this.options.context||f,n===!0?u.resolveWith(i,r):n===!1&&u.rejectWith(i,r),f.abort=u.promise,this._enhancePromise(f)},_addConvenienceMethods:function(n,i){var r=this,u=function(n){return t.Deferred().resolveWith(r,n).promise()};i.process=function(n,f){return(n||f)&&(i._processQueue=this._processQueue=(this._processQueue||u([this])).pipe(function(){return i.errorThrown?t.Deferred().rejectWith(r,[i]).promise():u(arguments)}).pipe(n,f)),this._processQueue||u([this])};i.submit=function(){return this.state()!=="pending"&&(i.jqXHR=this.jqXHR=r._trigger("submit",t.Event("submit",{delegatedEvent:n}),this)!==!1&&r._onSend(n,this)),this.jqXHR||r._getXHRPromise()};i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))};i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0};i.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"};i.progress=function(){return this._progress};i.response=function(){return this._response}},_getUploadedBytes:function(n){var i=n.getResponseHeader("Range"),t=i&&i.split("-"),r=t&&t.length>1&&parseInt(t[1],10);return r&&r+1},_chunkedUpload:function(n,i){n.uploadedBytes=n.uploadedBytes||0;var u=this,f=n.files[0],e=f.size,r=n.uploadedBytes,c=n.maxChunkSize||e,l=this._blobSlice,o=t.Deferred(),s=o.promise(),a,h;return!(this._isXHRUpload(n)&&l&&(r||c<e))||n.data?!1:i?!0:r>=e?(f.error=n.i18n("uploadedBytes"),this._getXHRPromise(!1,n.context,[null,"error",f.error])):(h=function(){var i=t.extend({},n),s=i._progress.loaded;i.blob=l.call(f,r,r+c,f.type);i.chunkSize=i.blob.size;i.contentRange="bytes "+r+"-"+(r+i.chunkSize-1)+"/"+e;u._initXHRData(i);u._initProgressListener(i);a=(u._trigger("chunksend",null,i)!==!1&&t.ajax(i)||u._getXHRPromise(!1,i.context)).done(function(f,c,l){r=u._getUploadedBytes(l)||r+i.chunkSize;s+i.chunkSize-i._progress.loaded&&u._onProgress(t.Event("progress",{lengthComputable:!0,loaded:r-i.uploadedBytes,total:r-i.uploadedBytes}),i);n.uploadedBytes=i.uploadedBytes=r;i.result=f;i.textStatus=c;i.jqXHR=l;u._trigger("chunkdone",null,i);u._trigger("chunkalways",null,i);r<e?h():o.resolveWith(i.context,[f,c,l])}).fail(function(n,t,r){i.jqXHR=n;i.textStatus=t;i.errorThrown=r;u._trigger("chunkfail",null,i);u._trigger("chunkalways",null,i);o.rejectWith(i.context,[n,t,r])})},this._enhancePromise(s),s.abort=function(){return a.abort()},h(),s)},_beforeSend:function(n,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(n,i,r,u){var f=u._progress.total,e=u._response;u._progress.loaded<f&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:f,total:f}),u);e.result=u.result=n;e.textStatus=u.textStatus=i;e.jqXHR=u.jqXHR=r;this._trigger("done",null,u)},_onFail:function(n,t,i,r){var u=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total);u.jqXHR=r.jqXHR=n;u.textStatus=r.textStatus=t;u.errorThrown=r.errorThrown=i;this._trigger("fail",null,r)},_onAlways:function(n,t,i,r){this._trigger("always",null,r)},_onSend:function(n,i){i.submit||this._addConvenienceMethods(n,i);var r=this,f,s,e,h,u=r._getAJAXSettings(i),o=function(){return r._sending+=1,u._bitrateTimer=new r._BitrateTimer,f=f||((s||r._trigger("send",t.Event("send",{delegatedEvent:n}),u)===!1)&&r._getXHRPromise(!1,u.context,s)||r._chunkedUpload(u)||t.ajax(u)).done(function(n,t,i){r._onDone(n,t,i,u)}).fail(function(n,t,i){r._onFail(n,t,i,u)}).always(function(n,t,i){if(r._onAlways(n,t,i,u),r._sending-=1,r._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>r._sending)for(var f=r._slots.shift();f;){if(r._getDeferredState(f)==="pending"){f.resolve();break}f=r._slots.shift()}r._active===0&&r._trigger("stop")})};return(this._beforeSend(n,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)?(this.options.limitConcurrentUploads>1?(e=t.Deferred(),this._slots.push(e),h=e.pipe(o)):(this._sequence=this._sequence.pipe(o,o),h=this._sequence),h.abort=function(){return(s=[undefined,"abort","abort"],!f)?(e&&e.rejectWith(u.context,s),o()):f.abort()},this._enhancePromise(h)):o()},_onAdd:function(n,i){var a=this,p=!0,f=t.extend({},this.options,i),u=i.files,v=u.length,o=f.limitMultiFileUploads,c=f.limitMultiFileUploadSize,b=f.limitMultiFileUploadSizeOverhead,w=0,l=this._getParamName(f),s,e,h,r,y=0;if(c&&(!v||u[0].size===undefined)&&(c=undefined),(f.singleFileUploads||o||c)&&this._isXHRUpload(f))if(f.singleFileUploads||c||!o)if(!f.singleFileUploads&&c)for(h=[],s=[],r=0;r<v;r=r+1)w+=u[r].size+b,(r+1===v||w+u[r+1].size+b>c||o&&r+1-y>=o)&&(h.push(u.slice(y,r+1)),e=l.slice(y,r+1),e.length||(e=l),s.push(e),y=r+1,w=0);else s=l;else for(h=[],s=[],r=0;r<v;r+=o)h.push(u.slice(r,r+o)),e=l.slice(r,r+o),e.length||(e=l),s.push(e);else h=[u],s=[l];return i.originalFiles=u,t.each(h||u,function(r,u){var f=t.extend({},i);return f.files=h?u:[u],f.paramName=s[r],a._initResponseObject(f),a._initProgressObject(f),a._addConvenienceMethods(n,f),p=a._trigger("add",t.Event("add",{delegatedEvent:n}),f)}),p},_replaceFileInput:function(n){var i=n.fileInput,r=i.clone(!0);n.fileInputClone=r;t("<form><\/form>").append(r)[0].reset();i.after(r).detach();t.cleanData(i.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(n,t){return t===i[0]?r[0]:t});i[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(n,i){var s=this,r=t.Deferred(),u=function(t){t&&!t.entry&&(t.entry=n);r.resolve([t])},h=function(t){s._handleFileTreeEntries(t,i+n.name+"/").done(function(n){r.resolve(n)}).fail(u)},e=function(){o.readEntries(function(n){n.length?(f=f.concat(n),e()):h(f)},u)},o,f=[];return i=i||"",n.isFile?n._file?(n._file.relativePath=i,r.resolve(n._file)):n.file(function(n){n.relativePath=i;r.resolve(n)},u):n.isDirectory?(o=n.createReader(),e()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(n,i){var r=this;return t.when.apply(t,t.map(n,function(n){return r._handleFileTreeEntry(n,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(n){n=n||{};var i=n.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(n){var t;return n.webkitGetAsEntry?(t=n.webkitGetAsEntry(),t&&(t._file=n.getAsFile()),t):n.getAsEntry()})):t.Deferred().resolve(t.makeArray(n.files)).promise()},_getSingleFileInputFiles:function(n){n=t(n);var r=n.prop("webkitEntries")||n.prop("entries"),i,u;if(r&&r.length)return this._handleFileTreeEntries(r);if(i=t.makeArray(n.prop("files")),i.length)i[0].name===undefined&&i[0].fileName&&t.each(i,function(n,t){t.name=t.fileName;t.size=t.fileSize});else{if(u=n.prop("value"),!u)return t.Deferred().resolve([]).promise();i=[{name:u.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(n){return!(n instanceof t)||n.length===1?this._getSingleFileInputFiles(n):t.when.apply(t,t.map(n,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(n){var r=this,i={fileInput:t(n.target),form:t(n.target.form)};this._getFileInputFiles(i.fileInput).always(function(u){i.files=u;r.options.replaceFileInput&&r._replaceFileInput(i);r._trigger("change",t.Event("change",{delegatedEvent:n}),i)!==!1&&r._onAdd(n,i)})},_onPaste:function(n){var i=n.originalEvent&&n.originalEvent.clipboardData&&n.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(t.each(i,function(n,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",t.Event("paste",{delegatedEvent:n}),r)!==!1&&this._onAdd(n,r))},_onDrop:function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var u=this,i=n.dataTransfer,r={};i&&i.files&&i.files.length&&(n.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i;u._trigger("drop",t.Event("drop",{delegatedEvent:n}),r)!==!1&&u._onAdd(n,r)}))},_onDragOver:i("dragover"),_onDragEnter:i("dragenter"),_onDragLeave:i("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(n,i){var r=t.inArray(n,this._specialOptions)!==-1;r&&this._destroyEventHandlers();this._super(n,i);r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var n=this.options;n.fileInput===undefined?n.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):n.fileInput instanceof t||(n.fileInput=t(n.fileInput));n.dropZone instanceof t||(n.dropZone=t(n.dropZone));n.pasteZone instanceof t||(n.pasteZone=t(n.pasteZone))},_getRegExp:function(n){var t=n.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(n,i){return n!=="url"&&t.type(i)==="string"&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var n=this,i=this.options,r=this.element.data();t.each(this.element[0].attributes,function(t,u){var f=u.name.toLowerCase(),e;/^data-/.test(f)&&(f=f.slice(5).replace(/-[a-z]/g,function(n){return n.charAt(1).toUpperCase()}),e=r[f],n._isRegExpOption(f,e)&&(e=n._getRegExp(e)),i[f]=e)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(n){var i=this;n&&!this.options.disabled&&(n.fileInput&&!n.files?this._getFileInputFiles(n.fileInput).always(function(t){n.files=t;i._onAdd(null,n)}):(n.files=t.makeArray(n.files),this._onAdd(null,n)))},send:function(n){if(n&&!this.options.disabled){if(n.fileInput&&!n.files){var e=this,i=t.Deferred(),u=i.promise(),r,f;return u.abort=function(){return(f=!0,r)?r.abort():(i.reject(null,"abort","abort"),u)},this._getFileInputFiles(n.fileInput).always(function(t){if(!f){if(!t.length){i.reject();return}n.files=t;r=e._onSend(null,n);r.then(function(n,t,r){i.resolve(n,t,r)},function(n,t,r){i.reject(n,t,r)})}}),this._enhancePromise(u)}if(n.files=t.makeArray(n.files),n.files.length)return this._onSend(null,n)}return this._getXHRPromise(!1,n&&n.context)}})})})(jq1102,jq1102);
/*
//# sourceMappingURL=jquery.fileupload.min.js.map
*/