(function(n){function t(t,i,r,u,f){t=t.toLowerCase();var e=i;return n.fn.fmatter[t]&&(e=n.fn.fmatter[t](i,r,f)),e}n.fmatter={};n.fn.fmatter=function(i,r,u,f,e){return u=n.extend({},n.jgrid.formatter,u),t(i,r,u,f,e)};n.fmatter.util={NumberFormat:function(n,t){var o,s,c,u,h,f;if(isNumber(n)||(n*=1),isNumber(n)){var l=n<0,i=n+"",e=t.decimalSeparator?t.decimalSeparator:".",r;if(isNumber(t.decimalPlaces)&&(o=t.decimalPlaces,s=Math.pow(10,o),i=Math.round(n*s)/s+"",r=i.lastIndexOf("."),o>0))for(r<0?(i+=e,r=i.length-1):e!=="."&&(i=i.replace(".",e));i.length-1-r<o;)i+="0";if(t.thousandsSeparator){for(c=t.thousandsSeparator,r=i.lastIndexOf(e),r=r>-1?r:i.length,u=i.substring(r),h=-1,f=r;f>0;f--)h++,h%3==0&&f!==r&&(!l||f>1)&&(u=c+u),u=i.charAt(f-1)+u;i=u}return i=t.prefix?t.prefix+i:i,t.suffix?i+t.suffix:i}return n},DateFormat:function(t,i,r,u){var h=function(n,t){for(n=String(n),t=parseInt(t)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0},e=0,s,o,g,c=["i18n"],a;for(c.i18n={dayNames:u.dayNames,monthNames:u.monthNames},i=i.split(/[\\\/:_;.\t\T\s-]/),t=t.split(/[\\\/:_;.\t\T\s-]/),o=0,g=t.length;o<g;o++)t[o]=="M"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s<12&&(i[o]=s+1)),t[o]=="F"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s>11&&(i[o]=s+1-12)),f[t[o].toLowerCase()]=parseInt(i[o],10);f.m=parseInt(f.m)-1;a=f.y;a>=70&&a<=99?f.y=1900+f.y:a>=0&&a<=69&&(f.y=2e3+f.y);e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,0);u.masks.newformat?r=u.masks.newformat:r||(r="Y-m-d");var l=e.getHours(),tt=e.getMinutes(),p=e.getDate(),v=e.getMonth()+1,k=e.getTimezoneOffset(),it=e.getSeconds(),rt=e.getMilliseconds(),w=e.getDay(),y=e.getFullYear(),b=(w+6)%7+1,d=(new Date(y,v-1,p)-new Date(y,0,1))/864e5,nt={d:h(p),D:c.i18n.dayNames[w],j:p,l:c.i18n.dayNames[w+7],N:b,S:u.S(p),w:w,z:d,W:b<5?Math.floor((d+b-1)/7)+1:Math.floor((d+b-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:c.i18n.monthNames[v- -11],m:h(v),M:c.i18n.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?u.AmPm[0]:u.AmPm[1],A:l<12?u.AmPm[2]:u.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(tt),s:h(it),u:rt,e:"?",I:"?",O:(k>0?"-":"+")+h(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return n in nt?nt[n]:n.substring(1)})}};n.fn.fmatter.defaultFormat=function(n,t){return isValue(n)&&n!==""?n:t.defaultValue?t.defaultValue:"&#160;"};n.fn.fmatter.email=function(t,i){return isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?"disabled":"",t=t+"",t=t.toLowerCase(),f=t.search(/(false|0|no|off)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):"<a "+u+' href="'+t+'">'+t+"<\/a>"};n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam,target:i.target,idName:i.idName},u="";return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),idUrl=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,isString(t)?"<a "+u+' href="'+idUrl+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),t.indexOf("br")>=0)?n.fn.fmatter.defaultFormat(t,i):t.indexOf("div")>=0?n.fn.fmatter.defaultFormat(t,i):isEmpty(t)?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r){var u=n.extend({},i.date);return isUndefined(i.colModel.formatoptions)||(u=n.extend({},u,i.colModel.formatoptions)),u.reformatAfterEdit||r!="edit"?isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(u.srcformat,t,u.newformat,u):n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.peoplepicker=function(t,i){if(isEmpty(t))return n.fn.fmatter.defaultFormat(t,i);n.data(document.body,i.colModel.name+i.rowId+"peoplepickerdata",t);var r="",u=!0;return n.each(t.split(","),function(){var t=this,i;t!=null&&n.trim(t).length!=0&&(u||(r+=", "),u=!1,i=t.split("!")[1],r+=i)}),r};n.fn.fmatter.select=function(t,i,r){var u,c,l,s;if(r=="edit")return n.fn.fmatter.defaultFormat(t,i);if(!isEmpty(t)){if(u=!1,isUndefined(i.colModel.editoptions)||(u=i.colModel.editoptions.value),u){var f=[],h=i.colModel.editoptions.multiple===!0?!0:!1,o=[],e;if(h&&(o=t.split(","),o=n.map(o,function(t){return n.trim(t)})),isString(u)){for(c=u.split(";"),l=0,s=0;s<c.length;s++)if(e=c[s].split(":"),h)jQuery.inArray(e[0],o)>-1&&(f[l]=e[1],l++);else if(n.trim(e[0])==n.trim(t)){f[0]=e[1];break}}else isObject(u)&&(h&&(f=jQuery.map(scel,function(n){return u[n]})),f[0]=u[t]||"");return f.join(", ")}return n.fn.fmatter.defaultFormat(t,i)}};n.fn.fmatter.imageformatter=function(n){var t="<img alt='"+n+"' src='/_layouts/Images/XpointBase/";return t+=n=="Amber"?"Orange":n,t+".gif'/>"};n.fn.fmatter.doclinkformatter=function(t,i){var u="",r;return t!=""&&(r=t.split(","),n.each(r,function(t){var s=n(r[t]).hasClass("docLinkOverlay"),e=s?n(r[t]).find("a").attr("href"):n(r[t]).attr("href");var o=e.split("/"),f=o[o.length-1],h="<p id='clickToOpen'>Click to open<\/p><a class='file' data-docname='"+f.replace(/%20/g," ")+"' docname='"+f+"' filePath="+e+" target='_blank' id='"+i.rowId+"' value='click' onclick='downloadFile(this);' style='display:inline-block;float:left;' `><span class='xp-IconAttachDoc' title='"+f.replace(/%20/g," ")+"'><\/span><\/a>";u+=h})),u};downloadFile=function(t){var e=t.attributes.docname.value,i=e.substr(e.lastIndexOf(".")+1),u="",r,f;n.urlParam("trackerId")!=undefined?u=n.urlParam("trackerId"):n.urlParam("TrackerID")!=undefined&&(u=n.urlParam("TrackerID"));r=t.attributes.filePath.value;r.indexOf("LifecycleTemplates")>=0?f="Lists/LifecycleTemplates":r.indexOf("LifecycleDocuments")>=0&&(f="LifecycleDocuments");i=="doc"||i=="ppt"||i=="xls"||i=="docx"||i=="pptx"||i=="xlsx"?n.ajax({url:"/_layouts/IImpact.Web/LifecycleDocumentsService.asmx/GetDocumentnodeId",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",async:!1,data:"{FilePath:'"+r+"'}",success:function(n){var t=jQuery.parseJSON(n.d);window.location.href="/_layouts/xpointbase/pages/DownloadMSOfficeFiles.aspx?trackerId="+u+"&nodeId="+t.FileID+"&sourceDoc="+f+"&fileExt=."+i+"&fileVersion="+t.FileVersion+""}}):window.open(r,"_blank")};n.fn.fmatter.doc=function(n,t){var i;return y=t.rowId,i="<div >",i+="<p >",i+='<a title="Import data from CSV" id="import_'+t.rowId+'" value="click" onclick="ImportFile(this);"  class="xp-exportIcon" href="javascript:void(0);"  style="display:inline-block;float:left;"><\/a>',i+="<\/p>",i+="<p>",i+='<a title="Export table data to CSV" id="export_'+t.rowId+'" value="click" onclick="ExportFile(this);" class="xp-importIcon" href="javascript:void(0);"  style="display:inline-block;float:left;"><\/a>',i+="<p>",i+='<a title="Export Template to CSV" id="exporttemplate_'+t.rowId+'" value="click" onclick="ExportTemplate(this);" class="xp-TemplateIcon" href="javascript:void(0);"  style="display:inline-block;float:left;"><\/a>',i+='<\/p><p style="clear: both;">',i+="<\/div>",""+i};ExportFile=function(t){var u=n(t).attr("id").split("_")[1],f=n.urlParam("trackerId"),e="/_layouts/XPoint.Client/pages/spcChartDataExport.aspx?tid="+f+"&rid="+u,r=n("#myframe"),i;r.length>0&&r.remove();i=document.createElement("iframe");i.setAttribute("id","myframe");i.setAttribute("src",e);i.style.display="none";document.body.appendChild(i)};ExportTemplate=function(t){var u=n(t).attr("id").split("_")[1],f=n.urlParam("trackerId"),e="/_layouts/XPoint.Client/pages/SPCChartTemplateExport.aspx?tid="+f+"&rid="+u,r=n("#Templateframe"),i;r.length>0&&r.remove();i=document.createElement("iframe");i.setAttribute("id","myframe");i.setAttribute("src",e);i.style.display="none";document.body.appendChild(i)};ImportFile=function(t){var f,s;console.log("Import");var e=n(t).attr("id").split("_")[1],c=n(t).attr("id"),r=n('<div id="overlay"><\/div>');r.appendTo(document.body);r.show();var o=n("<div class='popup' />"),u=n("<div class='xp-popup' />"),h=n("<div class='xp-close-border'><span id='browseHeader' class='BrowseFilePopupHeader'>Browse File<\/span><span class='close' id='close' >X<\/span><\/div>"),i=" <body >";i+="<div >";i+="<p id='xp-loader' class='xp-message'>Please select only CSV format<\/p>";i+="<a class='ui-button-text xp-browse' id='uploadFile'>Browse<\/a>";i+="<\/div>";u.append(h);u.append(n(i));o.append(u);o.appendTo(r);n(".popup").show();n("#close").click(function(){return n(".popup").remove(),r.remove(),!1});s="/_layouts/IImpact.Web/NGHA/SPCChartService.asmx/ImportFile";n("#uploadFile").live("click",function(){f=new AjaxUpload(n("#uploadFile"),{action:s,autoSubmit:!0,name:"uploadSPCFile",dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",responseType:"json",onComplete:function(t,i){console.log("On Submit Response: "+i);console.log(i);var r=n(i.getElementsByTagName("Status")[0]).text(),u=n(i.getElementsByTagName("Message")[0]).text();r==1?(n("#browseHeader").html("Status"),n("#xp-loader").html("Import file contains duplicate entries so cannot be imported.").css({color:"red","text-align":"center"}),n("#xp-loader").append("<div><a class='ui-button-text xp-browse' style='color:#ffffff' id='uploadFile'><input class='browser-hidden' type='file' style='width:1px;height:0px;'>Retry<\/input><\/a><\/div>")):n.ajax({url:"/_layouts/IImpact.Web/NGHA/SPCChartService.asmx/SaveRowid",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{rowid:'"+e+"'}",responseType:"json",success:function(){window.location.reload()}})},onSubmit:function(t){n("#browseHeader").html("Status");n("#xp-loader").html("<img src='/_layouts/Images/Xpointbase/loader.gif' style='display: block;margin-left: auto;margin-right: auto;'><\/img>");n("#uploadFile").remove();console.log("On Submit File: "+t)},onChange:function(t){console.log("onchange");var i=n.urlParam("trackerId");f.setData({rowId:e,trackerId:i});console.log("File: "+t)}});f.submit()});n("#uploadFile").trigger("click")};n.urlParam=function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t==null?undefined:t[1]};n.unformat=function(cellval,options,pos,cnt,rowid){var formatType=options.colModel.formatter,op=options.colModel.formatoptions||{},unformatFunc=options.colModel.unformat||n.fn.fmatter[formatType]&&n.fn.fmatter[formatType].unformat,opts,stripTag,cbv,ret;if(unformatFunc!=="undefined"&&isFunction(unformatFunc))ret=unformatFunc(cellval,options);else if(formatType!=="undefined"&&isString(formatType)){opts=n.jgrid.formatter||{};switch(formatType){case"peoplepicker":return n.data(document.body,options.colModel.name+rowid+"peoplepickerdata");case"integer":op=n.extend({},opts.integer,op);stripTag=eval("/"+op.thousandsSeparator+"/g");ret=n(cellval).text().replace(stripTag,"");break;case"number":op=n.extend({},opts.number,op);stripTag=eval("/"+op.thousandsSeparator+"/g");ret=n(cellval).text().replace(op.decimalSeparator,".").replace(stripTag,"");break;case"currency":op=n.extend({},opts.currency,op);stripTag=eval("/"+op.thousandsSeparator+"/g");ret=n(cellval).text().replace(op.decimalSeparator,".").replace(op.prefix,"").replace(op.suffix,"").replace(stripTag,"");break;case"checkbox":cbv=options.colModel.editoptions?options.colModel.editoptions.value.split(":"):["Yes","No"];ret=n("input",cellval).attr("checked")?cbv[0]:cbv[1];break;case"imageformatter":return n("img",cellval).attr("alt");case"doclinkformatter":return ret="",n(cellval).find("a").each(function(){var i=n(this).attr("href"),r=n(this).data().docname,t="<a href='"+i+"'>"+r+"<\/a>";ret=ret==""?t:ret+","+t}),ret;default:ret=n(cellval).text()}}return ret?ret:cnt===!0?n(cellval).text():n.jgrid.htmlDecode(n(cellval).html())};isValue=function(n){return isObject(n)||isString(n)||isNumber(n)||isBoolean(n)};isBoolean=function(n){return typeof n=="boolean"};isNull=function(n){return n===null};isNumber=function(n){return typeof n=="number"&&isFinite(n)};isString=function(n){return typeof n=="string"};isEmpty=function(t){return!isString(t)&&isValue(t)?!1:isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0};isUndefined=function(n){return typeof n=="undefined"};isObject=function(n){return n&&(typeof n=="object"||isFunction(n))||!1};isFunction=function(n){return typeof n=="function"}})(jQuery);
/*
//# sourceMappingURL=jquery.fmatter.min.js.map
*/