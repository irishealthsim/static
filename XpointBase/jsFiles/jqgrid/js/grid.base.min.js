(function(n){n.extend(n.jgrid,{htmlDecode:function(n){return n=="&nbsp;"||n=="&#160;"||n.length==1&&n.charCodeAt(0)==160?"":n?String(n).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):n},format:function(t){var i=n.makeArray(arguments).slice(1);return t.replace(/\{(\d+)\}/g,function(n,t){return i[t]})},getAbsoluteIndex:function(t,i){var e=0,u=0,f,r;if(n.browser.version>7)return i;for(r=0;r<t.cells.length;r++)if(f=t.cells(r),f.style.display=="none"?e++:u++,u>i)return r;return r},stripHtml:function(n){return n?n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""):n},stringToDoc:function(n){var t,i;if(typeof n!="string")return n;try{i=new DOMParser;t=i.parseFromString(n,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;t.loadXML(n)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(n){var js=n;js.substr(0,9)=="while(1);"&&(js=js.substr(9));js.substr(0,2)=="/*"&&(js=js.substr(2,js.length-4));js||(js="{}");with(window)return eval("("+js+")")}});n.fn.jqGrid=function(t){t=n.extend(!0,{url:"",enableEmail:!1,enableViews:!1,viewsurl:"",viewscolumnsurl:"",saveviewsurl:"",height:150,page:1,rowNum:20,tmpid:-1,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"json",mtype:"POST",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!1,xmlReader:{},reportquerytype:"",jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,searchdata:{},caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},mid:-1,isactivity:!1,selview:"Team",listname:"na",phasebased:!1,treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",mid:"mid",currenturl:"currenturl",tmpid:"tmpid",isactivity:"isactivity",selview:"selview",reportquerytype:"reportquerytype"},sortclass:"grid_sort",resizeclass:"grid_resize",forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!0,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,radiobutton:!0,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,imgurl:"",imgclass:"",altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:""},n.jgrid.defaults,t||{});var i={headers:[],cols:[],footers:[],dragStart:function(i,r,u){this.resizing={idx:i,startX:r.clientX,sOL:u[0]};this.hDiv.style.cursor="col-resize";this.curGbox=n("#rs_m"+t.id,"#gbox_"+t.id);this.curGbox.css({display:"block",left:u[0],top:u[1],height:u[2]});document.onselectstart=new Function("return false")},dragMove:function(n){if(this.resizing){var i=n.clientX-this.resizing.startX,r=this.headers[this.resizing.idx],u=r.width+i,f,e;u>33&&(this.curGbox.css({left:this.resizing.sOL+i}),t.forceFit===!0?(f=this.headers[this.resizing.idx+t.nv],e=f.width-i,e>33&&(r.newWidth=u,f.newWidth=e,this.newWidth=t.tblwidth)):(this.newWidth=t.tblwidth+i,r.newWidth=u))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var i=this.resizing.idx,r=this.headers[i].newWidth||this.headers[i].width;this.resizing=!1;n("#rs_m"+t.id).css("display","none");t.colModel[i].width=r;this.headers[i].width=r;this.headers[i].el.style.width=r+"px";this.cols.length>0&&(this.cols[i].style.width=r+"px");this.footers.length>0&&(this.footers[i].style.width=r+"px");t.forceFit===!0?(r=this.headers[i+t.nv].newWidth||this.headers[i+t.nv].width,this.headers[i+t.nv].width=r,this.headers[i+t.nv].el.style.width=r+"px",this.cols.length>0&&(this.cols[i+t.nv].style.width=r+"px"),this.footers.length>0&&(this.footers[i+t.nv].style.width=r+"px"),t.colModel[i+t.nv].width=r):(t.tblwidth=this.newWidth,n("table:first",this.bDiv).css("width",t.tblwidth+"px"),n("table:first",this.hDiv).css("width",t.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,t.footerrow&&(n("table:first",this.sDiv).css("width",t.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft))}this.curGbox=null;document.onselectstart=new Function("return true")},scrollGrid:function(){if(t.scroll===!0){var i=this.bDiv.scrollTop;i!=this.scrollTop&&(this.scrollTop=i,this.bDiv.scrollHeight-i-n(this.bDiv).height()<=0&&parseInt(t.page,10)+1<=parseInt(t.lastpage,10)&&(t.page=parseInt(t.page,10)+1,this.populate()))}this.hDiv.scrollLeft=this.bDiv.scrollLeft;t.footerrow&&(this.sDiv.scrollLeft=this.bDiv.scrollLeft)}};return this.each(function(){var f,b,kt,et,ot,dt,st,v,o,ht,vi;if(!this.grid){if(this.p=t,this.p.colNames.length===0)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length){alert(n.jgrid.errors.model);return}var y=n("<div class='ui-jqgrid-view'<\/div>"),gt,p=n.browser.msie?!0:!1,ct=(n.browser.webkit||n.browser.safari)&&parseFloat(n.browser.version)<536.5?!0:!1;n(y).insertBefore(this);n(this).appendTo(y).removeClass("scroll");b=n("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all  '><\/div>");n(b).insertBefore(y).attr("id","gbox_"+this.id);n(y).appendTo(b).attr("id","gview_"+this.id);gt=p&&n.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"";n("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").append(gt).insertBefore(y);n("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(y);n(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var r=this,ni=n.isFunction(this.p.beforeSelectRow)?this.p.beforeSelectRow:!1,yi=n.isFunction(this.p.ondblClickRow)?this.p.ondblClickRow:!1,ti=n.isFunction(this.p.onSortCol)?this.p.onSortCol:!1,h=n.isFunction(this.p.loadComplete)?this.p.loadComplete:!1,tt=n.isFunction(this.p.loadError)?this.p.loadError:!1,it=n.isFunction(this.p.loadBeforeSend)?this.p.loadBeforeSend:!1,pi=n.isFunction(this.p.onRightClickRow)?this.p.onRightClickRow:!1,ii=n.isFunction(this.p.afterInsertRow)?this.p.afterInsertRow:!1,ri=n.isFunction(this.p.onHeaderClick)?this.p.onHeaderClick:!1,wi=n.isFunction(this.p.beforeRequest)?this.p.beforeRequest:!1,ui=n.isFunction(this.p.onCellSelect)?this.p.onCellSelect:!1,c=function(n,t){return n=parseInt(n,10),isNaN(n)?t?t:0:n},k=function(n,t){var f=r.p.colModel[n].align,u='style="';return f&&(u+="text-align:"+f+";"),r.p.colModel[n].hidden===!0&&(u+="display:none;"),t===0&&(u+="width: "+i.headers[n].width+"px;"),u+'"'},rt=function(t,i,u,f,e){var o,s;return o=fi(t,i,u,e,"add"),s=k(u,f),r.p.hoverrows==!0?'<td role="gridcell" '+s+' title="'+n.jgrid.stripHtml(o)+'" >'+o+"<\/td>":'<td role="gridcell" '+s+">"+o+"<\/td>"},fi=function(t,i,u,f,e){var o=r.p.colModel[u],s,h;return typeof o.formatter!="undefined"?(h={rowId:t,colModel:o},s=n.isFunction(o.formatter)?o.formatter(i,h,f,e):n.fmatter?n.fn.fmatter(o.formatter,i,h,f,e):lt(i)):s=o.edittype=="richtextbox"?n.jgrid.htmlDecode(lt(i)):lt(i),s},lt=function(n){return n===undefined||n===null||n===""?"&#160;":n+""},ei=function(n,t,i){var r='<input type="checkbox" id="jqg_'+n+'" class="cbox" name="jqg_'+n+'"/>',u=k(t,i);return"<td role='gridcell' "+u+">"+r+"<\/td>"},oi=function(n,i,r,u){var f=(parseInt(r)-1)*parseInt(u)+1+i,e=k(n,i);return t.radiobutton?'<td role="gridcell" class="ui-state-default jqgrid-rownum xp-CusTopNav" '+e+"><input type='radio' id='jqg_"+f+"' class='jqg_selectradio' name='jqg_selectradio' /><\/td>":'<td role="gridcell" class="ui-state-default jqgrid-rownum xp-CusTopNav" '+e+">"+f+"<\/td>"},si=function(n){for(var t,u=[],f=0,i=0;i<r.p.colModel.length;i++)t=r.p.colModel[i],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(u[f]=n=="xml"?t.xmlmap||t.name:t.jsonmap||t.name,f++);return u},at=function(t,i,u){var ft;if(r.p.reccount=0,n.isXMLDoc(t))r.p.treeANode===-1&&r.p.scroll===!1?(n("tbody",i).empty(),u=0):u=u>0?u:0;else return;var l,it,b=0,a,k,h=0,y=0,o=0,d,g,p=[],w={},et=r.rows.length,c,v,f=[],s=0,ot=r.p.altRows===!0?r.p.altclass:"",ut;r.p.xmlReader.repeatitems||(p=si("xml"));r.p.keyIndex===!1?(d=r.p.xmlReader.id,g=d.indexOf("[")===-1?function(t,i){return n(d,t).text()||i}:function(n,t){return n.getAttribute(d.replace(/[\[\]]/g,""))||t}):g=function(t){return p.length-1>=r.p.keyIndex?n(p[r.p.keyIndex],t).text():n(r.p.xmlReader.cell+":eq("+r.p.keyIndex+")",t).text()};n(r.p.xmlReader.page,t).each(function(){r.p.page=this.textContent||this.text||1});n(r.p.xmlReader.total,t).each(function(){r.p.lastpage=this.textContent||this.text||1});n(r.p.xmlReader.records,t).each(function(){r.p.records=this.textContent||this.text||0});n(r.p.xmlReader.userdata,t).each(function(){r.p.userData[this.getAttribute("name")]=this.textContent||this.text});var nt=n(r.p.xmlReader.root+" "+r.p.xmlReader.row,t),tt=nt.length,e=0;if(nt&&tt)for(ft=r.p.rowNum;e<tt;){if(c=nt[e],v=g(c,e+1),ut=e%2==1?ot:"",f[s++]='<tr id="'+v+'" role="row" class ="ui-widget-content jqgrow '+ut+'">',r.p.rownumbers===!0&&(f[s++]=oi(0,e,r.p.page,r.p.rowNum),o=1),r.p.multiselect===!0&&(f[s++]=ei(v,o,e),h=1),r.p.subGrid===!0&&(f[s++]=n(r).addSubGridCell(h+o,e+u),y=1),r.p.xmlReader.repeatitems===!0)n(r.p.xmlReader.cell,c).each(function(n){a=this.textContent||this.text;w[r.p.colModel[n+h+y+o].name]=a;f[s++]=rt(v,a,n+h+y+o,e+u,c)});else for(l=0;l<p.length;l++)a=n(p[l],c).text(),w[r.p.colModel[l+h+y+o].name]=a,f[s++]=rt(v,a,l+h+y+o,e+u,c);if(f[s++]="<\/tr>",r.p.gridview===!1){if(r.p.treeGrid===!0){it=r.p.treeANode>=-1?r.p.treeANode:0;k=n(f.join(""))[0];try{n(r).setTreeNode(w,k)}catch(st){}et===0?n("tbody:first",i).append(k):n(r.rows[e+it+u]).after(k)}else n("tbody:first",i).append(f.join(""));if(r.p.subGrid===!0)try{n(r).addSubGrid(r.rows[r.rows.length-1],h+o)}catch(st){}ii&&r.p.afterInsertRow(v,w,c);f=[];s=0}if(w={},b++,e++,b>=ft)break}r.p.gridview===!0&&n("table:first",i).append(f.join(""));b>0&&(r.grid.cols=r.rows[0].cells,r.p.records===0&&(r.p.records=tt));f=null;r.p.treeGrid||r.p.scroll||(r.grid.bDiv.scrollTop=0,r.p.reccount=b);r.p.treeANode=-1;r.p.userDataOnFooter&&n(r).footerData("set",r.p.userData,!0);vt(!1)},ut=function(datap,t,rcnt){var data=datap.d,rn,ccur;if(r.p.reccount=0,data)r.p.treeANode===-1&&r.p.scroll===!1?(n("tbody",t).empty(),rcnt=0):rcnt=rcnt>0?rcnt:0;else return;var ir=0,v,i,j,row,f=[],cur,gi=0,si=0,ni=0,len,drows,idn,rd={},fpos,rl=r.rows.length,idr,rowData=[],ari=0,cn=r.p.altRows===!0?r.p.altclass:"",cn1;if(r.p.page=data[r.p.jsonReader.page]||1,r.p.lastpage=data[r.p.jsonReader.total]||1,r.p.records=data[r.p.jsonReader.records]||0,r.p.userData=data[r.p.jsonReader.userdata]||{},r.p.jsonReader.repeatitems||(f=si("json")),r.p.keyIndex===!1?(idn=r.p.jsonReader.id,f.length>0&&!isNaN(idn)&&(idn=f[idn])):idn=f.length>0?f[r.p.keyIndex]:r.p.keyIndex,drows=data[r.p.jsonReader.root],drows){for(len=drows.length,i=0,rn=r.p.rowNum;i<len;){if(cur=drows[i],idr=cur[idn],idr===undefined&&(f.length===0?r.p.jsonReader.cell?(ccur=cur[r.p.jsonReader.cell],idr=ccur[idn]||i+1,ccur=null):idr=i+1:idr=i+1),cn1=i%2==1?cn:"",rowData[ari++]='<tr id="'+idr+'" role="row" class= "ui-widget-content jqgrow '+cn1+'">',r.p.rownumbers===!0&&(rowData[ari++]=oi(0,i,r.p.page,r.p.rowNum),ni=1),r.p.multiselect&&(rowData[ari++]=ei(idr,ni,i),gi=1),r.p.subGrid&&(rowData[ari++]=n(r).addSubGridCell(gi+ni,i+rcnt),si=1),r.p.jsonReader.repeatitems===!0)for(r.p.jsonReader.cell&&(cur=cur[r.p.jsonReader.cell]),j=0;j<cur.length;j++)rowData[ari++]=rt(idr,cur[j],j+gi+si+ni,i+rcnt,cur),rd[r.p.colModel[j+gi+si+ni].name]=cur[j];else for(j=0;j<f.length;j++){if(v=cur[f[j]],v===undefined)try{v=eval("cur."+f[j])}catch(e){}rowData[ari++]=rt(idr,v,j+gi+si+ni,i+rcnt,cur);rd[r.p.colModel[j+gi+si+ni].name]=cur[f[j]]}if(rowData[ari++]="<\/tr>",r.p.gridview===!1){if(r.p.treeGrid===!0){fpos=r.p.treeANode>=-1?r.p.treeANode:0;row=n(rowData.join(""))[0];try{n(r).setTreeNode(rd,row)}catch(e){}rl===0?n("tbody:first",t).append(row):n(r.rows[i+fpos+rcnt]).after(row)}else n("tbody:first",t).append(rowData.join(""));if(r.p.subGrid===!0)try{n(r).addSubGrid(r.rows[r.rows.length-1],gi+ni)}catch(e){}ii&&r.p.afterInsertRow(idr,rd,cur);rowData=[];ari=0}if(rd={},ir++,i++,ir>rn)break}r.p.gridview===!0&&n("table:first",t).append(rowData.join(""));ir>0&&(r.grid.cols=r.rows[0].cells,r.p.records===0&&(r.p.records=len))}r.p.treeGrid||r.p.scroll||(r.grid.bDiv.scrollTop=0);r.p.reccount=ir;r.p.treeANode=-1;r.p.userDataOnFooter&&n(r).footerData("set",r.p.userData,!0);vt(!1);l()},vt=function(t){var i,u,f,l,e,o,s,h;f=(parseInt(r.p.page)-1)*parseInt(r.p.rowNum);r.p.pager&&(r.p.loadonce?(i=u=1,r.p.lastpage=r.page=1,n(".selbox",r.p.pager).attr("disabled",!0)):(i=c(r.p.page),u=c(r.p.lastpage),n(".selbox",r.p.pager).attr("disabled",!1)),r.p.pginput===!0&&(n(".ui-pg-input",r.p.pager).val(r.p.page),n("#sp_1",r.p.pager).html(r.p.lastpage)),r.p.viewrecords&&(l=r.p.scroll===!0?0:f,r.p.reccount===0?n(".ui-paging-info",r.p.pager).html(r.p.emptyrecords):(e=l+1,o=f+r.p.reccount,s=r.p.records,n.fmatter&&(h=n.jgrid.formatter.integer||{},e=n.fmatter.util.NumberFormat(e,h),o=n.fmatter.util.NumberFormat(o,h),s=n.fmatter.util.NumberFormat(s,h)),n(".ui-paging-info",r.p.pager).html(n.jgrid.format(r.p.recordtext,e,o,s)))),r.p.pgbuttons===!0&&(i<=0&&(i=u=1),i==1?n("#first, #prev",r.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"):n("#first, #prev",r.p.pager).removeClass("ui-state-disabled"),i==u?n("#next, #last",r.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"):n("#next, #last",r.p.pager).removeClass("ui-state-disabled")));t===!0&&r.p.rownumbers===!0&&n("td.jqgrid-rownum",r.rows).each(function(t){n(this).html(f+1+t)});n.isFunction(r.p.gridComplete)&&r.p.gridComplete()},bi=function(){var i=[];return n(t.colModel).each(function(n){i[n]=this.name}),i.join("|")},w=function(){var s,t,u,f,o,e;if(!i.hDiv.loading){if(d(),t={nd:(new Date).getTime(),_search:r.p.search},t[r.p.prmNames.rows]=r.p.rowNum,t[r.p.prmNames.page]=r.p.page,t[r.p.prmNames.sort]=r.p.sortname,t[r.p.prmNames.order]=r.p.sortorder,t[r.p.prmNames.mid]=r.p.mid,t[r.p.prmNames.reportquerytype]=r.p.reportquerytype,t[r.p.prmNames.currenturl]=location.href,t[r.p.prmNames.tmpid]=r.p.tmpid,t[r.p.prmNames.selview]=r.p.postData.selview!=null?r.p.postData.selview:r.p.selview,t[r.p.prmNames.isactivity]=r.p.isactivity,t.listname=r.p.listname,t.colModel=bi(),t.phasebased=r.p.phasebased,o={searchdata:n.extend(r.p.postData,t)},e=r.p.scroll===!1?0:r.rows.length-1,n.isFunction(r.p.datatype)){r.p.datatype(s,"load_"+r.p.id);return}wi&&r.p.beforeRequest();u=r.p.datatype.toLowerCase();switch(u){case"json":n.ajax({url:r.p.url,contentType:"application/json; charset=utf-8",type:r.p.mtype,dataType:"json",data:JSON.stringify(o),complete:function(t,i){i=="success"&&(ut(n.jgrid.parse(t.responseText),r.grid.bDiv,e),t=null,h&&h())},error:function(n,t,i){l();tt&&tt(n,t,i);l()},beforeSend:function(n){it&&it(n)}});(r.p.loadonce||r.p.treeGrid)&&(r.p.datatype="local");break;case"xml":case"script":n.ajax({url:r.p.url,type:r.p.mtype,dataType:u,data:r.p.postData,complete:function(t,i){(i=="success"||t.statusText=="OK"&&t.status=="200")&&((u==="json"||u==="script")&&ut(n.jgrid.parse(t.responseText),r.grid.bDiv,e),u==="xml"&&at(t.responseXML,r.grid.bDiv,e),h&&h(t));t=null;l()},error:function(n,t,i){tt&&tt(n,t,i);l();n=null},beforeSend:function(n){d();it&&it(n)}});(r.p.loadonce||r.p.treeGrid)&&(r.p.datatype="local");break;case"xmlstring":d();at(f=n.jgrid.stringToDoc(r.p.datastr),r.grid.bDiv);r.p.datatype="local";h&&h(f);r.p.datastr=null;l();break;case"jsonstring":d();f=typeof r.p.datastr=="string"?n.jgrid.parse(r.p.datastr):r.p.datastr;ut(f,r.grid.bDiv);r.p.datatype="local";h&&h(f);r.p.datastr=null;l();break;case"local":case"clientside":d();r.p.datatype="local";ki();l()}}},d=function(){if(i.hDiv.loading=!0,!r.p.hiddengrid)switch(r.p.loadui){case"enable":n("#load_"+r.p.id).fadeIn("fast");break;case"block":n("#lui_"+r.p.id).show();n("#load_"+r.p.id).show()}},l=function(){i.hDiv.loading=!1;switch(r.p.loadui){case"enable":n("#load_"+r.p.id).fadeOut("fast");break;case"block":n("#lui_"+r.p.id).hide();n("#load_"+r.p.id).hide()}},ki=function(){var s=/[\$,%]/g,u=[],f=0,t,e,h,o=r.p.sortorder=="asc"?1:-1;n.each(r.p.colModel,function(n){if(this.index==r.p.sortname||this.name==r.p.sortname)return f=r.p.lastsort=n,t=this.sorttype,!1});h=t=="float"||t=="number"||t=="currency"?function(n){var t=parseFloat(n.replace(s,""));return isNaN(t)?0:t}:t=="int"||t=="integer"?function(n){return c(n.replace(s,""))}:t=="date"?function(n){var t=r.p.colModel[f].datefmt||"Y-m-d";return di(t,n).getTime()}:function(t){return n.trim(t.toUpperCase())};n.each(r.rows,function(t,i){try{e=n.unformat(n(i).children("td").eq(f),{colModel:r.p.colModel[f]},f,!0)}catch(o){e=n(i).children("td").eq(f).text()}i.sortKey=h(e);u[t]=this});r.p.treeGrid?n(r).SortTree(o):(u.sort(function(n,t){return n.sortKey<t.sortKey?-o:n.sortKey>t.sortKey?o:0}),u[0]&&(n("td",u[0]).each(function(t){n(this).css("width",i.headers[t].width+"px")}),i.cols=u[0].cells),n.each(u,function(t,i){n("tbody",r.grid.bDiv).append(i);i.sortKey=null}));r.p.multiselect&&(n("tbody tr",r.grid.bDiv).removeClass("ui-state-highlight"),n("[id^=jqg_]",r.rows).attr("checked",!1),n("#cb_jqg",r.grid.hDiv).attr("checked",!1),r.p.selarrrow=[]);r.grid.bDiv.scrollTop=0},di=function(t,i){var r={m:1,d:1,y:1970,h:0,i:0,s:0},u,s,f,o,e;for(i=i.split(/[\\\/:_;.\t\T\s-]/),t=t.split(/[\\\/:_;.\t\T\s-]/),o=n.jgrid.formatter.date.monthNames,u=0,s=t.length;u<s;u++)t[u]=="M"&&(f=n.inArray(i[u],o),f!==-1&&f<12&&(i[u]=f+1)),t[u]=="F"&&(f=n.inArray(i[u],o),f!==-1&&f>11&&(i[u]=f+1-12)),r[t[u].toLowerCase()]=parseInt(i[u],10);return r.m=parseInt(r.m,10)-1,e=r.y,e>=70&&e<=99?r.y=1900+r.y:e>=0&&e<=69&&(r.y=2e3+r.y),new Date(r.y,r.m,r.d,r.h,r.i,r.s,0)},gi=function(){var l="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",u=n(r.p.pager).attr("id")||"pager",o=r.p.pginput===!0?"<td>"+n.jgrid.format(r.p.pgtext||"","<input autocomplete='off' class='ui-pg-input' type='text' size='1' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'><\/span>")+"<\/td>":"",t="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",s,i,a,v,y,f,p,e,h=function(t){if(n.isFunction(r.p.onPaging))r.p.onPaging(t);r.p.selrow=null;r.p.multiselect&&(r.p.selarrrow=[],n("#cb_jqg",r.grid.hDiv).attr("checked",!1));r.p.savedRow=[]};if(i="pg_"+u,a=u+"_left",v=u+"_center",y=u+"_right",n(r.p.pager).addClass("ui-jqgrid-pager corner-bottom xp-NoBackground ").append("<div id='"+i+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+a+"' align='left'><\/td><td id='"+v+"' align='center' style='white-space:nowrap;'><\/td><td id='"+y+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>"),r.p.pgbuttons===!0?(t+="<td id='first' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",t+="<td id='prev' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",t+=o!=""?l+o+l:"",t+="<td id='next' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",t+="<td id='last' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):o!=""&&(t+=o),r.p.rowList.length>0){for(s="<select class='ui-pg-selbox' role='listbox'>",e=0;e<r.p.rowList.length;e++)s+="<option role='option' value="+r.p.rowList[e]+(r.p.rowNum==r.p.rowList[e]?" selected":"")+">"+r.p.rowList[e];s+="<\/select>";t+="<td>"+s+"<\/td>"}t+="<\/tr><\/tbody><\/table>";r.p.viewrecords===!0&&n("td#"+u+"_"+r.p.recordpos,"#"+i).append("<div class='ui-paging-info'><\/div>");n("td#"+u+"_"+r.p.pagerpos,"#"+i).append(t);p=n(".ui-jqgrid").css("font-size")||"11px";n("body").append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+p+";visibility:hidden;' ><\/div>");f=n(t).clone().appendTo("#testpg").width();setTimeout(function(){n("#testpg").remove()},1e3);f>0&&(f+=25,n("td#"+u+"_"+r.p.pagerpos,"#"+i).width(f));r.p._nvtd=[];r.p._nvtd[0]=f?Math.floor((r.p.width-f)/2):Math.floor(r.p.width/3);r.p._nvtd[1]=0;t=null;n(".ui-pg-selbox","#"+i).bind("change",function(){return r.p.page=1,r.p.rowNum=this.value,h("records"),w(),!1});r.p.pgbuttons===!0&&(n(".ui-pg-button","#"+i).hover(function(){n(this).hasClass("ui-state-disabled")?this.style.cursor="default":(n(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){n(this).hasClass("ui-state-disabled")||(n(this).removeClass("ui-state-hover"),this.style.cursor="default")}),n("#first, #prev, #next, #last",r.p.pager).click(function(){var n=c(r.p.page),t=c(r.p.lastpage),i=!1,e=!0,o=!0,u=!0,f=!0;return t===0||t===1?(e=!1,o=!1,u=!1,f=!1):t>1&&n>=1?n===1?(e=!1,o=!1):n>1&&n<t||n===t&&(u=!1,f=!1):t>1&&n===0&&(u=!1,f=!1,n=t-1),this.id==="first"&&e&&(r.p.page=1,i=!0),this.id==="prev"&&o&&(r.p.page=n-1,i=!0),this.id==="next"&&u&&(r.p.page=n+1,i=!0),this.id==="last"&&f&&(r.p.page=t,i=!0),i&&(h(this.id),w()),!1}));r.p.pginput===!0&&n("input.ui-pg-input","#"+i).keypress(function(t){var i=t.charCode?t.charCode:t.keyCode?t.keyCode:0;return i==13?(r.p.page=n(this).val()>0?n(this).val():r.p.page,h("user"),w(),!1):this})},yt=function(t,u,f,e){var s,o;if(r.p.colModel[u].sortable&&!(r.p.savedRow.length>0)){if(f||(r.p.lastsort==u?r.p.sortorder=="asc"?r.p.sortorder="desc":r.p.sortorder=="desc"&&(r.p.sortorder="asc"):r.p.sortorder="asc",r.p.page=1),e){if(r.p.lastsort==u&&r.p.sortorder==e)return;r.p.sortorder=e}o=n("thead:first",i.hDiv).get(0);n("tr th:eq("+r.p.lastsort+") span.ui-grid-ico-sort",o).addClass("ui-state-disabled");n("tr th:eq("+r.p.lastsort+")",o).attr("aria-selected","false");n("tr th:eq("+u+") span.ui-icon-"+r.p.sortorder,o).removeClass("ui-state-disabled");n("tr th:eq("+u+")",o).attr("aria-selected","true");r.p.viewsortcols[0]||r.p.lastsort!=u&&(n("tr th:eq("+r.p.lastsort+") span.s-ico",o).hide(),n("tr th:eq("+u+") span.s-ico",o).show());r.p.lastsort=u;t=t.substring(5);r.p.sortname=r.p.colModel[u].index||t;s=r.p.sortorder;ti&&ti(t,u,s);r.p.datatype=="local"?r.p.deselectAfterSort&&n(r).resetSelection():(r.p.selrow=null,r.p.multiselect&&n("#cb_jqg",r.grid.hDiv).attr("checked",!1),r.p.selarrrow=[],r.p.savedRow=[]);r.p.scroll===!0&&n("tbody tr",r.grid.bDiv).remove();r.p.subGrid&&r.p.datatype=="local"&&n("td.sgexpanded","#"+r.p.id).each(function(){n(this).trigger("click")});w();r.p.sortname!=t&&u&&(r.p.lastsort=u)}},nr=function(){var t=0,u=r.p.cellLayout,f=0,k,h=r.p.scrollOffset,l,a=!1,v,o=0,e=0,y=r.p.multiselectWidth,p=r.p.subGridWidth,w=r.p.rownumWidth,b=r.p.cellLayout,s;n.each(r.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1);this.hidden===!1&&(t+=c(this.width),f++)});isNaN(r.p.width)?r.p.width=i.width=t:i.width=r.p.width;r.p.tblwidth=t;r.p.shrinkToFit===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1);r.p.shrinkToFit===!0&&(ct&&(u=0,y+=b,p+=b,w+=b),r.p.multiselect&&(o=y,e=y+u,f--),r.p.subGrid&&(o+=p,e+=p+u,f--),r.p.rownumbers&&(o+=w,e+=w+u,f--),v=i.width-u*f-e,isNaN(r.p.height)||(v-=h,a=!0),t=0,n.each(r.p.colModel,function(n){this.hidden===!1&&this.name!=="cb"&&this.name!=="subgrid"&&this.name!=="rn"&&(l=Math.floor(v/(r.p.tblwidth-o)*this.width),this.width=l,t+=l,k=n)}),s=0,a&&i.width-e-(t+u*f)!==h?s=i.width-e-(t+u*f)-h:a||Math.abs(i.width-e-(t+u*f))===1||(s=i.width-e-(t+u*f)),r.p.colModel[k].width+=s,r.p.tblwidth=t+o+s)},tr=function(n){for(var u=n,i=n,t=n+1;t<r.p.colModel.length;t++)if(r.p.colModel[t].hidden!==!0){i=t;break}return i-u},ir=function(t){var u,i={},f=ct?0:r.p.cellLayout;for(i[0]=i[1]=i[2]=0,u=0;u<=t;u++)r.p.colModel[u].hidden===!1&&(i[0]+=r.p.colModel[u].width+f);return i[0]=i[0]-r.grid.bDiv.scrollLeft,n(r.grid.cDiv).is(":visible")&&(i[1]+=n(r.grid.cDiv).height()+parseInt(n(r.grid.cDiv).css("padding-top"))+parseInt(n(r.grid.cDiv).css("padding-bottom"))),r.p.toolbar[0]==!0&&(r.p.toolbar[1]=="top"||r.p.toolbar[1]=="both")&&(i[1]+=n(r.grid.uDiv).height()+parseInt(n(r.grid.uDiv).css("border-top-width"))+parseInt(n(r.grid.uDiv).css("border-bottom-width"))),i[2]+=n(r.grid.bDiv).height()+n(r.grid.hDiv).height(),i};for(this.p.id=this.id,n.inArray(r.p.multikey,["shiftKey","altKey","ctrlKey"])==-1&&(r.p.multikey=!1),r.p.keyIndex=!1,f=0;f<r.p.colModel.length;f++)if(r.p.colModel[f].key===!0){r.p.keyIndex=f;break}if(r.p.sortorder=r.p.sortorder.toLowerCase(),this.p.treeGrid===!0)try{n(this).setTreeGrid()}catch(ur){}if(this.p.subGrid)try{n(r).setSubGrid()}catch(ur){}this.p.multiselect&&(this.p.colNames.unshift("<input id='cb_jqg' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:ct?r.p.multiselectWidth+r.p.cellLayout:r.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center"}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:r.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center"}));r.p.xmlReader=n.extend({root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},r.p.xmlReader);r.p.jsonReader=n.extend({root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},r.p.jsonReader);r.p.scroll===!0&&(r.p.pgbuttons=!1,r.p.pginput=!1,r.p.rowList=[]);var a="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",pt,hi,wt,g,ft,e,u,ci,bt,li="",ai="";if(r.p.shrinkToFit===!0&&r.p.forceFit===!0)for(f=r.p.colModel.length-1;f>=0;f--)if(!r.p.colModel[f].hidden){r.p.colModel[f].resizable=!1;break}for(r.p.viewsortcols[1]=="horizontal"&&(li=" ui-i-asc",ai=" ui-i-desc"),pt=p?"class='ui-th-div-ie'":"",bt="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+li+" ui-state-disabled ui-icon ui-icon-triangle-1-n'><\/span>",bt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ai+" ui-state-disabled ui-icon ui-icon-triangle-1-s'><\/span><\/span>",f=0;f<this.p.colNames.length;f++)a+="<th role='columnheader' class='ui-state-default ui-th-column' >",hi=r.p.colModel[f].index||r.p.colModel[f].name,a+=r.p.colModel[f].headeralign!=null?"<div style='text-align:"+r.p.colModel[f].headeralign+"' id='jqgh_"+r.p.colModel[f].name+"' "+pt+">"+r.p.colNames[f]:"<div  id='jqgh_"+r.p.colModel[f].name+"' "+pt+">"+r.p.colNames[f],hi==r.p.sortname&&(r.p.lastsort=f),a+=bt+"<\/div><\/th>";a+="<\/tr><\/thead>";n(this).append(a);n("thead tr:first th",this).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});this.p.multiselect&&(kt=!0,et=[],typeof r.p.onSelectAll!="function"&&(kt=!1),n("#cb_jqg",this).bind("click",function(){if(this.checked?(n("[id^=jqg_]",r.rows).attr("checked",!0),n(r.rows).each(function(t){n(this).hasClass("subgrid")||(n(this).addClass("ui-state-highlight").attr("aria-selected","true"),r.p.selarrrow[t]=r.p.selrow=this.id)}),ot=!0,et=[]):(n("[id^=jqg_]",r.rows).attr("checked",!1),n(r.rows).each(function(t){n(this).hasClass("subgrid")||(n(this).removeClass("ui-state-highlight").attr("aria-selected","false"),et[t]=this.id)}),r.p.selarrrow=[],r.p.selrow=null,ot=!1),kt)r.p.onSelectAll(ot?r.p.selarrrow:et,ot)}));n.each(r.p.colModel,function(){this.width||(this.width=150)});r.p.autowidth===!1&&(dt=n(b).innerWidth(),r.p.width=dt>0?dt:"nw");nr();n(b).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+r.p.id+"'><\/div>");n(y).css("width",i.width+"px");a=n("thead:first",r).get(0);st="<table role='grid' style='width:"+r.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow'>";n("tr:first th",a).each(function(t){var f=n("div",this)[0],u;wt=r.p.colModel[t].width;typeof r.p.colModel[t].resizable=="undefined"&&(r.p.colModel[t].resizable=!0);g=document.createElement("span");n(g).html("&#160;");r.p.colModel[t].resizable?(n(this).addClass(r.p.resizeclass),n(g).mousedown(function(n){return r.p.forceFit===!0&&(r.p.nv=tr(t)),i.dragStart(t,n,ir(t)),!1}).addClass("ui-jqgrid-resize")):g="";n(this).css("width",wt+"px").prepend(g);r.p.colModel[t].hidden&&n(this).css("display","none");i.headers[t]={width:wt,el:this};ft=r.p.colModel[t].sortable;typeof ft!="boolean"&&(r.p.colModel[t].sortable=!0,ft=!0);u=r.p.colModel[t].name;u=="cb"||u=="subgrid"||u=="rn"||(r.p.viewsortcols[2]==!1?n(".ui-grid-ico-sort",this).click(function(){return yt(f.id,t,!0,n(this).attr("sort")),!1}):n("div",this).addClass("ui-jqgrid-sortable").click(function(){return yt(f.id,t),!1}));ft&&(r.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t==r.p.lastsort&&n("div span.ui-icon-"+r.p.sortorder,this).removeClass("ui-state-disabled")):t==r.p.lastsort&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+r.p.sortorder,this).removeClass("ui-state-disabled")));st+="<td role='gridcell' "+k(t,0)+">&nbsp;<\/td>"});st+="<\/tr><\/tbody><\/table>";ci=document.createElement("tbody");this.appendChild(ci);n(this).addClass("ui-jqgrid-btable");var rr=n("<table class='ui-jqgrid-htable' style='width:"+r.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(a),s=r.p.caption&&r.p.hiddengrid===!0?!0:!1,nt=n("<div class='ui-jqgrid-hbox'><\/div>");i.hDiv=document.createElement("div");n(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default xp-OuterPanel  ui-jqgrid-hdiv ui-corner-top  xp-BoxShadowTop ").append(nt).bind("selectstart",function(){return!1});n(nt).append(rr);s&&(n(i.hDiv).hide(),r.p.gridstate="hidden");r.p._height=0;r.p.pager&&(typeof r.p.pager=="string"&&r.p.pager.substr(0,1)!="#"&&(r.p.pager="#"+r.p.pager),n(r.p.pager).css({"background-color":"transparent"}).css({width:i.width+"px"}).appendTo(b).addClass("ui-jqgrid-pager xp-OuterPanel ui-corner-bottom xp-CusTopNav xp-BoxShadow"),r.p._height+=parseInt(n(r.p.pager).height(),10),s&&n(r.p.pager).hide(),gi());r.p.cellEdit===!1&&r.p.hoverrows===!0&&n(r).bind("mouseover",function(t){return u=n(t.target).parents("tr.jqgrow"),n(u).attr("class")!=="subgrid"&&n(u).addClass("ui-state-hover"),!1}).bind("mouseout",function(t){return u=n(t.target).parents("tr.jqgrow"),n(u).removeClass("ui-state-hover"),!1});n(r).before(i.hDiv).click(function(t){var i,f;if(e=t.target,i=n(e).hasClass("cbox"),u=n(e,r.rows).parents("tr.jqgrow"),n(u).length===0)return!1;if(f=!0,ni&&(f=ni(u[0].id)),e.tagName=="A")return!0;if(f===!0){if(r.p.cellEdit===!0)if(r.p.multiselect&&i)n(r).setSelection(!1,!0,u);else{v=u[0].rowIndex;o=n(e).is("td")?e.cellIndex:n(e).parents("td:first")[0].cellIndex;p&&(o=n.jgrid.getAbsoluteIndex(u[0],o));try{n(r).editCell(v,o,!0)}catch(t){}}else r.p.multikey?t[r.p.multikey]?n(r).setSelection(!1,!0,u):r.p.multiselect&&i&&(i=n("[id^=jqg_]",u).attr("checked"),n("[id^=jqg_]",u).attr("checked",!i)):r.p.multiselect&&r.p.multiboxonly?i?n(r).setSelection(!1,!0,u):(n(r.p.selarrrow).each(function(t,i){var u=r.rows.namedItem(i);n(u).removeClass("ui-state-highlight");n("#jqg_"+i.replace(".","\\."),u).attr("checked",!1)}),r.p.selarrrow=[],n("#cb_jqg",r.grid.hDiv).attr("checked",!1),n(r).setSelection(!1,!0,u)):n(r).setSelection(!1,!0,u);ui&&(v=u[0].id,o=n(e).is("td")?e.cellIndex:n(e).parents("td:first")[0].cellIndex,p&&(o=n.jgrid.getAbsoluteIndex(u[0],o)),ui(v,o,n(e).html(),e))}t.stopPropagation()}).bind("reloadGrid",function(){return r.p.treeGrid===!0&&(r.p.datatype=r.p.treedatatype),r.p.datatype=="local"?n(r).resetSelection():r.p.treeGrid||(r.p.selrow=null,r.p.multiselect&&(r.p.selarrrow=[],n("#cb_jqg",r.grid.hDiv).attr("checked",!1)),r.p.cellEdit&&(r.p.savedRow=[])),r.p.scroll===!0&&n("tbody tr",r.grid.bDiv).remove(),r.grid.populate(),!1});yi&&n(this).dblclick(function(t){if(e=t.target,u=n(e,r.rows).parents("tr.jqgrow"),n(u).length===0)return!1;v=u[0].rowIndex;o=n(e).is("td")?e.cellIndex:n(e).parents("td:first")[0].cellIndex;p&&(o=n.jgrid.getAbsoluteIndex(u[0],o));r.p.ondblClickRow(n(u).attr("id"),v,o);return!1});pi&&n(this).bind("contextmenu",function(t){if(e=t.target,u=n(e,r.rows).parents("tr.jqgrow"),n(u).length===0)return!1;r.p.multiselect||n(r).setSelection(!1,!0,u);v=u[0].rowIndex;o=n(e).is("td")?e.cellIndex:n(e).parents("td:first")[0].cellIndex;p&&(o=n.jgrid.getAbsoluteIndex(u[0],o));r.p.onRightClickRow(n(u).attr("id"),v,o);return!1});i.bDiv=document.createElement("div");n(i.bDiv).append(this).addClass("ui-jqgrid-bdiv xp-OuterPanel").css({height:r.p.height+(isNaN(r.p.height)?"":"px"),width:i.width+"px"}).scroll(function(){i.scrollGrid()});r.p.height!=null&&r.p.height=="auto"&&n(i.bDiv).attr("style","overflow-y: hidden");n("table:first",i.bDiv).css({width:r.p.tblwidth+"px"});p?(n("tbody",this).size()===2&&n("tbody:first",this).remove(),r.p.multikey&&n(i.bDiv).bind("selectstart",function(){return!1})):r.p.multikey&&n(i.bDiv).bind("mousedown",function(){return!1});s&&n(i.bDiv).hide();i.cDiv=document.createElement("div");ht=r.p.hidegrid===!0?n("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ht.addClass("ui-state-hover")},function(){ht.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>"):"";n(i.cDiv).append(ht).append("<div class=' xp-OverflowHidden'  style='float:left;width:auto'><div style='float:left;width:auto !important' class='xp-DivHeader'>"+r.p.caption+"<\/div><\/div>").addClass("ui-jqgrid-titlebar  ui-corner-tl ui-corner-tr ui-helper-clearfix");n(i.cDiv).insertBefore(i.hDiv);r.p.toolbar[0]&&(i.uDiv=document.createElement("div"),r.p.toolbar[1]=="top"?n(i.uDiv).insertBefore(i.hDiv):r.p.toolbar[1]=="bottom"&&n(i.uDiv).insertAfter(i.hDiv),r.p.toolbar[1]=="both"?(i.ubDiv=document.createElement("div"),n(i.uDiv).insertBefore(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),n(i.ubDiv).insertAfter(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),r.p._height+=c(n(i.ubDiv).height()),s&&n(i.ubDiv).hide()):n(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default xp-ClearBoth").attr("id","t_"+this.id),r.p._height+=c(n(i.uDiv).height()),s&&n(i.uDiv).hide());r.p.footerrow&&(i.sDiv=document.createElement("div"),nt=n("<div class='ui-jqgrid-hbox'><\/div>"),n(i.sDiv).addClass("ui-jqgrid-sdiv xp-OuterPanel").append(nt).insertAfter(i.hDiv).width(i.width),n(nt).append(st),i.footers=n(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,r.p.rownumbers&&(i.footers[0].className="ui-state-default jqgrid-rownum"),s&&n(i.sDiv).hide());r.p.caption?(r.p._height+=parseInt(n(i.cDiv,r).height(),10),vi=r.p.datatype,r.p.hidegrid===!0&&(n(".ui-jqgrid-titlebar-close",i.cDiv).toggle(function(){if(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+r.p.id).slideUp("fast"),r.p.pager&&n(r.p.pager).slideUp("fast"),r.p.toolbar[0]===!0&&(r.p.toolbar[1]=="both"&&n(i.ubDiv).slideUp("fast"),n(i.uDiv).slideUp("fast")),r.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+r.p.id).slideUp("fast"),n("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),r.p.gridstate="hidden",ri&&!s)r.p.onHeaderClick(r.p.gridstate)},function(){if(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+r.p.id).slideDown("fast"),r.p.pager&&n(r.p.pager).slideDown("fast"),r.p.toolbar[0]===!0&&(r.p.toolbar[1]=="both"&&n(i.ubDiv).slideDown("fast"),n(i.uDiv).slideDown("fast")),r.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+r.p.id).slideDown("fast"),n("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),s&&(r.p.datatype=vi,w(),s=!1),r.p.gridstate="visible",ri)r.p.onHeaderClick(r.p.gridstate)}),s&&(n(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click"),r.p.datatype="local"))):n(i.cDiv).hide();n(i.hDiv).after(i.bDiv).mousemove(function(n){return i.resizing&&i.dragMove(n),!1});r.p._height+=parseInt(n(i.hDiv).height(),10);n(document).mouseup(function(){return i.resizing?(i.dragEnd(),!1):!0});this.updateColumns=function(){var t=this.rows[0],i=this;return t&&(n("td",t).each(function(t){n(this).css("width",i.grid.headers[t].width+"px")}),this.grid.cols=t.cells),this};r.formatCol=function(n,t){return k(n,t)};r.sortData=function(n,t,i){yt(n,t,i)};r.updatepager=function(n){vt(n)};r.formatter=function(n,t,i,r,u){return fi(n,t,i,r,u)};n.extend(i,{populate:function(){w()}});this.grid=i;r.addXmlData=function(n){at(n,r.grid.bDiv)};r.addJSONData=function(n){ut(n,r.grid.bDiv)};w();r.p.hiddengrid=!1;n(window).unload(function(){n(this).empty();this.grid=null;this.p=null})}})};n.fn.extend({getGridParam:function(n){var t=this[0];if(t.grid)return n?t.p[n]?t.p[n]:null:t.p},setGridParam:function(t){return this.each(function(){this.grid&&typeof t=="object"&&n.extend(!0,this.p,t)})},getDataIDs:function(){var i=[],n=0,t;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)i[n]=this.rows[n].id,n++}),i},setSelection:function(t,i,r){return this.each(function(){function l(t,i){var o=n(u.grid.bDiv)[0].clientHeight,r=n(u.grid.bDiv)[0].scrollTop,f=u.rows[t].offsetTop+u.rows[t].clientHeight,e=u.rows[t].offsetTop;i=="d"&&f>=o&&(n(u.grid.bDiv)[0].scrollTop=r+f-e);i=="u"&&e<r&&(n(u.grid.bDiv)[0].scrollTop=r-f+e)}var u=this,e,f,c,o,s,h;if(i=i===!1?!1:!0,f=t===!1?r:n(u.rows.namedItem(t)),t=n(f).attr("id"),f.html())if(u.p.selrow&&u.p.scrollrows===!0&&(c=u.rows.namedItem(u.p.selrow).rowIndex,o=u.rows.namedItem(t).rowIndex,o>=0&&(o>c?l(o,"d"):l(o,"u"))),u.p.multiselect)if(u.p.selrow=t,s=n.inArray(u.p.selrow,u.p.selarrrow),s===-1){if(n(f).attr("class")!=="subgrid"&&n(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,n("#jqg_"+u.p.selrow.replace(".","\\."),u.rows).attr("checked",e),u.p.selarrrow.push(u.p.selrow),u.p.onSelectRow&&i)u.p.onSelectRow(u.p.selrow,e)}else{if(n(f).attr("class")!=="subgrid"&&n(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,n("#jqg_"+u.p.selrow.replace(".","\\."),u.rows).attr("checked",e),u.p.selarrrow.splice(s,1),u.p.onSelectRow&&i)u.p.onSelectRow(u.p.selrow,e);h=u.p.selarrrow[0];u.p.selrow=h=="undefined"?null:h}else if(n(f).attr("class")!=="subgrid"){if(u.p.selrow&&n("tr#"+u.p.selrow.replace(".","\\."),u.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false"),u.p.selrow=t,n(f).addClass("ui-state-highlight").attr("aria-selected","true"),u.p.onSelectRow&&i)u.p.onSelectRow(u.p.selrow,!0);u.p.rownumbers!=null&&u.p.rownumbers&&u.p.radiobutton&&n(n(n(n(f).children()).get(0)).children().get(0)).attr("checked",!0)}})},resetSelection:function(){return this.each(function(){var t=this,i;t.p.multiselect?(n(t.p.selarrrow).each(function(r,u){i=t.rows.namedItem(u);n(i).removeClass("ui-state-highlight");n("#jqg_"+u.replace(".","\\."),i).attr("checked",!1)}),n("#cb_jqg",t.grid.hDiv).attr("checked",!1),t.p.selarrrow=[]):t.p.selrow&&(n("tr#"+t.p.selrow.replace(".","\\."),t.grid.bDiv).removeClass("ui-state-highlight"),t.p.selrow=null);t.p.savedRow=[]})},getRowData:function(t){var i={};return this.each(function(){var u=this,r,f;if(f=u.rows.namedItem(t),!f)return i;n("td",f).each(function(t){r=u.p.colModel[t].name;r!=="cb"&&r!=="subgrid"&&(i[r]=u.p.treeGrid===!0&&r==u.p.ExpandColumn?n.jgrid.htmlDecode(n("span:first",this).html()):n.jgrid.htmlDecode(n(this).html()))})}),i},delRowData:function(t){var i=!1,r,u,f;return this.each(function(){var e=this,o;if(r=e.rows.namedItem(t),r)f=r.rowIndex,n(r).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0),i=!0,t==e.p.selrow&&(e.p.selrow=null),u=n.inArray(t,e.p.selarrrow),u!=-1&&e.p.selarrrow.splice(u,1);else return!1;f==0&&i&&e.updateColumns();e.p.altRows===!0&&i&&(o=e.p.altclass,n(e.rows).each(function(t){t%2==1?n(this).addClass(o):n(this).removeClass(o)}))}),i},setRowData:function(t,i){var r,u=!1;return this.each(function(){var f=this,e,o;if(!f.grid||(o=f.rows.namedItem(t),!o))return!1;i&&n(this.p.colModel).each(function(s){r=this.name;i[r]!=undefined&&(e=f.formatter(t,i[r],s,i,"edit"),f.p.treeGrid===!0&&r==f.p.ExpandColumn?n("td:eq("+s+") > span:first",o).html(e).attr("title",n.jgrid.stripHtml(e)):n("td:eq("+s+")",o).html(e).attr("title",n.jgrid.stripHtml(e)),u=!0)})}),u},addRowData:function(t,i,r,u){r||(r="last");var a=!1,v,f,l=0,y=0,o=0,e,s,c,h="";return i&&this.each(function(){var p=this,w;for(t=typeof t!="undefined"?t+"":p.p.records+1,f='<tr id="'+t+'" role="row" class="ui-widget-content jqgrow">',p.p.rownumbers===!0&&(h=p.formatCol(o,1),f+='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+h+">0<\/td>",o=1),p.p.multiselect&&(c='<input type="checkbox" id="jqg_'+t+'" class="cbox"/>',h=p.formatCol(o,1),f+='<td role="gridcell" '+h+">"+c+"<\/td>",l=1),p.p.subGrid===!0&&(f+=n(p).addSubGridCell(l+o,1),y=1),s=l+y+o;s<this.p.colModel.length;s++)v=this.p.colModel[s].name,c=p.formatter(t,i[v],s,i,"add"),h=p.formatCol(s,1),f+='<td role="gridcell" '+h+' title="'+n.jgrid.stripHtml(c)+'">'+c+"<\/td>";if(f+="<\/tr>",p.p.subGrid===!0&&(f=n(f)[0],n(p).addSubGrid(f,l+o)),p.rows.length===0)n("table:first",p.grid.bDiv).append(f);else switch(r){case"last":n(p.rows[p.rows.length-1]).after(f);break;case"first":n(p.rows[0]).before(f);break;case"after":e=p.rows.namedItem(u);e!=null?n(p.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(p.rows[e.rowIndex+1]).after(f):n(e).after(f):"";break;case"before":e=p.rows.namedItem(u);e!=null?n(e).before(f):""}p.p.records++;p.p.reccount++;(r==="first"||r==="before"&&e===0||p.rows.length===1)&&p.updateColumns();p.p.altRows===!0&&(w=p.p.altclass,r=="last"?p.rows.length%2==1&&n(p.rows[p.rows.length-1]).addClass(w):n(p.rows).each(function(t){t%2==1?n(this).addClass(w):n(this).removeClass(w)}));try{p.p.afterInsertRow(t,i)}catch(b){}p.updatepager(!0);a=!0}),a},footerData:function(t,i,r){function o(n){for(var t in n)return!1;return!0}var u,f=!1,e={};return typeof t=="undefined"&&(t="get"),typeof r!="boolean"&&(r=!0),t=t.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||t=="set"&&o(i))return!1;f=!0;n(this.p.colModel).each(function(o){u=this.name;t=="set"?i[u]!=undefined&&(h=r?s.formatter("",i[u],o,i,"edit"):i[u],n("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr("title",n.jgrid.stripHtml(h)),f=!0):t=="get"&&(e[u]=n("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),t=="get"?e:f},ShowHideCol:function(t,i){return this.each(function(){var r=this,f=!1,u;r.grid&&(typeof t=="string"&&(t=[t]),i=i!="none"?"":"none",u=i==""?!0:!1,n(this.p.colModel).each(function(e){n.inArray(this.name,t)!==-1&&this.hidden===u&&(n("tr",r.grid.hDiv).each(function(){n("th:eq("+e+")",this).css("display",i)}),n(r.rows).each(function(t){n("td:eq("+e+")",r.rows[t]).css("display",i)}),r.p.footerrow&&n("td:eq("+e+")",r.grid.sDiv).css("display",i),i=="none"?r.p.tblwidth-=this.width:r.p.tblwidth+=this.width,this.hidden=!u,f=!0)}),f===!0&&(n("table:first",r.grid.hDiv).width(r.p.tblwidth),n("table:first",r.grid.bDiv).width(r.p.tblwidth),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&(n("table:first",r.grid.sDiv).width(r.p.tblwidth),r.grid.sDiv.scrollLeft=r.grid.bDiv.scrollLeft)))})},hideCol:function(t){return this.each(function(){n(this).ShowHideCol(t,"none")})},showCol:function(t){return this.each(function(){n(this).ShowHideCol(t,"")})},setGridWidth:function(t,i){return this.each(function(){var r=this,u,s=0,f=r.p.cellLayout,e,o=0,k,d=!1,v=r.p.scrollOffset,y,h=0,a=0,p=r.p.multiselectWidth,w=r.p.subGridWidth,b=r.p.rownumWidth,c=r.p.cellLayout,l,g;r.grid&&((typeof i!="boolean"&&(i=r.p.shrinkToFit),isNaN(t))||t!=r.grid.width&&(r.grid.width=r.p.width=t,n("#gbox_"+r.p.id).css("width",t+"px"),n("#gview_"+r.p.id).css("width",t+"px"),n(r.grid.bDiv).css("width",t+"px"),n(r.grid.hDiv).css("width",t+"px"),r.p.pager&&n(r.p.pager).css("width",t+"px"),r.p.toolbar[0]===!0&&(n(r.grid.uDiv).css("width",t+"px"),r.p.toolbar[1]=="both"&&n(r.grid.ubDiv).css("width",t+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t+"px"),i===!1&&r.p.forceFit==!0&&(r.p.forceFit=!1),i===!0&&(n.each(r.p.colModel,function(){this.hidden===!1&&(s+=parseInt(this.width,10),o++)}),k=n.browser.safari&&parseFloat(n.browser.version)<536.5?!0:!1,k&&(f=0,p+=c,w+=c,b+=c),r.p.multiselect&&(a=p,h=p+f,o--),r.p.subGrid&&(a+=w,h+=w+f,o--),r.p.rownumbers&&(a+=b,h+=b+f,o--),r.p.tblwidth=s,y=t-f*o-h,isNaN(r.p.height)||n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight&&(d=!0,y-=v),s=0,c=r.grid.cols.length>0,n.each(r.p.colModel,function(n){var t=this.name;this.hidden===!1&&t!=="cb"&&t!=="subgrid"&&t!=="rn"&&(u=Math.floor(y/(r.p.tblwidth-a)*this.width),this.width=u,s+=u,r.grid.headers[n].width=u,r.grid.headers[n].el.style.width=u+"px",r.p.footerrow&&(r.grid.footers[n].style.width=u+"px"),c&&(r.grid.cols[n].style.width=u+"px"),e=n)}),l=0,d&&t-h-(s+f*o)!==v?l=t-h-(s+f*o)-v:Math.abs(t-h-(s+f*o))!==1&&(l=t-h-(s+f*o)),r.p.colModel[e].width+=l,u=r.p.colModel[e].width,r.p.tblwidth=s+l+f*o+h,r.p.tblwidth>t?(g=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[e].width=r.p.colModel[e].width-g):u=r.p.colModel[e].width,r.grid.headers[e].width=u,r.grid.headers[e].el.style.width=u+"px",c>0&&(r.grid.cols[e].style.width=u+"px"),n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px"),n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px"),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&(r.grid.footers[e].style.width=u+"px",n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px")))))})},setGridHeight:function(t){return this.each(function(){var i=this;i.grid&&(n(i.grid.bDiv).css({height:t+(isNaN(t)?"":"px")}),i.p.height=t)})},setCaption:function(t){return this.each(function(){this.p.caption=t;n("span.ui-jqgrid-title",this.grid.cDiv).html(t);n(this.grid.cDiv).show()})},getLabel:function(t){var i="";return this.each(function(){var u=this,r=-1,f;u.grid&&(isNaN(t)?n(u.p.colModel).each(function(n){if(this.name==t)return r=n,!1}):r=parseInt(t,10),r>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+r+")",u.grid.hDiv),i=n("div",f).text()))}),i},setLabel:function(t,i,r,u){return this.each(function(){var o=this,e=-1,f;o.grid&&(isNaN(t)?n(o.p.colModel).each(function(n){if(this.name==t)return e=n,!1}):e=parseInt(t,10),e>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+e+")",o.grid.hDiv),i&&n("div",f).html(i),r&&(typeof r=="string"?n(f).addClass(r):n(f).css(r)),typeof u=="object"&&n(f).attr(u)))})},setCell:function(t,i,r,u,f){return this.each(function(){var s=this,e=-1,c,h,o;s.grid&&(isNaN(i)?n(s.p.colModel).each(function(n){if(this.name==i)return e=n,!1}):e=parseInt(i,10),e>=0&&(h=s.rows.namedItem(t),h&&(o=n("td:eq("+e+")",h),r!==""&&(c=s.formatter(t,r,e,h,"edit"),n(o).html(c).attr("title",n.jgrid.stripHtml(c))),u&&(typeof u=="string"?n(o).addClass(u):n(o).css(u)),typeof f=="object"&&n(o).attr(f))))})},getCell:function(t,i){var r=!1;return this.each(function(){var f=this,u=-1,e;f.grid&&(isNaN(i)?n(f.p.colModel).each(function(n){if(this.name===i)return u=n,!1}):u=parseInt(i,10),u>=0&&(e=f.rows.namedItem(t),e&&(r=n.jgrid.htmlDecode(n("td:eq("+u+")",e).html()))))}),r},getCol:function(t){var i=[];return this.each(function(){var u=this,f=-1,e,r;if(u.grid&&(isNaN(t)?n(u.p.colModel).each(function(n){if(this.name===t)return f=n,!1}):f=parseInt(t,10),f>=0&&(e=u.rows.length,r=0,e&&e>0)))while(r<e)i[r]=u.rows[r].cells[f].innerHTML,r++}),i},clearGridData:function(){return this.each(function(){var t=this;t.grid&&(n("tbody:first tr",t.grid.bDiv).remove(),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page="0",t.p.lastpage="0",t.p.reccount=0,t.updatepager(!0))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=this.rows.namedItem(n);i&&(r=t===!0?i:i.rowIndex)}),r}})})(jQuery);
/*
//# sourceMappingURL=grid.base.min.js.map
*/