(function(n){n.fn.extend({jqGridImport:function(t){return t=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"}},t||{}),this.each(function(){var r=this,u=function(t,i){var s=n(i.xmlGrid.config,t)[0],h=n(i.xmlGrid.data,t)[0],u,e,f,o;if(xmlJsonClass.xml2json&&n.parse){u=xmlJsonClass.xml2json(s," ");u=n.jgrid.parse(u);for(e in u)f=u[e];h?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(r).jqGrid(f).setGridParam({datatype:o})):n(r).jqGrid(f);u=null;f=null}else alert("xml2json or parse are not present")},f=function(t,i){var o;if(t&&typeof t=="string"){var f=n.jgrid.parse(t),u=f[i.jsonGrid.config],e=f[i.jsonGrid.data];e?(o=u.datatype,u.datatype="jsonstring",u.datastr=e,n(r).jqGrid(u).setGridParam({datatype:o})):n(r).jqGrid(u)}},i;switch(t.imptype){case"xml":n.ajax({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(i,r){r=="success"&&(u(i.responseXML,t),n.isFunction(t.importComplete)&&t.importComplete(i));i=null}});break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(i=n.jgrid.stringToDoc(t.impstring),i&&(u(i,t),n.isFunction(t.importComplete)&&t.importComplete(i),t.impstring=null),i=null);break;case"json":n.ajax({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(i,r){r=="success"&&(f(i.responseText,t),n.isFunction(t.importComplete)&&t.importComplete(i));i=null}});break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),n.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each(function(){var r,u;if(this.grid){if(r=n(this).getGridParam(),r.rownumbers&&(r.colNames.splice(0),r.colModel.splice(0)),r.multiselect&&(r.colNames.splice(0),r.colModel.splice(0)),r.subgrid&&(r.colNames.splice(0),r.colModel.splice(0)),r.treeGrid)for(u in r.treeReader)r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1);switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"<\/"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(r,t.root,t.ident)+"}"}}}),i}})})(jQuery);
/*
//# sourceMappingURL=grid.import.min.js.map
*/