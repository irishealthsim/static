(function(n){n.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,nodeComparator:function(n,t){var i=n.text(),r=t.text();return i==r?0:i<r?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=n('<div class="ui-multiselect ui-helper-clearfix ui-widget"><\/div>').insertAfter(this.element);this.count=0;this.availableContainer=n('<div class="available"><\/div>').appendTo(this.container);this.selectedContainer=n('<div class="selected"><\/div>').appendTo(this.container);this.selectedActions=n('<div class="actions  ui-helper-clearfix"><span class="count">0 '+n.ui.multiselect.locale.itemsCount+'<\/span><a href="#" class="remove-all">'+n.ui.multiselect.locale.removeAll+"<\/a><\/div>").appendTo(this.selectedContainer);this.availableActions=n('<div class="actions  ui-helper-clearfix"><input autocomplete="off" type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+n.ui.multiselect.locale.addAll+"<\/a><\/div>").appendTo(this.availableContainer);this.selectedList=n('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"><\/li><\/ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=n('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"><\/li><\/ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var t=this;this.container.width(this.element.width()+1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(){t.selectedList.find("li").each(function(){n(this).data("optionLink")&&n(this).data("optionLink").remove().appendTo(t.element)})},receive:function(i,r){r.item.data("optionLink").attr("selected",!0);t.count+=1;t._updateCount();t.selectedList.children(".ui-draggable").each(function(){n(this).removeClass("ui-draggable");n(this).data("optionLink",r.item.data("optionLink"));n(this).data("idx",r.item.data("idx"));t._applyItemState(n(this),!0)});setTimeout(function(){r.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):n(".search").hide();this.container.find(".remove-all").click(function(){return t._populateLists(t.element.find("option").removeAttr("selected")),!1});this.container.find(".add-all").click(function(){var i=t.element.find("option").not(":selected");return t.availableList.children("li:hidden").length>1?t.availableList.children("li").each(function(t){n(this).is(":visible")&&n(i[t-1]).attr("selected","selected")}):i.attr("selected","selected"),t._populateLists(t.element.find("option")),!1})},destroy:function(){this.element.show();this.container.remove();n.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(t){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var i=this,r=n(t.map(function(n){var t=i._getOptionNode(this).appendTo(this.selected?i.selectedList:i.availableList).show();return this.selected&&(i.count+=1),i._applyItemState(t,this.selected),t.data("idx",n),t[0]}));this._updateCount();i._filter.apply(this.availableContainer.find("input.search"),[i.availableList])},_updateCount:function(){this.selectedContainer.find("span.count").text(this.count+" "+n.ui.multiselect.locale.itemsCount)},_getOptionNode:function(t){t=n(t);var i=n('<li class="ui-state-default ui-element ui-corner-all" title="'+t.text()+'"><span class="ui-icon"/>'+t.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/><\/a><\/li>').hide();return i.data("optionLink",t),i},_cloneWithData:function(n){var t=n.clone(!1,!1);return t.data("optionLink",n.data("optionLink")),t.data("idx",n.data("idx")),t},_setSelected:function(t,i){var e,u;if(t.data("optionLink").attr("selected",i),i)return e=this._cloneWithData(t),t[this.options.hide](this.options.animated,function(){n(this).remove()}),e.appendTo(this.selectedList).hide()[this.options.show](this.options.animated),this._applyItemState(e,!0),e;var f=this.availableList.find("li"),h=this.options.nodeComparator,o=null,r=t.data("idx"),s=h(t,n(f[r]));if(s){while(r>=0&&r<f.length)if(s>0?r++:r--,s!=h(t,n(f[r]))){o=f[s>0?r:r+1];break}}else o=f[r];return u=this._cloneWithData(t),o?u.insertBefore(n(o)):u.appendTo(this.availableList),t[this.options.hide](this.options.animated,function(){n(this).remove()}),u.hide()[this.options.show](this.options.animated),this._applyItemState(u,!1),u},_applyItemState:function(n,t){t?(this.options.sortable?n.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):n.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),n.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(n.find("a.action"))):(n.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),n.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(n.find("a.action")));this._registerDoubleClickEvents(n);this._registerHoverEvents(n)},_filter:function(t){var f=n(this),i=t.children("li"),e=i.map(function(){return n(this).text().toLowerCase()}),r=n.trim(f.val().toLowerCase()),u=[];r?(i.hide(),e.each(function(n){this.indexOf(r)>-1&&u.push(n)}),n.each(u,function(){n(i[this]).show()})):i.show()},_registerDoubleClickEvents:function(n){this.options.doubleClickable&&n.dblclick(function(){n.find("a.action").click()})},_registerHoverEvents:function(t){t.removeClass("ui-state-hover");t.mouseover(function(){n(this).addClass("ui-state-hover")});t.mouseout(function(){n(this).removeClass("ui-state-hover")})},_registerAddEvents:function(t){var i=this;t.click(function(){var t=i._setSelected(n(this).parent(),!0);return i.count+=1,i._updateCount(),!1});this.options.sortable&&t.each(function(){n(this).parent().draggable({connectToSortable:i.selectedList,helper:function(){var t=i._cloneWithData(n(this)).width(n(this).width()-50);return t.width(n(this).width()),t},appendTo:i.container,containment:i.container,revert:"invalid"})})},_registerRemoveEvents:function(t){var i=this;t.click(function(){return i._setSelected(n(this).parent(),!1),i.count-=1,i._updateCount(),!1})},_registerSearchEvents:function(t){var i=this;t.focus(function(){n(this).addClass("ui-state-active")}).blur(function(){n(this).removeClass("ui-state-active")}).keypress(function(n){if(n.keyCode==13)return!1}).keyup(function(){i._filter.apply(this,[i.availableList])})}});n.extend(n.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
/*
//# sourceMappingURL=ui.multiselect.min.js.map
*/