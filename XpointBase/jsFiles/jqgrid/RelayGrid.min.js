var xpointGridWidth = { formatters: { Custom_Portfolio: { 1600: function (t) { return { width: 1500, height: 100 } }, 1680: function (t) { return { width: 1500, height: 100 } }, 2736: function (t) { return { width: 2600, height: 100 } }, 1024: function (t) { return { width: 990, height: 100 } }, 1152: function (t) { return { width: 1118, height: 100 } }, 1280: function (t) { return { width: 1220, height: 100 } }, 1366: function (t) { return { width: 1287, height: 100 } }, 1360: function (t) { return { width: 1287, height: 100 } }, 800: function (t) { return { width: 750, height: 100 } }, 1400: function (t) { return { width: 1330, height: 100 } }, 1440: function (t) { return { width: 1360, height: 100 } } }, Default: { 1920: function (t) { return { width: 1880, height: 100 } }, 1600: function (t) { return { width: 1300, height: 100 } }, 1680: function (t) { return { width: 1400, height: 100 } }, 2736: function (t) { return { width: 2600, height: 100 } }, 2736: function (t) { return { width: 2320, height: 100 } }, 1536: function (t) { return { width: 1320, height: 100 } }, 1024: function (t) { return { width: 990, height: 100 } }, 1152: function (t) { return { width: 1118, height: 100 } }, 1280: function (t) { return { width: 1220, height: 100 } }, 1360: function (t) { return { width: 1290, height: 100 } }, 1366: function (t) { return { width: 1290, height: 100 } }, 800: function (t) { return { width: 750, height: 100 } }, 1400: function (t) { return { width: 1330, height: 100 } }, 1440: function (t) { return { width: 1360, height: 100 } }, 768: function (t) { if (t && t[1024]) { var e = t[1024](t); return { width: e.width + -28, height: e.height } } return { width: 959, height: 100 } } }, Width_350_400: { 1920: function (t) { return { width: 600, height: 100 } }, 1600: function (t) { return { width: 525, height: 100 } }, 1680: function (t) { return { width: 580, height: 100 } }, 2736: function (t) { return { width: 954, height: 100 } }, 1024: function (t) { return { width: 335, height: 100 } }, 1280: function (t) { return { width: 440, height: 100 } }, 1366: function (t) { return { width: 360, height: 100 } }, 1360: function (t) { return { width: 360, height: 100 } }, 1440: function (t) { return { width: 440, height: 100 } }, 1400: function (t) { return { width: 440, height: 100 } }, 2160: function (t) { return { width: 450, height: 100 } }, 800: function (t) { return { width: 270, height: 100 } }, 768: function (t) { return { width: 250, height: 100 } } }, Width_490_625: { 1920: function (t) { return { width: 950, height: 100 } }, 1600: function (t) { return { width: 655, height: 100 } }, 1680: function (t) { return { width: 700, height: 100 } }, 1024: function (t) { return { width: 903, height: 100 } }, 1280: function (t) { return { width: 625, height: 100 } }, 1360: function (t) { return { width: 650, height: 100 } }, 1366: function (t) { return { width: 650, height: 100 } }, 1400: function (t) { return { width: 700, height: 100 } }, 1440: function (t) { return { width: 710, height: 100 } } }, Width_960_1205: { 3840: function (t) { return { width: 500, height: 100 } }, 1920: function (t) { return { width: 1880, height: 100 } }, 1600: function (t) { return { width: 1320, height: 100 } }, 1680: function (t) { return { width: 1380, height: 100 } }, 1024: function (t) { return { width: 902, height: 100 } }, 1280: function (t) { return { width: 1100, height: 100 } }, 1152: function (t) { return { width: 980, height: 100 } }, 1360: function (t) { return { width: 1220, height: 100 } }, 1366: function (t) { return { width: 1220, height: 100 } }, 1400: function (t) { return { width: 1330, height: 100 } }, 1440: function (t) { return { width: 1360, height: 100 } }, 768: function (t) { return { width: 680, height: 100 } }, 2560: function (t) { return { width: 2300, height: 100 } }, 1536: function (t) { return { width: 1320, height: 100 } }, 2048: function (t) { return { width: 1860, height: 100 } }, 1920: function (t) { return { width: 1680, height: 100 } }, 1768: function (t) { return { width: 1600, height: 100 } }, 1680: function (t) { return { width: 1520, height: 100 } } }, Width_960_1205_1300: { 1920: function (t) { return { width: 1880, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } }, 1024: function (t) { return { width: 959, height: 100 } }, 1280: function (t) { return { width: 1236, height: 100 } }, 1400: function (t) { return { width: 1330, height: 100 } }, 1440: function (t) { return { width: 1360, height: 100 } }, 1360: function (t) { return { width: 1300, height: 100 } }, 1366: function (t) { return { width: 1300, height: 100 } } }, Width_228_290_320: { 1920: function (t) { return { width: 550, height: 100 } }, 1600: function (t) { return { width: 450, height: 100 } }, 1680: function (t) { return { width: 450, height: 100 } }, 1024: function (t) { return { width: 228, height: 100 } }, 1280: function (t) { return { width: 290, height: 100 } }, 1366: function (t) { return { width: 320, height: 100 } }, 1360: function (t) { return { width: 320, height: 100 } }, 1400: function (t) { return { width: 360, height: 100 } }, 1440: function (t) { return { width: 360, height: 100 } } }, Width_270_339_367: { 1024: function (t) { return { width: 270, height: 100 } }, 1280: function (t) { return { width: 339, height: 100 } }, 1366: function (t) { return { width: 367, height: 100 } }, 1360: function (t) { return { width: 367, height: 100 } }, 1600: function (t) { return { width: 450, height: 100 } }, 1680: function (t) { return { width: 450, height: 100 } }, 1400: function (t) { return { width: 410, height: 100 } }, 1440: function (t) { return { width: 410, height: 100 } } }, Width_200_200_320: { 1920: function (t) { return { width: 500, height: 100 } }, 1024: function (t) { return { width: 200, height: 100 } }, 1280: function (t) { return { width: 200, height: 100 } }, 1600: function (t) { return { width: 450, height: 100 } }, 1680: function (t) { return { width: 450, height: 100 } }, 1366: function (t) { return { width: 320, height: 100 } }, 1360: function (t) { return { width: 320, height: 100 } }, 1400: function (t) { return { width: 380, height: 100 } }, 1440: function (t) { return { width: 380, height: 100 } } }, Width_310_340: { 1024: function (t) { return { width: 310, height: 100 } }, 1280: function (t) { return { width: 340, height: 100 } }, 1600: function (t) { return { width: 450, height: 100 } }, 1680: function (t) { return { width: 450, height: 100 } }, 1360: function (t) { return { width: 380, height: 100 } }, 1366: function (t) { return { width: 380, height: 100 } }, 1400: function (t) { return { width: 380, height: 100 } }, 1440: function (t) { return { width: 380, height: 100 } } }, Width_550_550: { 1920: function (t) { return { width: 1100, height: 100 } }, 1024: function (t) { return { width: 550, height: 100 } }, 1280: function (t) { return { width: 550, height: 100 } }, 1600: function (t) { return { width: 750, height: 100 } }, 1680: function (t) { return { width: 750, height: 100 } }, 1366: function (t) { return { width: 600, height: 100 } }, 1360: function (t) { return { width: 600, height: 100 } }, 1400: function (t) { return { width: 650, height: 100 } }, 1440: function (t) { return { width: 650, height: 100 } } }, Width_486_620: { 1920: function (t) { return { width: 1e3, height: 100 } }, 1024: function (t) { return { width: 499, height: 100 } }, 1280: function (t) { return { width: 632, height: 100 } }, 1600: function (t) { return { width: 850, height: 100 } }, 1680: function (t) { return { width: 850, height: 100 } }, 1366: function (t) { return { width: 678, height: 100 } }, 1360: function (t) { return { width: 678, height: 100 } }, 1440: function (t) { return { width: 720, height: 100 } }, 768: function (t) { return { width: 483, height: 100 } } }, Width_556_699: { 1920: function (t) { return { width: 1100, height: 100 } }, 1600: function (t) { return { width: 900, height: 100 } }, 1680: function (t) { return { width: 900, height: 100 } }, 2736: function (t) { return { width: 1568, height: 100 } }, 1152: function (t) { return { width: 600, height: 100 } }, 1366: function (t) { return { width: 748, height: 100 } }, 1360: function (t) { return { width: 748, height: 100 } }, 1024: function (t) { return { width: 555, height: 100 } }, 1280: function (t) { return { width: 699, height: 100 } }, 1400: function (t) { return { width: 800, height: 100 } }, 1440: function (t) { return { width: 800, height: 100 } }, 3840: function (t) { return { width: 500, height: 100 } }, 2560: function (t) { return { width: 2300, height: 100 } }, 1536: function (t) { return { width: 1320, height: 100 } }, 2048: function (t) { return { width: 1860, height: 100 } }, 1920: function (t) { return { width: 1680, height: 100 } }, 1768: function (t) { return { width: 1600, height: 100 } }, 1680: function (t) { return { width: 1520, height: 100 } }, 800: function (t) { return { width: 450, height: 100 } }, 768: function (t) { if (t && t[1024]) { var e = t[1024](t); return { width: e.width + -14, height: e.height } } return { width: 552, height: 698 } } }, Width_1366_1024_1440_2048_1280: { 1920: function (t) { return { width: 1200, height: 100 } }, 1600: function (t) { return { width: 900, height: 100 } }, 1680: function (t) { return { width: 900, height: 100 } }, 2736: function (t) { return { width: 1568, height: 100 } }, 1366: function (t) { return { width: 748, height: 100 } }, 1360: function (t) { return { width: 748, height: 100 } }, 1024: function (t) { return { width: 570, height: 100 } }, 1400: function (t) { return { width: 820, height: 100 } }, 1440: function (t) { return { width: 825, height: 100 } }, 2048: function (t) { return { width: 1170, height: 100 } }, 2560: function (t) { return { width: 825, height: 100 } }, 1280: function (t) { return { width: 699, height: 100 } }, 800: function (t) { return { width: 450, height: 100 } }, 768: function (t) { if (t && t[1024]) { var e = t[1024](t); return { width: e.width + -14, height: e.height } } return { width: 552, height: 698 } } }, Width_550_650: { 1920: function (t) { return { width: 1100, height: 100 } }, 1024: function (t) { return { width: 550, height: 100 } }, 1280: function (t) { return { width: 650, height: 100 } }, 1600: function (t) { return { width: 850, height: 100 } }, 1680: function (t) { return { width: 850, height: 100 } }, 1366: function (t) { return { width: 700, height: 100 } }, 1360: function (t) { return { width: 700, height: 100 } }, 1400: function (t) { return { width: 750, height: 100 } }, 1440: function (t) { return { width: 760, height: 100 } } }, Width_600_800: { 1920: function (t) { return { width: 1200, height: 100 } }, 1024: function (t) { return { width: 600, height: 100 } }, 1280: function (t) { return { width: 800, height: 100 } }, 1600: function (t) { return { width: 1e3, height: 100 } }, 1680: function (t) { return { width: 1e3, height: 100 } }, 1366: function (t) { return { width: 848, height: 100 } }, 1360: function (t) { return { width: 848, height: 100 } }, 1400: function (t) { return { width: 950, height: 100 } }, 3840: function (t) { return { width: 450, height: 100 } }, 2560: function (t) { return { width: 1550, height: 100 } }, 2048: function (t) { return { width: 1300, height: 100 } }, 1920: function (t) { return { width: 1200, height: 100 } }, 1152: function (t) { return { width: 800, height: 100 } }, 1176: function (t) { return { width: 700, height: 100 } }, 1768: function (t) { return { width: 1200, height: 100 } }, 1440: function (t) { return { width: 950, height: 100 } } }, Width_610_800_900: { 1920: function (t) { return { width: 1250, height: 100 } }, 1024: function (t) { return { width: 610, height: 100 } }, 1280: function (t) { return { width: 800, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } }, 1366: function (t) { return { width: 900, height: 100 } }, 1360: function (t) { return { width: 900, height: 100 } }, 1400: function (t) { return { width: 970, height: 100 } }, 1440: function (t) { return { width: 980, height: 100 } } }, Width_670_800_900: { 1920: function (t) { return { width: 1400, height: 100 } }, 1024: function (t) { return { width: 690, height: 100 } }, 1280: function (t) { return { width: 800, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } }, 1152: function (t) { return { width: 800, height: 100 } }, 1366: function (t) { return { width: 900, height: 100 } }, 1360: function (t) { return { width: 900, height: 100 } }, 1400: function (t) { return { width: 970, height: 100 } }, 1440: function (t) { return { width: 980, height: 100 } }, 2560: function (t) { return { width: 2300, height: 100 } }, 1536: function (t) { return { width: 1320, height: 100 } }, 2048: function (t) { return { width: 1860, height: 100 } }, 1920: function (t) { return { width: 1680, height: 100 } }, 1768: function (t) { return { width: 1600, height: 100 } }, 1680: function (t) { return { width: 1520, height: 100 } } }, Width_835_720: { 1920: function (t) { return { width: 1600, height: 100 } }, 1024: function (t) { return { width: 835, height: 100 } }, 1280: function (t) { return { width: 720, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } }, 1366: function (t) { return { width: 850, height: 100 } }, 1360: function (t) { return { width: 850, height: 100 } }, 1400: function (t) { return { width: 900, height: 100 } }, 1440: function (t) { return { width: 920, height: 100 } } }, Width_835_1050: { 1920: function (t) { return { width: 1680, height: 100 } }, 1024: function (t) { return { width: 835, height: 100 } }, 1280: function (t) { return { width: 1050, height: 100 } }, 1400: function (t) { return { width: 1200, height: 100 } }, 1440: function (t) { return { width: 1200, height: 100 } }, 1600: function (t) { return { width: 1400, height: 100 } }, 1680: function (t) { return { width: 1400, height: 100 } }, 1366: function (t) { return { width: 1050, height: 100 } }, 1360: function (t) { return { width: 1050, height: 100 } } }, Width_835_1120: { 1920: function (t) { return { width: 1680, height: 100 } }, 1024: function (t) { return { width: 835, height: 100 } }, 1280: function (t) { return { width: 1120, height: 100 } }, 1366: function (t) { return { width: 1200, height: 100 } }, 1360: function (t) { return { width: 1200, height: 100 } }, 1400: function (t) { return { width: 1200, height: 100 } }, 1440: function (t) { return { width: 1200, height: 100 } }, 1600: function (t) { return { width: 1400, height: 100 } }, 1680: function (t) { return { width: 1400, height: 100 } } }, Width_540_650_929: { 1920: function (t) { return { width: 1100, height: 100 } }, 1024: function (t) { return { width: 540, height: 100 } }, 1280: function (t) { return { width: 650, height: 100 } }, 1366: function (t) { return { width: 929, height: 100 } }, 1360: function (t) { return { width: 929, height: 100 } }, 1400: function (t) { return { width: 1e3, height: 100 } }, 1440: function (t) { return { width: 1e3, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } } }, Width_690_855_929: { 1920: function (t) { return { width: 1400, height: 100 } }, 1024: function (t) { return { width: 690, height: 100 } }, 1280: function (t) { return { width: 855, height: 100 } }, 1366: function (t) { return { width: 929, height: 100 } }, 1360: function (t) { return { width: 929, height: 100 } }, 1400: function (t) { return { width: 1e3, height: 100 } }, 1440: function (t) { return { width: 1e3, height: 100 } }, 1600: function (t) { return { width: 1100, height: 100 } }, 1680: function (t) { return { width: 1100, height: 100 } } }, Width_700_842_900: { 1920: function (t) { return { width: 1450, height: 100 } }, 1024: function (t) { return { width: 721, height: 100 } }, 1280: function (t) { return { width: 1042, height: 100 } }, 1600: function (t) { return { width: 1200, height: 100 } }, 1680: function (t) { return { width: 1200, height: 100 } }, 1366: function (t) { return { width: 968, height: 100 } }, 1360: function (t) { return { width: 968, height: 100 } }, 1400: function (t) { return { width: 1100, height: 100 } }, 1440: function (t) { return { width: 1100, height: 100 } }, 800: function (t) { return { width: 650, height: 100 } }, 768: function (t) { return { width: 700, height: 100 } } }, Width_493_623_668: { 1920: function (t) { return { width: 1e3, height: 100 } }, 1024: function (t) { return { width: 493, height: 100 } }, 1280: function (t) { return { width: 623, height: 100 } }, 1366: function (t) { return { width: 668, height: 100 } }, 1360: function (t) { return { width: 668, height: 100 } }, 1400: function (t) { return { width: 720, height: 100 } }, 1600: function (t) { return { width: 850, height: 100 } }, 1680: function (t) { return { width: 850, height: 100 } }, 1440: function (t) { return { width: 740, height: 100 } }, 768: function (t) { return { width: 700, height: 100 } } }, Width_980_1420: { 1024: function (t) { return { width: 980, height: 100 } }, 1280: function (t) { return { width: 1220, height: 100 } }, 1152: function (t) { return { width: 1020, height: 100 } }, 1360: function (t) { return { width: 1220, height: 100 } }, 1366: function (t) { return { width: 1220, height: 100 } }, 1400: function (t) { return { width: 1470, height: 100 } }, 1440: function (t) { return { width: 1500, height: 100 } }, 1600: function (t) { return { width: 1530, height: 100 } }, 1680: function (t) { return { width: 3440, height: 100 } }, 1920: function (t) { return { width: 1900, height: 100 } } } } }, popupStatus = 0, $popupControl, isSecondTime = 0, $viewsControl; !function ($) { $.fn.extend({ getRowData: function (t) { var e = {}; return this.each(function () { var i, n, a = this; if (!(n = a.rows.namedItem(t))) return e; $("td", n).each(function (t) { "cb" !== (i = a.p.colModel[t].name) && "subgrid" !== i && (!0 === a.p.treeGrid && i == a.p.ExpandColumn ? e[i] = $.jgrid.htmlDecode($("span:first", this).html()) : e[i] = $.jgrid.htmlDecode($(this).html())) }) }), e }, toolbarButtonCallback: function (postUrl, param) { var $t = this[0]; gpost = new Object, gpost.trackerID = $t.p.mid, gpost.itemID = $t.p.selrow, gpost.param = param, $.ajax({ url: postUrl, type: "POST", dataType: "json", contentType: "application/json; charset=utf-8", data: $.toJSON(gpost), complete: function (data, Status) { if ("success" != Status) alert(Status + " Status: " + data.statusText + " Error code: " + data.status); else { var rtn = $.jgrid.parse(data.responseText); switch (rtn.d.action) { case "reload": $($t).trigger("reloadGrid"); break; case "alert": var alertdialog = $("#relaygridconfirmation"); 0 == alertdialog.length && (alertdialog = $("<div id='relaygridconfirmation' ></div>"), $($t).append(alertdialog)), alertdialog.dialog({ autoOpen: !1, width: 250, height: "auto", modal: !0 }), alertdialog.html(rtn.d.param), alertdialog.dialog("open"); break; case "script": eval(rtn.d.param); break; case "nop": break; case "customalert": var jqalertdialog = $("#relaygridcustomalert"), parameters = eval("(" + rtn.d.param + ")"); 0 == jqalertdialog.length && (jqalertdialog = $("<div class='xp-jqdialog' id='relaygridcustomalert' title='" + parameters.title + "'></div>"), $($t).append(jqalertdialog)), jqalertdialog.dialog({ autoOpen: !1, width: 250, height: "auto", modal: !0 }), jqalertdialog.html(parameters.message), jqalertdialog.dialog("open"); break; case "dialog": var jqdialog = $("#relaygriddialog"), parameters = eval("(" + rtn.d.param + ")"), callbackParameters = new Object; "" != parameters.callbackParams && (callbackParameters = eval("(" + parameters.callbackParams + ")")), jqdialog.length > 0 && (jqdialog.children().remove(), jqdialog.remove()), jqdialog = $("<div id='relaygriddialog' title='" + parameters.title + "'></div>"); var html = ""; html += "<div>" + parameters.message + "</div>", jqdialog.append(html), $($t).append(jqdialog); var dialogButtons = {}; dialogButtons[parameters.btnlabel] = function () { $($t).toolbarButtonCallback(parameters.callbackUrl, callbackParameters), $(this).dialog("close") }, dialogButtons.Cancel = function () { $(this).dialog("close") }, jqdialog.dialog({ autoOpen: !1, width: 400, modal: !0, buttons: dialogButtons }), jqdialog.dialog("open"); break; case "inputdialog": var jqinputdialog = $("#relaygridinputdialog"), parameters = eval("(" + rtn.d.param + ")"), callbackParameters = new Object; if ("" != parameters.callbackParams && (callbackParameters = eval("(" + parameters.callbackParams + ")")), 0 == jqinputdialog.length) { jqinputdialog = $("<div id='relaygridinputdialog' title='" + parameters.title + "'></div>"); var html = ""; html += "<div>" + parameters.message + "</div>", html += "<div>" + parameters.label + "    <input autocomplete='off' type='text' id='inputtext'/></div>", jqinputdialog.append(html), $($t).append(jqdialog); var dialogButtons = {}; dialogButtons[parameters.btnlabel] = function () { callbackParameters.inputval = $("#inputtext").val(), $($t).toolbarButtonCallback(parameters.callbackUrl, callbackParameters), $(this).dialog("close") }, dialogButtons.Cancel = function () { $(this).dialog("close") } } jqinputdialog.dialog({ autoOpen: !1, width: 400, modal: !0, buttons: dialogButtons }), $("#inputtext").val(""), jqinputdialog.dialog("open") } } } }) }, LinkCallBack: function (t, e, i, n) { var a = $(".loading").text(); $(".loading").text(i ? "Linking life-cycles..." : "Unlinking life-cycles...."), $(".loading").show(), gpost = new Object, gpost.trackerID = t, gpost.itemID = e, gpost.link = i; var o = $(this).attr("id").replace("gbox_", ""); gpost.targetLinkID = $("#" + o)[0].p.targetLinkID, $(this).find(":checkbox").attr("disabled", !0), $.ajax({ url: n, type: "POST", dataType: "json", contentType: "application/json; charset=utf-8", data: $.toJSON(gpost), success: function (t, e) { var i = t.d; if ("success" != i) { $(".loading").hide(), $(".loading").text(a); var n = $("#" + o).find(":checkbox").removeAttr("disabled"); return n.is(":checked") ? n.attr("checked", !1) : n.attr("checked", !0), alert(i), !1 } $(".ganttenabled").each(function () { $(this).ResetGantt(gpost.targetLinkID) }), $(".loading").hide(), $(".loading").text(a), $("#" + o).find(":checkbox").removeAttr("disabled") } }) }, getColumnData: function (t, e) { var i = ""; return this.each(function () { var n, a, o = this; if (!(a = o.rows.namedItem(t))) return i; $("td", a).each(function (a) { (n = o.p.colModel[a].name) == e && (i = o.p.colModel[a].formatter && "peoplepicker" == o.p.colModel[a].formatter ? $.data(document.body, n + t + "peoplepickerdata") : $.jgrid.htmlDecode($(this).html())) }) }), i }, getCustomColumnData: function (t, e, i) { var n = ""; return this.each(function () { var a, o = this; if (!(a = o.rows.namedItem(t))) return n; $("td", a).each(function (t) { if (o.p.colModel[t].name == e) switch (i) { case "dropdown": n = $("select>option:selected", this).val() } }) }), n }, hidePanel: function () { null != this && this.fadeOut("fast") }, showPanel: function () { null != this && this.fadeIn("fast") }, getGridData: function () { var t = $(this); return gridData = new Array, $.isFunction(t.getDataIDs) && (dataids = t.getDataIDs(), $.each(dataids, function (e) { gridData[this] = t.getRowData(this) })), gridData }, toggleEmailPanel: function (t, e) { var i, n, a, o; if (null != $popupControl) if (0 == popupStatus) { var r = this.getColumnData(t, e); "" != r ? ($popupControl.clearPopupFields(), $popupControl.updatePopupControl(e, r), i = document.documentElement.clientWidth, n = document.documentElement.clientHeight, a = $popupControl.height(), o = $popupControl.width(), $popupControl.css({ position: "absolute", top: n / 2 - a / 2, left: i / 2 - o / 2 }), $(".backgroundPopup").css({ height: n }), 0 == popupStatus && ($(".backgroundPopup").css({ opacity: "0.7" }), $(".backgroundPopup").showPanel(), $popupControl.showPanel(), popupStatus = 1)) : alert("You cannot send mail without selecting Idea"), popupStatus = 1 } else 1 == popupStatus && ($(".backgroundPopup").hidePanel(), $popupControl.hidePanel(), popupStatus = 0), popupStatus = 0; else alert(" Add Create PopupControl Functionality first") }, createPopupPanel: function (t) { var e = { popupid: this.attr("id"), content: "", datatype: "json", mtype: "POST", contenturl: "", draggable: !1, title: "" }; (t = $.extend(e, t)).popupid = t.popupid + "popup", $popupControl = $("'#" + t.popupid + "'"), 0 == $("'#" + t.popupid + "'").length && ($div = $("<div class='popupContact' id='" + t.popupid + "' >"), $div.append("<div class='popupContact' id='" + t.popupid + "' >"), $div.append("<a id='" + t.popupid + "Cls'  href='#' class='popupContactClose' >x</a> "), "" != t.title && $div.append("<h1>" + t.title + "</h1>"), "" == t.contenturl && ($div.append("<p id='" + t.popupid + "Area' class='contactArea'> "), $div.append(t.content), $div.append("</p>")), 0 == $(".backgroundPopup").length && $("body").append("<div id='backgroundPopup' class='backgroundPopup'></div>)"), $("body").append($div), $(".popupContactClose").click(function () { 1 == popupStatus && ($popupControl.clearPopupFields(), $("#backgroundPopup").hidePanel(), $popupControl.hidePanel(), popupStatus = 0) }), $div.hidePanel(), $popupControl = $div) }, clearPopupFields: function () { this.length > 0 && (this.find("input[type='text']").each(function (t, e) { $(this).val("") }), this.find("textarea").each(function (t, e) { $(this).val("") })) }, updatePopupControl: function (t, e) { this.find("input[type='text']").each(function (i, n) { $(this).attr("name") == t && $(this).val(e) }) }, setupResetPassword: function (t) { var e = { buttonid: $(this).attr("id") + "resetpsw", passwordurl: "" }; t = $.extend(e, t), this.each(function () { var e = this, i = ($(this), $("<input type='button' value='ResetPassword' id= '" + t.buttonid + "' />")); $("#t_" + e.attr("id")).append(i), i.click(function () { selectedid = e.getGridParam("selrow"), null != selectedid ? $.ajax({ url: t.passwordurl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + selectedid + "'}", success: function (t, e) { t.d }, error: function (t, e, i) { alert("Password not reset") } }) : alert("Please Select a Row") }) }) }, enableResetPassword: function (t) { var e, i = $.extend({ resetpwdurl: "", passwordlinkID: "", statusdivid: "" }, t); return this.each(function () { var t = $(this), n = $("#t_" + this.id); i.passwordlinkID = this.id + "resetpwdlink"; var a = $("<div class='xp-FloatLeft xp-Width20 xp-MarginLeft-5'><div id='" + i.passwordlinkID + "' class='pngddd xp-HoverCursor xp-Icon xp-IconRstPwd xp-FloatLeft Tip-UMRstPwd ' style='padding:2px' title='Reset Password' ></div></div>"); n.prepend(a), i.statusdivid = this.id + "statusdiv"; var o = $("<div id='" + i.statusdivid + "' class='xp-SuccessMsg xp-FontNormal xp-Width99'  />"); o.hide(), n.prepend(o), a.click(function () { if (null != (e = t.getGridParam("selrow"))) { var n = t.get(0); n && (n.p.loadui = "block", $("#lui_" + n.p.id).show(), $("#load_" + n.p.id).show()), $.ajax({ url: i.resetpwdurl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + e + "'}", success: function (e, i) { var n; "success" == e.d ? ((n = t.get(0)) && (n.p.loadui = "block", $("#lui_" + n.p.id).hide(), $("#load_" + n.p.id).hide()), o.html('<div class="xp-MarginAuto xp-Width25 xp-WhiteSpace" ><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >Password reset done successfully</div></div>'), o.removeClass("xp-ErrorMsg").addClass("xp-SuccessMsg")) : ((n = t.get(0)) && (n.p.loadui = "block", $("#lui_" + n.p.id).hide(), $("#load_" + n.p.id).hide()), o.html('<div class="xp-MarginAuto xp-Width25 xp-WhiteSpace"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle">Error</div></div>'), o.removeClass("xp-SuccessMsg").addClass("xp-ErrorMsg")); o.show().fadeOut(1e4) }, error: function (t, e, i) { var n = gridelem.get(0); n && (n.p.loadui = "block", $("#lui_" + n.p.id).hide(), $("#load_" + n.p.id).hide()), o.html('<div class="xp-MarginAuto xp-Width25 xp-WhiteSpace"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >Password Reset not done</div></div>'), o.removeClass("xp-SuccessMsg").addClass("xp-ErrorMsg") } }) } else o.html('<div class="xp-MarginAuto xp-Width25 xp-WhiteSpace"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >Please select a row</div></div>'), o.removeClass("xp-SuccessMsg").addClass("xp-ErrorMsg"), o.show().fadeOut(1e4) }) }) }, enableDeactivateUser: function (t) { var e; $.extend({ deactivateUserServiceUrl: "" }, t); return this.each(function () { var i = $(this), n = ($("#t_" + this.id), ""), a = "", o = "gbox_" + this.id, r = document.getElementById(o); if (null != (e = i.getGridParam("selrow"))) { var s = i.get(0); s && (s.p.loadui = "block", $("#lui_" + s.p.id).show(), $("#load_" + s.p.id).show()), $.ajax({ url: t, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + e + "'}", success: function (t, o) { var s; t.d ? ((s = i.get(0)) && (s.p.loadui = "block", $("#lui_" + s.p.id).hide(), $("#load_" + s.p.id).hide()), a += "<div class='deactivateUserContent'>", a += "<span class='helper'></span>", a += "<div>", a += "<div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div>", a += "<div class='modal-contents' id='deactivateUserContentSection' style='height:auto;border-radius: 0px; border: 0px;text-align:left;'>", a += "<div class='modal-body'>", a += "<div class='deactivate-user-body' style='margin-top:10px;'>", a += "<p style='float:left;margin-bottom:0;margin-right:5px !important;margin-top: 8px !important;margin-left: 35px !important;'>Remove access of User to iRIS</p>", a += "<button type='button' id='deactivateUserButton' onclick='MyFunction()' class='xpThemeButton xpPadding'>Confirm</button>", a += "<center><p style='font-size: 10pt;margin-top:15px !important;'  >On click of Confirm User will no longer have access to iRIS</p></center>", a += "</div></div></div></div></div>", $(r).append($(a)), $(".deactivateUserContent").show(), $("#deactivateUserContentSection").slideDown(), $("#deactivateUserButton").click(function () { $.ajax({ url: "/_layouts/IImpact.Web/UserMngGridService.asmx/DeactivateUserFromDatabase", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + e + "'}", success: function (t, e) { 0 == t.d && ($(".deactivateUserContent").remove(), location.reload()) } }) }), $(".popupCloseButton").click(function () { $("#deactivateUserContentSection").slideUp(5e4), $(".deactivateUserContent").remove() })) : ((s = i.get(0)) && (s.p.loadui = "block", $("#lui_" + s.p.id).hide(), $("#load_" + s.p.id).hide()), $.ajax({ url: "/_layouts/IImpact.Web/ClientUserAdminService.asmx/GetSummaryCount", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "", success: function (t) { if (t.d) { var i = t.d; if (i[0] == i[1]) { " <span class='helper'></span>", "<div style='max-width:530px;'>", "<div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div>", "<div class='modal-contents' id='privacyPolicy' style='height:auto;border-radius: 0px; border: 0px;text-align:left;'>", "<div class='modal-header' >", "<h4 class='modal-title' id='LiceneceErrorHeader' style='color: #33AEDC;font-weight: 600;margin-left:5px;'>You have used all your licences</h4>", "</div>", "<div class='modal-body' style='float:left;'>", "<div class='support-body' >", "<form id='LicenceErrorNotifications'>", "<div class='support-body'>", "<p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>All of your licences are now allocated </p>", "<p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>To work within your existing licenses Deactivate a User to free up a license as required </p>", "<p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>If you wish to request more licenses then click <a id='sendEmailforLicencePurchase' href='#' style='text-decoration:underline;color:#FF0000;'>here</a></p>", "</div>", "</form>", "</div>", "</div>", "</div>", "</div>", "</div>", $("#SupportRequest").append($("<div class='LicenceExpiredDeactivate'> <span class='helper'></span><div style='max-width:530px;'><div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div><div class='modal-contents' id='privacyPolicy' style='height:auto;border-radius: 0px; border: 0px;text-align:left;'><div class='modal-header' ><h4 class='modal-title' id='LiceneceErrorHeader' style='color: #33AEDC;font-weight: 600;margin-left:5px;'>You have used all your licences</h4></div><div class='modal-body' style='float:left;'><div class='support-body' ><form id='LicenceErrorNotifications'><div class='support-body'><p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>All of your licences are now allocated </p><p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>To work within your existing licenses Deactivate a User to free up a license as required </p><p style='float:left;margin-right:10px;padding-top:5px;color:#FF0000;'>If you wish to request more licenses then click <a id='sendEmailforLicencePurchase' href='#' style='text-decoration:underline;color:#FF0000;'>here</a></p></div></form></div></div></div></div></div>")), $(".LicenceExpiredDeactivate").show(), $("#privacyPolicy").slideDown(), $(".popupCloseButton").click(function () { $("#privacyPolicy").slideUp(5e4), $(".LicenceExpiredDeactivate").remove(), $("#SupportRequest").remove(), $(".jqgrid-overlay").hide() }), $("#sendEmailforLicencePurchase").click(function () { $.ajax({ url: "/_layouts/IImpact.Web/LifeCycleService.asmx/SendEmailForLicence", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{EmailSubject:'Request for Licences'}", success: function (t, e) { $("#LiceneceErrorHeader").html("<p style='color: #000000;font-weight: 600;margin-left:5px;'>Request to discuss licences</p>"), $("#LicenceErrorNotifications").find("div").html("<p>Your request has been sent.  The iRIS Team will contact you shortly to discuss Licences.<br><br>Thank you.</p>") } }) }), $(".popupCloseButton").click(function () { $(".deactivateUserContent").remove() }) } else n += "<div class='deactivateUserContent'>", n += "<span class='helper'></span>", n += "<div>", n += "<div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div>", n += "<div class='modal-contents' id='deactivateUserContentSection' style='height:auto;border-radius: 0px; border: 0px;text-align:left;'>", n += "<div class='modal-body'>", n += "<div class='deactivate-user-body' style='margin-top:10px;'>", n += "<p style='float:left;margin-bottom:0;margin-right:5px !important;margin-top: 8px !important;margin-left: 35px !important;'>Restore access of User to iRIS</p>", n += "<button type='button' id='reactivateUserButton' onclick='MyFunction()' class='xpThemeButton xpPadding'>Confirm</button>", n += "<center><p style='font-size: 10pt;margin-top:15px !important;'  >On click of Confirm User will regain access to iRIS</p></center>", n += "</div></div></div></div></div>", $(r).append($(n)), $(".deactivateUserContent").show(), $("#deactivateUserContentSection").slideDown(), $(".popupCloseButton").click(function () { $("#deactivateUserContentSection").slideUp(5e4), $(".deactivateUserContent").remove() }), $("#sendEmailforLicencePurchase").click(function () { $.ajax({ url: "/_layouts/IImpact.Web/LifeCycleService.asmx/SendEmailForLicence", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{EmailSubject:'Request for Licences'}", success: function (t, e) { } }) }), $("#reactivateUserButton").click(function () { $.ajax({ url: "/_layouts/IImpact.Web/UserMngGridService.asmx/ReactivateUserFromDatabase", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + e + "'}", success: function (t, e) { 0 == t.d && ($(".deactivateUserContent").remove(), location.reload()) } }) }) } } })) } }) } else n += "<div class='deactivateUserContent'>", n += "<span class='helper'></span>", n += "<div style='width:200px;box-shadow: none;'>", n += "<div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div>", n += "<div class='modal-contents' id='deactivateUserContentSection' style='height:auto;border-radius: 0px; border: 0px;text-align:left;'>", n += "<div class='modal-header'>", n += "<h4 class='modal-title' style='color: #282c3f !important;font-size:20px;font-weight: 600;'>Warning</h4>", n += "</div>", n += "<div class='modal-body'>", n += "<div class='deactivate-user-body' >", n += "<p style='margin-bottom:0;margin-top: 5px !important;'>Please select a row</p>", n += "</div></div></div></div></div>", $(r).append($(n)), $(".deactivateUserContent").show(), $("#deactivateUserContentSection").slideDown(), $(".popupCloseButton").click(function () { $("#deactivateUserContentSection").slideUp(5e4), $(".deactivateUserContent").remove() }) }) }, setPassword: function (t) { var e, i = $.extend({}, t); return this.each(function () { var t = $("#t_" + (a = this).id); i.statusdivid = a.id + "statusdiv"; var n = $("<div id='" + i.statusdivid + "' class='xp-SuccessMsg xp-FontNormal xp-Width99'  />"); n.hide(), t.prepend(n); var a = this, o = $(this); if (null != (e = o.getGridParam("selrow"))) { " <span class='helper'></span>", "<div>", "<div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div>", "<div class='modal-contents' id='resetPasswordContent' style='border-radius: 0px; border: 0px;text-align:left;'>", "<div class='modal-header'>", "<h4 class='modal-title' style='color: #33AEDC;font-weight: 600;'>Set Password</h4>", "</div>", "<div class='modal-body'>", "<div id='passwordValidation' ></div>", "<div class='support-body'>", "<div class='form-group'>", "<label>New Password</label>", "<input type='password' class='form-control' placeholder='Enter Password' id='newPassword'>", "</div>", "<div class='form-group'>", "<label>Verify Password</label>", "<input type='password' class='form-control' placeholder='Verify Password' id='confirmnewPassword'>", "</div>", "<button type='submit' class='xpThemeButton ui-tabbuttonstyle ui-corner-all xp-NewButton' id='submitPassword'>Save </button>", "<button type='button' class='cancelButton ui-tabbuttonstyle ui-corner-all xp-NewButton ' >Cancel </button>", "</div>", "</div>", "</div>", "</div>", "</div>", $("body").append($("<div class='resetPasswordContent'> <span class='helper'></span><div><div class='popupCloseButton'><i class='fa fa-times' aria-hidden='true'></i></div><div class='modal-contents' id='resetPasswordContent' style='border-radius: 0px; border: 0px;text-align:left;'><div class='modal-header'><h4 class='modal-title' style='color: #33AEDC;font-weight: 600;'>Set Password</h4></div><div class='modal-body'><div id='passwordValidation' ></div><div class='support-body'><div class='form-group'><label>New Password</label><input type='password' class='form-control' placeholder='Enter Password' id='newPassword'></div><div class='form-group'><label>Verify Password</label><input type='password' class='form-control' placeholder='Verify Password' id='confirmnewPassword'></div><button type='submit' class='xpThemeButton ui-tabbuttonstyle ui-corner-all xp-NewButton' id='submitPassword'>Save </button><button type='button' class='cancelButton ui-tabbuttonstyle ui-corner-all xp-NewButton ' >Cancel </button></div></div></div></div></div>")), $(".resetPasswordContent").show(), $("#resetPasswordContentContentSection").slideDown(), $(".popupCloseButton").click(function () { $("#resetPasswordContentContentSection").slideUp(5e4), $(".resetPasswordContent").remove() }), $("#submitPassword").click(function () { var t = 0, i = 0, n = 0, a = 0, o = $("#newPassword").val(), r = $("#confirmnewPassword").val(); console.log(o.length); for (var s = 0; s < o.length; s++) o[s] >= "A" && o[s] <= "Z" ? t++ : o[s] >= "a" && o[s] <= "z" ? i++ : o[s] >= "0" && o[s] <= "9" ? n++ : a++; o != r ? $("#passwordValidation").html("<p class='passwordError'>The new Passwords do not match. Please verify and resubmit.</p><br/>") : t < 1 || i < 1 || a < 1 || n < 1 || o.length < 6 ? $("#passwordValidation").html("<div class='passwordError'><p>The New Password requirement is:<ul><li>Must be alphanumeric</li> <li> Minimum 6 characters - at least 1 of which is uppercase</li> <li> Minimum 1 special character</li></ul></p></div>") : $.ajax({ url: "/_layouts/IImpact.Web/UserMngGridService.asmx/setPassword", contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{userId:'" + e + "',password:'" + o + "'}", success: function (t, e) { $(".modal-body").html("Your Password has been successfully reset") }, error: function (t) { $("#passwordValidation").html("<p class='passwordError'><b>This User is deactivated, Passwords can only be reset for Active Users. <br>Please Activate the User, then Reset their Password.</b></p><br>") } }) }), $(".cancelButton").click(function () { $(".resetPasswordContent").remove() }), $(".fa fa-times").click(function () { $(".resetPasswordContent").remove() }) } else n.html('<div class="xp-MarginAuto xp-Width25 xp-WhiteSpace"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >Please select a row</div></div>'), n.removeClass("xp-SuccessMsg").addClass("xp-ErrorMsg"), n.show().fadeOut(1e4) }) }, enableSystemAdmin: function (t) { var e = "selectedAdmin", i = "selectAdmin", n = "radioDiv", a = "adminuser", o = "arrowIcon", r = "systemAdminDivMain"; t = $.extend({ currentSystemAdmin: "", selectedAdminMessage: "Please assign a system admin", systemAdminDivID: "", getAdminUsersUrl: "/_layouts/IImpact.Web/UserMngGridService.asmx/GetAdminUsers", saveSystemAdminUrl: "/_layouts/IImpact.Web/UserMngGridService.asmx/SaveSystemAdmin" }, t); return this.each(function () { var s = $("#t_" + this.id); t.systemAdminDivID = this.id + r; var d = $("<div id='" + t.systemAdminDivID + "' class='xp-FloatLeft xp-Width40 xp-MarginTop-5 xp-MarginBottom-5 '></div>"), l = $("<div class='xp-FloatLeft' id='" + e + "'>" + t.selectedAdminMessage + "</div>").appendTo(d), c = $("<div id='" + o + "'class='xp-FloatLeft xp-IconDownArrow xp-Icon xp-Padding-4 Tip-UMSelectedAdmin'></div>").appendTo(d), h = $("<div class='xp-PositionAbsolute xp-Width30 xp-Margin-0 xp-CustomForm xp-SelectAdminDiv xp-DisplayNone ui-state-default' id='" + i + "'>").appendTo(d); s.append(d); var u = $("<div id='" + n + "' class='xp-FloatLeft xp-Width'>"); u.append("<div class='xp-Width xp-FloatLeft ui-state-default xp-BottomBorder '><div class='xp-Padding-4 xp-FloatLeft xp-FontBold xp-FontSize10pt'>Select an Admin User</div></div>"); var p = $("<div class='xp-FloatLeft xp-Width xp-SelectAdminCss'/>"); u.append(p); var g = $("<ul/>"); p.append(g), $.ajax({ url: t.getAdminUsersUrl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "", success: function (t, e) { var i = t.d; $.each(i, function (t) { this.IsSystemAdmin ? g.append($("<li class='xp-LinkLabel xp-SelectedElement'><input id='" + this.Name + "' type='radio' name='" + a + "' value='" + this.LoginName + "'  checked='checked'  /><label for='" + this.Name + "'>" + this.Name + "</label></li>")) : g.append($("<li><input id='" + this.Name + "' type='radio' name='" + a + "' value='" + this.LoginName + "' /><label for='" + this.Name + "'>" + this.Name + "</label></li>")) }) }, error: function (t, e, i) { } }), h.append(u), d.append("</div></div></div></div>"), c.click(function () { var t = $('input[type="radio"][name="' + a + '"]').length; return h.fadeToggle().addClass("xp-DisplayBlock"), t > 8 && (p.addClass("xp-SelectAdminScroll"), p.jScrollPane({ verticalDragMinHeight: "60" })), !1 }), $('input[type="radio"][name="' + a + '"]').live("click", function (e) { if (e.stopImmediatePropogation, $(".xp-SelectedElement").removeClass("xp-LinkLabel"), $(this).is(":checked")) { var i = $(this).val(); i != t.currentSystemAdmin && ($(this).parent().addClass("xp-LinkLabel xp-SelectedElement"), t.currentSystemAdmin = i, $.ajax({ url: t.saveSystemAdminUrl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{loginName:'" + i + "'}", success: function (t, e) { var i = t.d; return "success" == i.Status && (l.html(i.Message), h.hide()), !1 } })) } }) }) }, setUpViews: function () { this.each(function () { var t = $(this); if (isActivity = !1, isActivity = t.getPostData().isactivity, this.p.enableViews && 1 == $.isFunction(t.createViewsContainer)) if ("" != this.p.viewsurl && "" != this.p.viewscolumnsurl && "" != this.p.saveviewsurl) { t.createViewsDropDown(), t.createViewsContainer(); document.getElementById(this.id + "selectViews"); t.createModifyViewLink(), isActivity || t.createNewViewLink() } else alert("views configuration not set  properly") }) }, createModifyViewLink: function () { var t = { createModifyLinkID: $(this).attr("id") + "ModifylinkID" }; this.each(function () { var e = $(this); this.p = $.extend(this.p, t); var i = $("<img id='" + t.createModifyLinkID + "' src='/_layouts/Images/XPointBase/modify_icon.png' class= 'xp-FloatLeft xp-HoverCursor'style='margin:1px 0px 1px 4px;' />"); i.attr("opt", "Modify"), i.click(function () { i.hide(), $("#" + $gridelem.p.createNewLinkID).hide(), e.viewLinkClick("Modify") }), $("#t_" + $(e).attr("id")).append(i), e.getPostData().isactivity || i.hide() }) }, createNewViewLink: function () { var t = { createNewLinkID: $(this).attr("id") + "createnewlinkID" }; this.each(function () { var e = $(this); this.p = $.extend(this.p, t); var i = $("<span id='" + t.createNewLinkID + "' class='ui-primarytabclr ui-tabbuttonstyle ui-corner-all xp-HoverCursor xp-PositionAbsolute' style='margin:1px 0px 1px 4px;left:240px;'>add view</span>"); i.attr("opt", "New"), i.click(function () { e.viewLinkClick("New"), i.hide(), $("#" + $gridelem.p.createModifyLinkID).hide() }); var n = $("#t_" + $(e).attr("id")); $(n).append(i) }) }, viewLinkClick: function (t) { this.each(function () { var e = $(this); "" != t ? ("New" == t && (e.clearViewFields(), $("#" + this.p.viewssave).attr("opt", "createnew"), $("#" + this.p.viewContainerID).show()), "Modify" == t && (e.clearViewFields(), $("#" + this.p.viewssave).attr("opt", "modify"), e.populateViewFields(), $("#" + this.p.viewContainerID).show())) : alert("Not valid operation") }) }, populateViewFields: function () { var t = $(this); this.each(function () { var e = this; isactivity = t.getPostData().isactivity, $("#" + e.p.viewsnameID).val($("#" + e.id + "selectViews option:selected").text()), $("#" + e.p.viewsnameID).attr("internalname", $("#" + e.id + "selectViews option:selected").val()), isactivity && $("#" + e.p.viewsnameID).attr("disabled", !0), null != e.p.currentViewColumns && $.each(e.p.currentViewColumns, function (t, i) { $("#" + e.p.viewContainerID).find("input[type='checkbox']").each(function (t, e) { $(this).val() == i && $(this).attr("checked", !0) }) }) }) }, clearViewFields: function () { this.each(function () { $("#" + this.p.viewContainerID).find("input").each(function (t) { switch ($(this).get(0).type) { case "checkbox": $(this).attr("checked", !1); break; case "text": $(this).val("") } }) }) }, createViewsDropDown: function (t) { var e = $(this); isActivity = !1, isActivity = e.getPostData().isactivity, this.each(function () { var t = $("#t_" + $(e).attr("id")); if ($gridelem = this, null != t) { var i = "<select id='" + $gridelem.id + "selectViews' class='xp-FloatLeft' />"; $("#t_" + $gridelem.id).append(i); var n = ""; isActivity ? (n = "<option value='Team'>As a team member</option>", n += "<option value='Fav'>As my favorites</option>", n += "<option value='Lead'>As a team lead</option>", n += "<option value='Origin'>As an owner</option>", $("#" + $gridelem.id + "selectViews").html(n), $(e).updateViewColumns()) : $.ajax({ url: $gridelem.p.viewsurl, contentType: "application/json; charset=utf-8", type: $gridelem.p.mtype, dataType: "json", data: "{}", complete: function (t, e) { if ("success" == e) { var i = $.jgrid.parse(t.responseText).d; $.each(i, function (t, e) { var i = this.internalname, a = this.displayname; n += '<option value="' + i + '">' + a + "</option>" }), $("#" + $gridelem.id + "selectViews").html(n), $("#" + $gridelem.id + "selectViews option").length >= 5 && $("#" + $gridelem.p.createNewLinkID).hide() } } }), $("#" + $gridelem.id + "selectViews").change(function () { $("#" + $gridelem.p.viewContainerID).hide(), "AllInfo" == $(this).val() ? $("#" + $gridelem.p.createModifyLinkID).hide() : (isActivity && e.setPostDataItem("selview", $(this).val()), $("#" + $gridelem.p.createModifyLinkID).show()), $("#" + $gridelem.id + "selectViews option").length, $(e).updateViewColumns(!0) }) } else alert("Header toolbar doesnt exists") }) }, updateViewColumns: function (t) { var e = this; $(e).getPostData().isactivity; this.each(function () { var i; $gridElem = this; $gridElem.p = $.extend($gridElem.p, { currentViewColumns: [] }); var n = $(this), a = new Array, o = $("#" + $gridElem.id + "selectViews"); if (o.length > 0) { var r = o.val(); $.ajax({ url: $gridElem.p.viewscolumnsurl, contentType: "application/json; charset=utf-8", type: $gridElem.p.mtype, dataType: "json", data: "{viewinternalname:'" + r + "'}", complete: function (o, r) { if ("success" == r) { i = $.jgrid.parse(o.responseText).d; var s = $gridElem.p.colModel; $.each(s, function (t, e) { n.hideCol(this.name) }), n.showCol("Title"), $gridElem.p.rownumbers && n.showCol("rn"), $.each(i, function (t, e) { $.each($gridElem.p.colModel, function (t, i) { e.internalname == i.name && (n.showCol(i.name), a.push(e.internalname)) }) }), null != t && t && e.trigger("reloadGrid") } $gridElem.p.currentViewColumns = a } }) } else alert("Invalid select option") }) }, createViewsContainer: function (t) { var e, i = { modifyViewUrl: "", createViewUrl: "", viewscontainerID: $(this).attr("id") + "viewcontainer", viewsnameID: $(this).attr("id") + "viewcontainername", viewssave: $(this).attr("id") + "viewcontainersave", viewscancel: $(this).attr("id") + "viewcancel" }; t = $.extend(t, i); var n = this; this.each(function () { var i = this; i.p = $.extend(i.p, t); var a = i.p.colNames, o = i.p.colModel; e = $("<div id='" + t.containerID + "' style='padding:6px;' class='xp-GrayBackground xp-Width'/>"); var r = ""; r = "<div class='xp-FloatLeft' style='padding:0px 0px 0px 4px;margin-left:8px;'>", r += "<span class='xp-FontNormal' style='padding:0px 6px 0px 0px'>View Name</span>", r += "<input autocomplete='off' class='xp-TxtBox' style='margin:0px 2px 0px 2px' type='text' maxlength='15' internalname=''  id='" + t.viewsnameID + "'/>", r += "<input type='button' value='Save' opt='' id='" + t.viewssave + "' class='ui-primarytabclr ui-tabbuttonstyle ui-corner-all'  style='margin:0px 4px 0px 4px'/>", r += "<input type='button' value='Cancel' opt='' id='" + t.viewscancel + "' class='ui-secondarytabclr ui-tabbuttonstyle ui-corner-all' style='margin:0px 4px 0px 4px'/><br/>", r += "</div>", e.append(r); var s = ""; s = "<div  class='xp-Width xp-FloatLeft xp-HeightAuto' style='margin-left:8px;margin-top:4px;'>", $.each(o, function (t, e) { if ("rn" != this.name) { var i = this.name; "Title" === i ? (s += "<div class='xp-FloatLeft xp-Width25 xp-DisplayNone' >", s += "<input type='checkbox' class='xp-DisplayNone' name='" + a[t] + "' value='" + i + "' /> ") : (s += "<div class='xp-FloatLeft' style='margin:0px 3px 0px 0px;min-width:13%;height:40px'>", s += "<input type='checkbox' name='" + a[t] + "' value='" + i + "' /> " + a[t] + " "), s += "</div>" } }), s += "</div>", e.append(s); $(this).parents().get(1); $("#t_" + $gridelem.id).prepend(e), $("#" + t.viewssave).click(function () { 1 == n.saveView() && ($("#" + $gridelem.id + "selectViews option").length > 4 ? $("#" + $gridelem.p.createNewLinkID).hide() : $("#" + $gridelem.p.createNewLinkID).show()) }), $("#t_" + $gridelem.id).prepend(e), $("#" + t.viewscancel).click(function () { $("#" + i.p.viewsContainerID).hide(), "AllInfo" != $("#" + $gridelem.id + "selectViews").val() && $("#" + $gridelem.p.createModifyLinkID).show(), $("#" + $gridelem.id + "selectViews option").length <= 4 && null != $gridelem.p.createNewLinkID && $("#" + $gridelem.p.createNewLinkID).show() }), $("#" + i.p.viewsContainerID).hide() }) }, addFavorites: function (t) { var e; return t = $.extend({ favoritesurl: "", favoriteslinkID: "", statusdivid: "" }, t), this.each(function () { var i = this, n = $(this), a = $("#t_" + i.id); t.favoriteslinkID = i.id + "addfavs", t.statusdivid = i.id + "statusdiv"; var o = $("<img id='" + t.favoriteslinkID + "' class='pngddd xp-FloatLeft xp-HoverCursor xp-Height-20' style='margin:0px 10px 0px 0px;width:20px;' src='_layouts/Images/XPointBase/favorite_Yes.png' alt='Add as Favorite'/>"); a.prepend(o); var r = $("'#" + t.statusdivid + "'"); 0 == r.length && ((r = $("<div id='" + t.statusdivid + "' class='xp-SuccessMsg xp-FontNormal xp-Width99' />")).hide(), a.prepend(r)), o.click(function () { r.hide(), r.removeClass("ui-state-error"), r.removeClass("xp-SuccessMsg"), e = n.getGridParam("selrow"), n.resetSelection(), null != e ? $.ajax({ url: t.favoritesurl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{itemid:'" + e + "'}", success: function (t, e) { var n = t.d; "Added as Favorite Successfully" != n && "Updated Successfully." != n || i.grid.populate(), r.html('<div class = "xp-MarginAuto xp-Width25 xp-WhiteSpace"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ><img src="/_layouts/Images/XPointBase/success_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >' + n + "</div></div>"), r.addClass("xp-SuccessMsg"), r.show().fadeOut(1e4) }, error: function (t, e, i) { r.html('<div class = "xp-MarginAuto xp-Width20" ><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ><img src="/_layouts/Images/XPointBase/error_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto xp-VerticalAlignMiddle" >Not added as Favorites</div></div>'), r.addClass("ui-state-error"), r.addClass("xp-ErrorMsg"), r.show().fadeOut(1e4) } }) : (r.html('<div class = "xp-MarginAuto xp-Width20"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"><img src="/_layouts/Images/XPointBase/error_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto">Please Select a Row</div></div>'), r.addClass("ui-state-error"), r.addClass("xp-ErrorMsg"), r.show().fadeOut(1e4)) }) }) }, saveView: function (t) { this.each(function () { var t = this, e = t.id + "statusdiv", i = $("#" + e); 0 == i.length && ((i = $("<div id='" + e + "' class='xp-SuccessMsg xp-Font xp-Width' />")).hide(), $($(t).parents().get(2)).prepend(i)); var n = $(this), a = new Array; $("#" + t.p.viewContainerID).find("input[type='checkbox']").each(function (t, e) { 1 == $(this).attr("checked") && a.push($(this).val()) }); var o = $("#" + t.p.viewssave).attr("opt"), r = $("#" + t.p.viewsnameID).attr("internalname"), s = $("#" + t.p.viewsnameID).val(); if (i.hide(), i.removeClass("ui-state-error"), i.removeClass("xp-SuccessMsg"), i.removeClass("xp-ErrorMsg"), "" == s) return i.html('<div class="xp-MarginAuto xp-Width20"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"><img src="/_layouts/Images/XPointBase/error_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto">View name cannot be blank</div></div>'), i.addClass("ui-state-error"), i.addClass("xp-ErrorMsg"), i.show().fadeOut(1e4), !1; var d = !0; if ("createnew" == o.toLowerCase() && $.each($("#" + t.id + "selectViews").children(), function () { $(this).text().toLowerCase() == s.toLowerCase() && (d = !1) }), !d) return i.html('<div class="xp-MarginAuto xp-Width25" ><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"><img src="/_layouts/Images/XPointBase/error_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto">Cannot create two views with same name</div></div>'), i.addClass("ui-state-error"), i.addClass("xp-ErrorMsg"), i.show().fadeOut(1e4), !1; var l = { savedata: { fields: a, opt: o, internalname: r, displayname: s } }; return $.ajax({ url: t.p.saveviewsurl, async: !1, contentType: "application/json; charset=utf-8", type: t.p.mtype, dataType: "json", data: JSON.stringify(l), complete: function (e, a) { if ("success" == a) { var d = new Array; viewColumns = $.jgrid.parse(e.responseText).d; var l = t.p.colModel; $.each(l, function (t, e) { n.hideCol(this.name) }), n.showCol("Title"), t.p.rownumbers && n.showCol("rn"), $.each(viewColumns, function (e, i) { $.each(t.p.colModel, function (t, e) { i.internalname == e.name && (n.showCol(e.name), d.push(i.internalname)) }) }), t.p.currentViewColumns = d, n.populateViewDropDown(), $("#" + t.id + "selectViews option").length < 5 && $("#" + t.p.createNewLinkID).show(), $("#" + t.p.viewContainerID).hide(), "createnew" == o ? ($("#" + t.id + "selectViews option[value='" + s + "']").attr("selected", "selected"), i.html('<div class="xp-MarginAuto xp-Width20" ><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6"><img src="/_layouts/Images/XPointBase/success_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto">View saved successfully</div></div>'), i.addClass("xp-SuccessMsg"), i.show().fadeOut(1e4)) : ($("#" + t.id + "selectViews option[value='" + r + "']").attr("selected", "selected"), i.html('<div class="xp-MarginAuto xp-Width20"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ><img src="/_layouts/Images/XPointBase/success_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto xp-FontNormal">View modified successfully</div></div>'), i.addClass("xp-SuccessMsg"), i.show().fadeOut(1e4)), $("#" + t.p.createModifyLinkID).show() } }, error: function (t, e, n) { i.html('<div class="xp-MarginAuto xp-Width20"><div class="xp-FloatLeft xp-MarginAuto xp-PaddingRight-6" ><img src="/_layouts/Images/XPointBase/error_msg.png" /></div><div class="xp-FloatLeft xp-MarginAuto">View Not Added</div></div>'), i.addClass("ui-state-error"), i.addClass("xp-ErrorMsg"), i.show().fadeOut(1e4) } }), !0 }) }, showhideColumns: function () { this.each(function () { var t = this; $.each(t.p.currentViewColumns, function (e, i) { $.each(t.p.colModel, function (t, e) { }) }) }) }, setGridAsPerScreen: function (t) { var e; t = $.extend({ screenCssMap: "Default", shrinkToFit: !0 }, t); return e = screen.width, screen.height, this.each(function () { var i = xpointGridWidth.formatters, n = i.Default, a = i[t.screenCssMap] ? i[t.screenCssMap] : n, o = a[e] ? a[e](a).width : n[e] ? n[e](a).width : e, r = $(this), s = "true" == t.shrinkToFit; r.setGridWidth(o, s) }) }, populateViewDropDown: function () { this.each(function () { var t = this, e = ""; $.ajax({ url: t.p.viewsurl, async: !1, contentType: "application/json; charset=utf-8", type: t.p.mtype, dataType: "json", data: "{}", complete: function (i, n) { if ("success" == n) { var a = $.jgrid.parse(i.responseText).d; $.each(a, function (t, i) { var n = this.internalname, a = this.displayname; e += '<option value="' + n + '">' + a + "</option>" }), $("#" + t.id + "selectViews").html(e) } } }) }) }, prepareParetoChart: function (t) { var e; t = $.extend({ gridid: "", y1values: [], y2values: [], valuecell: "", xcell: "", y1axislabel: "", y2axislable: "", totalcount: 0, labels: [] }, t); return this.each(function () { var i = $(this); if ($.trim(t.gridid) && (e = $("#" + t.gridid)).length > 0) { !function () { for (var i = [], n = [], a = 0, o = e.getDataIDs(), r = 0; r < o.length; r++) { var s = e.getCell(o[r], t.xcell), d = parseInt(e.getCell(o[r], t.valuecell)), l = r - .25; i.push([l, d]), a += d, n.push(s) } t.labels = n, t.y1values = i, t.totalcount = a }(), function () { for (var i = [], n = 0, a = e.getDataIDs(), o = 0; o < a.length; o++) { e.getCell(a[o], t.xcell); var r = parseInt(e.getCell(a[o], t.valuecell)); r = (n += r) / t.totalcount * 100, i.push([o, r]) } t.y2values = i }(), $.plot(i, [{ data: t.y1values, bars: { show: !0, barWidth: .6 } }, { data: t.y2values, lines: { show: !0, fill: !0 }, points: { show: !0 }, yaxis: 2 }], { grid: { hoverable: !0, clickable: !0 }, xaxis: { ticks: t.labels.length, tickFormatter: function (e, i) { return t.labels[Math.round((e - i.min) / i.tickSize)] ? t.labels[Math.round((e - i.min) / i.tickSize)] : "" } }, y2axis: { ticks: 10, min: 0, max: 100 } }); var n = null; i.blur(function () { $("#tooltip").remove() }), i.bind("plothover", function (t, e, i) { if ($("#x").text(e.x.toFixed(2)), $("#y").text(e.y.toFixed(2)), i) { if (n != i.datapoint && !i.series.bars.show) { n = i.datapoint, $("#tooltip").remove(); try { var a = i.datapoint[0].toFixed(2), o = i.datapoint[1].toFixed(2); a && o && function (t, e, i) { $('<div id="tooltip">' + i + "</div>").css({ position: "absolute", display: "none", top: e + 5, left: t + 5, border: "1px solid #fdd", padding: "2px", "background-color": "#fee", opacity: .8 }).addClass("xp-Font").appendTo("body").fadeIn(200) }(i.pageX, i.pageY, "Cumulative % is " + o) } catch (t) { } } } else $("#tooltip").remove(), n = null }) } }) }, setupEmail: function (t) { var e, i = { url: "", columnname: "Team", updatecount: !1, columntoupdate: "", listtoupdate: "", itemid: "", updateurl: "", position: "bottom", emailpopupid: "email_popup" + $(this).attr("id") }, n = $(this), a = (t = $.extend(i, t), $("#" + t.emailpopupid)); function o(i) { a.length > 0 && (a.children().remove(), a.remove()); var o = ""; a = $("<div id='" + t.emailpopupid + "' title='Compose Email' />"), o += "<table border=0 width=100% cellspacing=0 cellpadding=6><tbody>", o += "<tr><td valign=top width='10%'>To:</td>", o += "<td><input autocomplete='off' id='" + n.attr("id") + "EmailTitle'></textarea></td>", o += "<td width='20%' valign=top>Use Template: </td>", o += "<td valign=top><select id='" + n.attr("id") + "EmailTemplate' class='xp-Width'></select></td>", o += "</tr><tr><td valign=top>Subject:</td><td colspan=3><input autocomplete='off' type=text name=Subject id='" + n.attr("id") + "EmailSubject' style='width:85%' class='xp-TxtBox'/></td></tr><tr><td colspan=4>", o += "<textarea name='body' id='" + n.attr("id") + "EmailBody' cols='85'></textarea></td></tr>", o += "</tbody></table>", a.html(o), $("body").append(a), e = $("#" + n.attr("id") + "EmailTitle"); var r = $("#" + n.attr("id") + "EmailTemplate"), s = $("#" + n.attr("id") + "EmailSubject"), d = $("#" + n.attr("id") + "EmailBody"), l = $([]).add(e).add(s).add(d).add(r); return a.dialog({ autoOpen: !1, width: 730, height: 340, bgiframe: !0, modal: !0, buttons: { Send: function () { tinyMCE.triggerSave(); var n = { post: { team: e.val(), subject: s.val(), body: d.val() } }; $.ajax({ url: t.url, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: $.toJSON(n), success: function (e, n) { "success" == e.d && (t.updatecount && "" != t.trackerid ? $.ajax({ url: t.updateurl, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: "{location:'" + location.href + "', itemid:'" + t.trackerid + "',listname:'" + t.listtoupdate + "',countcolumn:'" + t.columntoupdate + "'}", success: function (t, e) { i.trigger("reloadGrid"), a.dialog("close") } }) : a.dialog("close")) } }) }, Cancel: function () { $(this).dialog("close") } }, open: function () { d.RelayRichText() }, close: function () { tinyMCE.execCommand("mceRemoveControl", !0, d.attr("id")), l.val("") } }), a } function r(i) { if ("" != t.columnname) { var n = i.getGridParam("selrow"); if (null != n) { t.trackerid = n; var o = i.getColumnData(n, t.columnname), r = formatPeoplepickerVal(o); "" != o && e.peoplepicker({ multiple: !0, prePopulate: r }) } else e.peoplepicker({ multiple: !0 }) } else e.peoplepicker({ multiple: !0 }); a.dialog("open") } return this.each(function () { var e = $(this), i = $(e).get(0).p.pager.attr("id"); if ("top" == t.position) { var a = $("<input type='button' title='Send Mail' class='xp-MailImg xp-IconEmail xp-Icon xp-FloatLeft' />"); $("#t_" + e.attr("id")).append(a), a.click(function () { o(e), r(e) }) } else $(e).navButtonAdd("#" + i, { caption: "", title: "Email", buttonicon: "ui-icon-mail-closed", onClickButton: function () { o(e), $.ajax({ url: "/_layouts/IImpact.Web/AdminEMailTemplateService.asmx/GetEMailTemplateItems", contentType: "application/json; charset=utf-8", type: "POST", dataType: "json", success: function (t) { var e = t.d; if (e) { var i = {}; $.each(e, function () { var t = $("<option value='" + this.templateID + "'>" + this.title + "</option>"); $("#" + n.attr("id") + "EmailTemplate").append(t), i[this.templateID] = { title: this.title, subject: this.eMailSubject, body: this.eMailBody } }), $("#" + n.attr("id") + "EmailTemplate").change(function (t) { $("#" + n.attr("id") + "EmailSubject").val(i[$(this).val()].subject), $("#" + n.attr("id") + "EmailBody").val(i[$(this).val()].body) }) } } }), r(e) }, position: "last" }) }) }, SloughExceptionsChart: function (t) { var e, i, n, a = ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan", "Feb", "Mar"]; t = $.extend({ gridid: "", idenvalue: "", closedvalue: "", valuecell: "" }, t); return this.each(function () { var o = $(this); $.trim(t.gridid) && (e = $("#" + t.gridid)).length > 0 && (!function () { for (var n = [], o = e.getDataIDs(), r = 0; r < a.length; r++) { for (var s = 0, d = 0; d < o.length; d++) e.getCell(o[d], t.idenvalue) == a[r] && s++; n.push([r, s]) } i = n }(), function () { for (var i = [], o = e.getDataIDs(), r = 0; r < a.length; r++) { for (var s = 0, d = 0; d < o.length; d++) { var l = e.getCell(o[d], t.closedvalue).indexOf("Closed") > -1; e.getCell(o[d], t.idenvalue) == a[r] && l && s++ } i.push([r, s]) } n = i }(), $.plot(o, [{ data: i, bars: { show: !0, barWidth: .6, align: "center" }, label: "Identified" }, { data: n, lines: { show: !0 }, points: { show: !0 }, label: "Closed" }], { xaxis: { tickSize: 1, tickFormatter: function (t, e) { return a[t] } } })) }) }, addLink: function (t) { t = $.extend({ linkOptions: "" }, t); return this.each(function () { var e = $(this); !function (t, e, i) { switch (e) { case "top": default: $($("#" + i.attr("id"))[0].p.toppager + "_left").css("width", "auto").append(t) } }($("<div style='padding:3px 4px;' class = 'xp-FloatLeft'><a class='xp-LinkLabel Tip-MFModifyView' href='" + t.linkOptions.currentUrl + "'>" + t.linkOptions.text + "</a></div>"), t.linkOptions.position, e) }) }, dynamicGroupBy: function (t) { t = $.extend({ toolBar: "top", groupOptions: [], needBlank: !0, groupByText: "Group By" }, t); function e(e) { var i = $("<div class='xp-FloatLeft' />"), n = $("<div style='padding-top:1px' class='xp-FloatLeft xp-MarginLeft-5'/>").appendTo(i), a = $("<select  style='border:1px solid #C6CFCE;' class='xp-Font xp-Margin-0 xp-Height-20 xp-AnchorFontSize Tip-ACGroupBy'/>").appendTo(n).change(function () { var t = $(this).val(); t && ("clear" == t ? e.jqGrid("customgroupingRemove", !0) : e.jqGrid("groupingGroupBy", t)) }); 1 == t.needBlank && a.append("<option value='clear'>Group by</option>"), $.each(t.groupOptions, function (t) { this && a.append($("<option></option>").val(this.val).html(this.text)) }), function (t, e, i) { switch (e) { case "top": default: $($("#" + i.attr("id"))[0].p.toppager + "_left").css("width", "auto").append(t) } }(i, t.position, e) } return this.each(function () { e($(this)) }) }, ImportData: function (t) { var e = { url: "", position: "bottom", importdialogid: "importdialog" + $(this).attr("id"), statusmsgid: "statusmsg" + $(this).attr("id") }, i = this[0]; gpost = new Object; $(this), t = $.extend(e, t); var n = $("#" + t.importdialogid); function a(e) { n.length > 0 && (n.children().remove(), n.remove()), gpost.trackerID = i.p.mid; var a = $("<div id='" + t.statusmsgid + "' />"); a.html(""); var o = $("<div/>"); n = $("<div id='" + t.importdialogid + "' title='Budget Holders' />"), o.append("<table border=0 width=100% cellspacing=0 cellpadding=6><tbody><tr><td class=''>Do you want to <b>import data</b> into this table from the Budget Holders table in the previous phase? This action will append the imported data with the existing data.</td></tbody></table>"), n.append(a), n.append(o), $("body").append(n); var r = $("#confirmdialog"); r.dialog("destroy"), r.html(""); var s = $("<div />"); return r.append(s), n.dialog({ autoOpen: !1, width: 750, bgiframe: !0, modal: !0, buttons: { Import: function () { $.ajax({ url: t.url, contentType: "application/json; charset=utf-8", type: "post", dataType: "json", data: $.toJSON(gpost), success: function (t, e) { var a = t.d; if ("success" == a.Status) return s.html("<div>" + a.Message + "</div>"), n.dialog("close"), r.dialog(), setTimeout(function () { r.dialog("destroy") }, 4e3), $(i).trigger("reloadGrid"), !0 } }) }, Cancel: function () { $(this).dialog("close") } } }), n } return this.each(function () { var e = $(this), i = $(e).get(0).p.pager.attr("id"), o = $("<div id='confirmdialog' class='xp-Width' />"); if (o.hide(), $("body").append(o), "top" == t.position) { var r = $("<input type='button' title='Import data' class='' />"); $("#t_" + e.attr("id")).append(r), r.click(function () { a(), n.dialog("open") }) } else $(e).navButtonAdd("#" + i, { caption: "Import data", buttonicon: "", onClickButton: function () { a(), n.dialog("open") }, position: "last" }) }) } }) }(jQuery);