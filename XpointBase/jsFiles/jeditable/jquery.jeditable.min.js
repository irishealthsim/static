(function(n){n.fn.editable=function(t,i){if("disable"==t){n(this).data("disabled.editable",!0);return}if("enable"==t){n(this).data("disabled.editable",!1);return}if("destroy"==t){n(this).unbind(n(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var r=n.extend({},n.fn.editable.defaults,{target:t},i),s=n.editable.types[r.type].plugin||function(){},h=n.editable.types[r.type].submit||function(){},c=n.editable.types[r.type].buttons||n.editable.types.defaults.buttons,e=n.editable.types[r.type].content||n.editable.types.defaults.content,l=n.editable.types[r.type].element||n.editable.types.defaults.element,u=n.editable.types[r.type].reset||n.editable.types.defaults.reset,f=r.callback||function(){},a=r.onedit||function(){},v=r.onsubmit||function(){},y=r.onreset||function(){},o=r.onerror||u;return r.tooltip&&n(this).attr("title",r.tooltip),r.autowidth="auto"==r.width,r.autoheight="auto"==r.height,this.each(function(){var t=this,i,p;n(this).addClass("jeditable");this.settings=r;i=n(t).width();p=n(t).height();this.MakeEmpty=function(){n(t).html("");t.editing=!1;f.apply(t,["",r]);n(t).html(r.placeholder);n(t).addClass(r.emptycontainercss)};n(this).data("event.editable",r.event);n.trim(n(this).html())?r.type!="richtext"||n.trim(n(this).text())?n(t).removeClass(r.emptycontainercss):(n(this).text(r.placeholder),n(t).addClass(r.emptycontainercss)):(n(this).html(r.placeholder),n(t).addClass(r.emptycontainercss));n(this).bind(r.event,function(y){function rt(i){var u=n("#"+n(t).attr("id")+"errordiv"),e;u.length>0&&u.remove();e={type:"POST",data:n.toJSON(i),dataType:"html",url:r.target,success:function(i){var e=i.d,o,s;if(e.Status=="success")o=n.editable.types[r.type],s=o.formatter&&n.isFunction(o.formatter)?o.formatter:function(n){return n.Message},s&&n(t).html(s.call(t,e,r)),t.editing=!1,f.apply(t,[e,r]),n.trim(n(t).html())?n(t).removeClass(r.emptycontainercss):(n(t).html(r.placeholder),n(t).addClass(r.emptycontainercss));else return n("form",t).show(),n(n("img",t).get(0)).remove(),u.length==0&&(u=n("<div id='"+n(t).attr("id")+"errordiv'  class='xp-ErrorMsg xp-FloatLeft' style='width:35%;margin-top:4px; display:block;'/>"),u.append(e.Message).show(),n(t).append(u)),!1},error:function(n){o.apply(w,[r,t,n])}};n.extend(e,r.ajaxoptions);n.ajax(e)}var nt,tt,w,b,it,d,g,k;(n(t).removeClass(r.emptycontainercss),r.checksingleedit&&(nt=n(this).parents("."+r.parentcontainercss).get(0),n(".currenteditable",nt).removeClass("currenteditable"),n(this).addClass("currenteditable"),tt=n(".jeditable",nt).filter(function(){return n(this).data("event.editable")!=null&&!n(this).hasClass("currenteditable")}),n.each(n(tt),function(){var t=n(this)[0];n.isFunction(t.reset)&&t.reset(t.form)})),!0!==n(this).data("disabled.editable"))&&(t.editing||!1!==a.apply(this,[r,t])&&(y.preventDefault(),y.stopPropagation(),r.tooltip&&n(t).removeAttr("title"),0==n(t).width()?(r.width=i,r.height=p):(r.width!="none"&&(r.width=r.autowidth?n(t).width():r.width),r.height!="none"&&(r.height=r.autoheight?n(t).height():r.height)),n(this).html().toLowerCase().replace(/(;|")/g,"")==r.placeholder.toLowerCase().replace(/(;|")/g,"")&&n(this).html(""),t.editing=!0,t.revert=n(t).html(),n(t).html(""),w=n.browser.msie&&parseInt(n.browser.version)===7?n("<div />"):n("<form />"),this.form=w,r.cssclass&&("inherit"==r.cssclass?w.attr("class",n(t).attr("class")):w.attr("class",r.cssclass)),r.style&&("inherit"==r.style?(w.attr("style",n(t).attr("style")),w.css("display",n(t).css("display"))):w.attr("style",r.style)),b=l.apply(w,[r,t]),it=r.buttonpos==""?"down":r.buttonpos,it=="side"&&b.wrap("<div class='xp-FloatLeft xp-JeditableDivWidth' />"),r.loadurl?(k=setTimeout(function(){b.disabled=!0;e.apply(w,[r.loadtext,r,t])},100),g={},g[r.id]=t.id,n.isFunction(r.loaddata)?n.extend(g,r.loaddata.apply(t,[t.revert,r])):n.extend(g,r.loaddata),n.ajax({type:r.loadtype,url:r.loadurl,data:g,async:!1,success:function(n){window.clearTimeout(k);d=n;b.disabled=!1}})):r.data?(d=r.data,n.isFunction(r.data)&&(d=r.data.apply(t,[t.revert,r]))):d=t.revert,e.apply(w,[d,r,t]),b.attr("name",r.name),c.apply(w,[r,t]),n(t).append(w),s.apply(w,[r,t]),n(":input:visible:enabled:first",w).focus(),r.select&&b.select(),b.keydown(function(n){n.keyCode==27&&(n.preventDefault(),u.apply(w,[r,t]))}),"cancel"==r.onblur?b.blur(function(){k=setTimeout(function(){u.apply(w,[r,t])},500)}):"submit"==r.onblur?b.blur(function(){k=setTimeout(function(){w.submit()},200)}):n.isFunction(r.onblur)?b.blur(function(){r.onblur.apply(t,[b.val(),r])}):b.blur(function(){}),w.submit(function(i){var c,e;if(k&&clearTimeout(k),i.preventDefault(),!1!==v.apply(w,[r,t])&&(n(n(t).parent().get(0)).removeClass("ui-state-error"),!1!==h.apply(w,[r,t])))if(n.isFunction(r.target))c=r.target.apply(t,[b.val(),r]),n(t).html(c),t.editing=!1,f.apply(t,[t.innerHTML,r]),n.trim(n(t).html())?n(t).removeClass(r.emptycontainercss):(n(t).html(r.placeholder),n(t).addClass(r.emptycontainercss));else{e={};e[r.name]=b.val();e[r.id]=t.id;n.isFunction(r.submitdata)?n.extend(e,r.submitdata.apply(t,[t.revert,r])):n.extend(e,r.submitdata);"PUT"==r.method&&(e._method="put");var l=!0,s=n("#"+n(t).attr("id")+"errordiv"),u=n("#"+n(t).attr("id")+"validationdiv");if(u.hide(),r.requiredfield){if(b.val()=="")return l=!1,s.length==0&&(s=n("<div id='"+n(t).attr("id")+"errordiv' style='position:absolute; font-size: 10pt !important;top: 49px;left: 225px; text-transform: none;' />"),n(t).append(s)),s.html("Enter valid input."),s.addClass("errorMsg"),s.show(),!1;s.hide();s.html("");s.removeClass("errorMsg")}l&&r.validateurl!=null&&r.validateurl!=""?(u.length==0&&(u=n("<div id='"+n(t).attr("id")+"validationdiv' class = 'xp-FloatLeft ' style='margin-top:10px'/>"),u.addClass("xp-ErrorMsg"),n(t).append(u)),u.html(""),n.ajax({type:"POST",data:n.toJSON(e),contentType:"application/json; charset=utf-8",dataType:"json",url:r.validateurl,success:function(i){if(i.d=="success")n(t).html(r.indicator),rt(e);else return u.html(""),u.html(i.d),r.errorclass!=""&&u.addClass(r.errorclass),u.show(),!1},error:function(n){o.apply(w,[r,t,n])}})):(n("form",n(t)).hide(),n(t).append(r.indicator),rt(e))}return n(t).attr("title",r.tooltip),!1})))});this.reset=function(i){this.editing&&!1!==y.apply(i,[r,t])&&(n(t).html(t.revert),t.editing=!1,n.trim(n(t).html())?n(t).removeClass(r.emptycontainercss):(n(t).html(r.placeholder),n(t).addClass(r.emptycontainercss)),r.tooltip&&n(t).attr("title",r.tooltip))}})};n.editable={types:{defaults:{element:function(){var t=n('<input type="hidden"><\/input>');return n(this).append(t),t},content:function(t){var i=n("<div/>").html(t).text();n(":input:first",this).val(i)},reset:function(n,t){t.reset(this)},buttons:function(t,i){var o=this,r=n("<div  />"),u,f,e;t.buttondivscss!=""&&r.addClass(t.buttondivscss);t.submit&&(t.submit.match(/>$/)?u=n(t.submit).click(function(){u.attr("type")!="submit"&&o.submit()}):(u=n('<button type="submit" class="ui-primarytabclr ui-tabbuttonstyle  ui-corner-all" style="margin-left:5px; " />'),u.html(t.submit)),r.append(u));t.cancel&&(t.cancel.match(/>$/)?f=n(t.cancel):(f=n('<button type="cancel" class="ui-secondarytabclr ui-tabbuttonstyle  ui-corner-all" style="margin:0px 3px 0px 3px;"  />'),f.html(t.cancel)),r.append(f),n(this).append(r),e=t.buttonpos==""?"down":t.buttonpos,e=="right"&&(r.addClass("xp-FloatRight"),jQuery.browser.msie&&r.addClass("xp-Absolute")),e=="side"&&(r.addClass("xp-FloatLeft"),jQuery.browser.msie&&r.addClass("xp-Absolute")),n(f).click(function(){var r;return r=n.isFunction(n.editable.types[t.type].reset)?n.editable.types[t.type].reset:n.editable.types.defaults.reset,r.apply(o,[t,i]),!1}))}},text:{element:function(t){var i=n('<input autocomplete="off" class="textinput"/>');return t.width!="none"&&i.width(t.width),t.height!="none"&&i.height(t.height),t.maxlength!=-1&&setformfieldsize(i,t.maxlength),i.attr("autocomplete","off"),n(this).append(i),i},plugin:function(t){n.isFunction(n.watermark)&&t.watermark&&n(".textinput",this).watermark(t.watermark)}},textarea:{element:function(t){var i=n("<textarea />");return t.rows?i.attr("rows",t.rows):t.height!="none"&&i.height(t.height),t.cols?i.attr("cols",t.cols):t.width!="none"&&i.width(t.width),t.maxlength!=-1&&setformfieldsize(i,t.maxlength),n(this).append(i),i}},select:{element:function(t){var i,r;return t.clientid!=null?(i=n("<select id='"+t.clientid+"' />"),t.width!="none"&&i.width(t.width),t.height!="none"&&i.height(t.height)):(i=n("<select />"),t.width!="none"&&i.width(t.width),t.height!="none"&&i.height(t.height)),r=n('<label class="xp-CustomLabel xp-FloatLeft"/>'),n(this).append(r),r.append(i),i},content:function(t,i,r){var f,u,e,o;if(String==t.constructor&&t!="")f=n("select",this),n.ajax({url:t,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:n.toJSON(i.submitdata),success:function(datap){var items=datap.d,options,i,key,j,option;eval("var json  = {"+items+"}");options=[];i=1;for(key in u)!n.trim(key)==""?(options[i]=key,i+=1):options[0]=key;for(options=options,j=0;j<options.length;j++)"selected"!=options[j]&&(option=n("<option />").val(options[j]).append(options[j]),f.append(option));f.children().each(function(){(n(this).val()==u.selected||n(this).text()==n.trim(r.revert))&&n(this).attr("selected","selected")});f.width(f.width())}});else{u=t;for(e in u)u.hasOwnProperty(e)&&"selected"!=e&&(o=n("<option />").val(e).append(u[e]),n("select",this).append(o));n("select",this).children().each(function(){(n(this).val()==u.selected||n(this).text()==n.trim(r.revert))&&n(this).attr("selected","selected")})}}}},addInputType:function(t,i){n.editable.types[t]=i}};n.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"",buttonpos:"right",loadtype:"GET",rows:2,cols:50,loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},buttondivscss:"",submitdata:{},ajaxoptions:{},checksingleedit:!0,parentcontainercss:"parenteditablecontainer",emptycontainercss:"xp-EmptyClickToEdit",dateformat:"",errorclass:""}})(jQuery);$.editable.addInputType("checkbox",{element:function(){var n=$('<input type="checkbox">');return $(this).append(n),$(n).click(function(){var t=$(n).attr("checked")?"Yes":"No";$(n).each(function(){this.checked=t})}),n},content:function(n){var r=n=="Yes"?1:0,t=$(":input:first",this),i;$(t).attr("checked",r);i=$(t).attr("checked")?"Yes":"No";$(t).each(function(){this.checked=i})}});$.editable.addInputType("checkboxes",{content:function(n,t){var f=$(this),e=$("<div />").attr("class","xp-Width xp-FloatLeft xp-MarginBottom-5").appendTo(f),i=$("<div>").attr("class","xp-FloatLeft xp-Width").appendTo(e),r,u;t.width!="none"&&i.width(t.width);r={};r.listName=t.submitdata.listname;r.fieldName=t.submitdata.fieldname;r.itemId=t.submitdata.itemid;u={url:"/_layouts/IImpact.Web/jEditableService.asmx/GetCheckboxValues",data:$.toJSON(r),async:!1,success:function(n){var r=n.d,u,f,t;$.each(r,function(n,r){t=$("<div />").attr("class","xp-FloatLeft xp-Width").appendTo(i);u=$("<input />").attr("type","checkbox").attr("text",r.ColName).attr("value",r.ColName).appendTo(t).attr("checked",r.ColValue=="true"?!0:!1);f=$("<span>").attr("text","checkbox").attr("value","checkbox").html(r.ColName).attr("id","checkbox"+n).appendTo(t)});r.length>5&&(i.addClass(" xp-CheckScroll"),i.jScrollPane({verticalDragMinHeight:"60",autoReinitialise:!0}))}};$.xpoint.utils.ajaxCall.call(i,u)},submit:function(){var t=$(this),i=$("input",t),n=[];return $.each(i,function(){var t=$(this);t.is(":checked")&&n.push(t.val())}),$("input",this).val(n.join(", ")),!0}});$.editable.addInputType("radio",{element:function(){var n=$('<input type="hidden">');return $(this).append(n),n},submit:function(){return $("input",this).val($(":radio:checked",this).val()),$(":radio:checked",this).val()==undefined?!1:!0},content:function(data,settings,original){var json,key,button;String==data.constructor?eval("var json = "+data):json=data;for(key in json)json.hasOwnProperty(key)&&"selected"!=key&&(button=key==$.trim(original.revert)?$('<input type="radio" name="button" checked="true" />').val(key):$('<input type="radio" name="button" />').val(key),settings.direction=="horizontal"?($div=$("<div />"),$div.append(button),$div.append(key+"<br>"),$div.attr("style","float:left"),$(this).append($div)):($(this).append(button),$(this).append(key+"<br>")));$(":radio",this).each(function(){($(this).val()==$.trim(original.revert)||$(this).val()==json.selected)&&$(this).each(function(){this.checked=!0})})}});$.editable.addInputType("datepicker",{element:function(n){var t=$("<input>");return n.width!="none"&&t.width(n.width),n.height!="none"&&t.height(n.height),t.attr("autocomplete","off"),$(this).append(t),t},plugin:function(n){var t=this;n.onblur="ignore";$(this).find("input").datepicker({dateFormat:n.dateformat,changeMonth:!0,changeYear:!0}).bind("click",function(){return $(this).datepicker("show"),!1}).bind("dateSelected",function(){$(t).submit()})},formatter:function(n,t){var r=regionalSettings["data-XPUserInputDateFormat"],i;if(r){try{i=$.datepicker.parseDate(r,n.Message)}catch(u){i=$.datepicker.parseDate(t.dateformat,n.Message)}return $.datepicker.formatDate(t.dateformat,i)}return i=$.datepicker.parseDate(t.dateformat,n.Message),$.datepicker.formatDate(t.dateformat,i)}});$.editable.addInputType("richtext",{element:function(n,t){var i=$('<textarea id="'+$(t).attr("id")+'_mce"/>');return n.rows?i.attr("rows",n.rows):i.height(n.height),n.width?i.width(n.width):i.attr("cols",n.cols),$(this).append(i),i},plugin:function(n,t){$("#"+$(t).attr("id")+"_mce").val(t.revert);$("#"+$(t).attr("id")+"_mce").RelayRichText(t.revert)},submit:function(n,t){tinyMCE.triggerSave();tinymce.remove("#"+$(t).attr("id")+"_mce")},reset:function(n,t){tinymce.remove("#"+$(t).attr("id")+"_mce");t.reset()},formatter:function(n,t){t.values=n.Message;$(this).html(decodeHtml(n.Message))}});$.editable.addInputType("charcounter",{element:function(n){n.buttondivscss="xp-EditableButtons xpLeft";var t=$('<textarea class="xp-TxtBox"/>');return n.rows?t.attr("rows",n.rows):t.height(n.height),n.cols?t.attr("cols",n.cols):t.width(n.width),$(this).append(t),t},plugin:function(n){$("textarea",this).charCounter(n.charcounter.characters,n.charcounter)}});$.editable.addInputType("masked",{element:function(n){var t=$("<input />").mask(n.mask);return $(this).append(t),t}});$.editable.addInputType("peopleselect",{element:function(n){if(n.clientid!=null)var t=$("<select id='"+n.clientid+"' />");else t=$("<select />");return n.width!="none"&&t.width(n.width),n.height!="none"&&t.height(n.height),$(this).append(t),t},content:function(n,t){var r,u,i;r=String==n.constructor?n:n;input=$("select",this);u=$("<option />").val("0").append("Loading...");input.append(u);i={};i.reffieldname=t.reffieldname;i=$.extend(i,t.submitdata);$.ajax({url:t.getpeople,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:$.toJSON(i),success:function(n){var t=n.d,i;input.children().remove();t.length>0?($.each(t,function(){var n=$("<option />").val(this.value).append(this.text);this.text==r&&n.attr("selected","selected");input.append(n)}),input.val(r)):(i=$("<option />").val(0).append("Enter Team Members"),input.append(i))}})},formatter:function(n,t){t.values=n.Message;var i="";return $.each(t.values.split(","),function(){var n=this,t;n!=null&&$.trim(n).length!=0&&(t=n.split("!")[1],i+="<div  width='100%'>"+t+"<\/div>")}),i}});$.editable.addInputType("peoplepicker",{element:function(n){n.requiredfield=!0;var i=$('<input type="hidden" />'),t=$('<input autocomplete="off" class="peoplepickerinput">');return n.width!="none"&&t.width(n.width),n.height!="none"&&t.height(n.height),t.attr("autocomplete","off"),$(this).append(t),t},plugin:function(n){var t={},i=0,r;n.values!=""&&$.each(n.values.split(","),function(){var n=this,r,u;n!=null&&$.trim(n).length!=0&&(r=n.split("!")[0],u=n.split("!")[1],r!=null&&u!=null&&(t[i]={id:r,name:u},i++))});r=n.width!="none"?n.width:250;$(".peoplepickerinput",this).peoplepicker({multiple:n.multivalued,prePopulate:t,width:r})},submit:function(n){var t=$(".peoplepickerinput",this).val();n.multivalued?$("input",this).val(t).hide():$("input",this).val(t)},formatter:function(n,t){t.values=n.Message;var i="";return $.each(t.values.split(","),function(){var n=this,t;n!=null&&$.trim(n).length!=0&&(t=n.split("!")[1],i+="<div  width='100%'>"+t+"<\/div>")}),i}});$.editable.addInputType("concatenated",{element:function(n){var i=$("<input autocomplete='off' type='text' class='firstinput'>"),r=$("<input autocomplete='off' type='text' class='secondinput'>"),u=$('<input type="hidden" />'),t;return setformfieldsize(i,n.maxlength),setformfieldsize(r,n.maxlength),n.values!=""&&(t=n.values.split(","),t[0]!=null&&i.val(t[0]),t[1]!=null&&r.val(t[1])),$(this).append(u),$(this).append(i),$(this).append(r),u},plugin:function(n){$.isFunction($.watermark)&&(n.firstwatermark&&$(".firstinput",this).watermark(n.firstwatermark),n.secondwatermark&&$(".secondinput",this).watermark(n.secondwatermark))},submit:function(){var n=$(".firstinput",this).val()+","+$(".secondinput",this).val();$("input[type='hidden']",this).val(n)},formatter:function(n,t){return t.values=n.Message,t.values.split(",").length>0?t.values.split(",")[0]+" "+t.values.split(",")[1]:n.Message}});$.editable.addInputType("peopleSuggest",{element:function(n,t){var r=$(t).attr("id")+"_peopleSuggest",i=$("<input type='text'  autocomplete='off'/>").attr("id",r).hide();return $(this).append(i),i},plugin:function(settings,original){var id=$(original).attr("id")+"_peopleSuggest",elem=$("#"+id).val("").show(),prefillVls=[{Name:"",FormattedVal:""}],suggestOpts;return $.trim(settings.suggestVal)&&(prefillVls=eval("("+settings.suggestVal+")")),suggestOpts=$.extend({profilePrefixUrl:"",startText:"",asHtmlID:id,singleEntry:!1,url:"/_vti_bin/xpointbase/ProfileService.svc/Users",preFill:prefillVls,selectedItemProp:"Name",showItemProp:"FormattedHtml",searchObjProps:"Name",selectedValuesProp:"FormattedVal",retrieveComplete:function(n){return $.parseJSON(n.GetUsersResult)}},settings.suggestOpts),elem.autoSuggest(suggestOpts.url,suggestOpts),original},submit:function(n,t){var i=$(t).attr("id")+"_peopleSuggest",u=$("#as-values-"+i),r=$("#"+i),f=u.val()+r.val();r.val(f)},formatter:function(n,t){t.suggestVal=n.Message;var r=$.parseJSON(n.Message),i=[];return r!=null?($(r).each(function(){var n=this;n&&(n.Id>0&&n.EncodedLoginName!=null?i.push("<a href='"+t.suggestOpts.profilePrefixUrl+n.EncodedLoginName+"'>"+n.Name+"<\/a>"):i.push(n.Name))}),i.join(",")):""}}),function(n){n.fn.MakeEditableBlank=function(t){var i=n.extend({},t);return this.each(function(){var t=n(this)[0];n.isFunction(t.MakeEmpty)&&t.MakeEmpty()})}}($);
/*
//# sourceMappingURL=jquery.jeditable.min.js.map
*/