(function(n){n.fn.NotifyMe=function(t){function h(){n.ajax({url:i.AddNotificationUrl,contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",data:"{ componentname: '"+i.componentname+"' ,uniqueid: '"+i.uniqueid+"',isonline:'"+n("#"+r.popupcheckboxid).attr("checked")+"',offline:'"+n("#"+r.popupddlid).val()+"',configid:'"+i.configid+"'}",success:function(n){i.configid=n.d.configId;var t=n.d.status;i.offline=n.d.offline;i.isonline=n.d.isonline;t&&(s(),c())}})}function c(){n("#"+r.imgid).remove();var t="<img id='"+r.removeimgid+"' src='/_layouts/Images/XpointBase/"+f.removenotifymeImage+"' alt='"+o()+"' title='"+o()+"' style='cursor:pointer'/>";n("#"+u).append(t);n("#removenotification").length>0&&n("#removenotification").click(function(){p()})}function y(){n.ajax({url:i.RemovenotificationUrl,contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",data:"{ configId: '"+i.configid+"', isonline: '"+n("#"+r.popupcheckboxid).attr("checked")+"',offline:'"+n("#"+r.popupddlid).val()+"',componentname:'"+i.componentname+"',uniqueid:'"+i.uniqueid+"'}",success:function(t){var u=t.d;u&&(i.configid=u.configId,i.offline=u.offline,i.isonline=u.isonline,i.isonline||i.offline!="None"?(s(),n("#"+r.removeimgid).attr("alt",o()),n("#"+r.removeimgid).attr("title",o())):(s(),n("#"+r.removeimgid).remove(),l()))}})}function s(){n("#"+r.popupdialogid).dialog("close")}function p(){n("#"+r.popupdialogid).dialog("open")}function w(){var f,o,s;f=n("<div />");f.attr("id",r.popupdialogid);o=n("<div />");s=n("<p id='"+r.popupdialogerrorid+"' class='xp-ErrorMsg'><b><\/b><\/p>");s.hide();o.append(s);var h=n("<div />"),e="",t="";return e+="<div>",e+="Online (In-System)<input type=checkbox id="+r.popupcheckboxid,i.isonline=="true"&&(e+=" checked "),e+=" />",e+="<\/div>",t+="<div>",t+="Offline (Email)<select id="+r.popupddlid+">",n.each(a,function(){t+="<option value="+this.value+"";i.offline==this.text&&(t+=" selected ");t+=">"+this.text+"<\/option>"}),t+="<\/select>",t+="<\/div>",f.append(o),f.append(e),f.append(t),n("#"+u).append(f),f}function b(){var t=w();t.attr("title","Notify Me");t.dialog({bgiframe:!0,autoOpen:!1,width:450,modal:!0,buttons:{Submit:function(){i.configid==0?h():y()},Cancel:function(){n(this).dialog("close")}}})}function l(){var t="";i.configid!=0?c():(t="<img id='"+r.imgid+"' src='/_layouts/Images/XpointBase/forum_Notifyme.png' alt='Subscribe' title='Subscribe' style='cursor:pointer'/>",n("#"+u).append(t),n("#"+r.imgid).click(function(){n("#"+r.popupdialogid).dialog("open")}))}function o(){var n="";return i.isonline&&(n+="Online"),i.offline!="None"&&(n.length>0&&(n+=","),n+=i.offline+" email"),n}var i=n.extend({componentname:"",AddNotificationUrl:"/_layouts/IImpact.Web/NotifyMeService.asmx/AddNotification",uniqueid:"",isnotifymepresent:!1,frequency:"",RemovenotificationUrl:"/_layouts/IImpact.Web/NotifyMeService.asmx/ModifyNotification",configid:"",isonline:!1,offline:""},t),r={imgid:"menufive",ulid:"menufivelist",removeimgid:"removenotification",popupdialogid:"notifymepopupid",popupdialogerrorid:"nofitymepopupdialogerrorid",popupcheckboxid:"notifymepopupcheckboxid",popupddlid:"notifymepopupddlid"},a=[{text:"None",value:"None"},{text:"Immediate",value:"Immediate"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"},{text:"Monthly",value:"Monthly"}],e={alertme:"alertme"},u="",f={immediate:"Immediate",daily:"Daily",weekly:"Weekly",monthly:"Monthly",lcnotifymeImage:"",removenotifymeImage:"edit_notification.png",baseimageurl:"/_layouts/Images/XpointBase/",lcremoveimmediateImage:"edit_notification.png"};return this.each(function(){var t=n(this);u=t.attr("id");b();l()})}})(jQuery);
/*
//# sourceMappingURL=xpoint.notifyme.min.js.map
*/