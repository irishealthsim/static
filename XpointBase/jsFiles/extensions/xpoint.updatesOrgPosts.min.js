var orgPostIds={orgMainContainer:"orgMainContainer",markAsReadContainer:"markAsReadContainer",mainDiv:"mainDiv",profilePicDiv:"profilePicDiv",profileUrl:"profileUrl",postDescriptionDiv:"postDescriptionDiv",descriptionTopDiv:"descriptionTopDiv",orgPostDescription:"orgPostDescription",descriptionBottomDiv:"descriptionBottomDiv",descriptionArea:"descriptionArea",duration:"duration",clockIcon:"clockIcon",markAsReadIcon:"markAsReadIcon",profilePic:"profilePic"},orgPostPaths={getOrganizationPosts:"/_vti_bin/XPointBase/OrganizationPostsService.svc/getUnreadPosts",markPostAsRead:"/_vti_bin/XPointBase/OrganizationPostsService.svc/MarkPostAsRead"},orgPostCSS={markAsReadContainer:"xp-FloatLeft xp-Width xp-BorderBottomGray xp_newHighlight",orgMainContainer:"xp-FloatLeft xp-Width",markAsReadDiv:"xp-MarkRead xp-FloatLeft xp-Padding-2 xp-HoverCursor Tip-HPUpdatesMarkRead"},updatesOrganizationPostMethods={getOrgData:function(n){var i=this,t={success:function(n){var t=n.GetUnreadPostsResult;$.each(t,function(){var n=this;updatesOrganizationPostMethods.getOrgPostHtml.call(i,n,t)})},type:"GET",url:orgPostPaths.getOrganizationPosts};t=$.extend(t,n.ajaxOpts);$.xpointTemplates.methods.ajaxCall.call(this,t)},getOrgPostHtml:function(n){var c=this,t=n,i=new Date(parseInt(t.CreatedDate.substr(6))),nt=i.toUTCString().substr(0,i.toUTCString().lastIndexOf("UTC")),l=$("<div />").attr("id",orgPostIds.markAsReadContainer).attr("class",$.xpointTemplates.classes.markAsReadContainer).appendTo(c),r=$("<div />").attr("id",orgPostIds.mainDiv).attr("class",$.xpointTemplates.classes.mainDiv);r.appendTo(l);var a=$("<div />").attr("id",orgPostIds.profilePicDiv).attr("class",$.xpointTemplates.classes.profilePicDiv).appendTo(r),tt=$("<img width='42px'/>").attr("id",orgPostIds.profilePic).attr("src",t.CreatedBy.PictureUrl).attr("alt","Unable to display user profile pic").appendTo(a),v=$("<div />").attr("id",orgPostIds.postDescriptionDiv).attr("class",$.xpointTemplates.classes.postDescriptionDiv).appendTo(r),y=$("<div />").attr("id",orgPostIds.descriptionTopDiv).attr("class",$.xpointTemplates.classes.descriptionTopDiv).appendTo(v),u=$("<div />").attr("id",orgPostIds.orgPostDescription).appendTo(y),f=$("<a>"+t.CreatedBy.DisplayName+"<\/a>").attr("href",t.CreatedBy.ProfileUrl).attr("class",$.xpointTemplates.classes.link+" Tip-HPUpdatesUsername").appendTo(u),f=t.CreatedBy.ProfileUrl,p=f.slice(0,f.lastIndexOf("/")),w=p+"/OrganizationPost.aspx?PostID="+t.Id;u.append(" made a post for Organization - <a href="+w+">"+t.Description+"<\/a>");var e=$("<div />").attr("class",$.xpointTemplates.classes.descriptionBottomDiv).attr("id",orgPostIds.descriptionBottomDiv).appendTo(u),o=$("<div />").attr("class",$.xpointTemplates.classes.durationDiv).appendTo(e),it=$("<div />").attr("id",orgPostIds.descriptionArea).attr("class",$.xpointTemplates.classes.descriptionArea),rt=$("<div />").attr("id",orgPostIds.clockIcon).attr("class",$.xpointTemplates.classes.clockIcon).appendTo(o),b=new Date(parseInt(n.CreatedDate.substr(6))),k=$.xpointTemplates.methods.formatDate(b),d=$("<div >"+$.timeago(i)+"<\/div>").attr("class",$.xpointTemplates.classes.duration+" Tip-HPTimeStamp").hover(function(){s.removeClass($.xpointTemplates.classes.displayNone)},function(){s.addClass($.xpointTemplates.classes.displayNone)}).appendTo(o),g=$("<div />").attr("class",$.xpointTemplates.classes.showDate).attr("style","height:1px").appendTo(d),s=$("<div />").attr("class",$.xpointTemplates.classes.dateDiv).attr("style","width:135px").append(k).appendTo(g),h=$("<div />").attr("class",$.xpointTemplates.classes.markAsDiv).appendTo(e),ut=$("<div />").attr("id",orgPostIds.markAsReadIcon).attr("class",$.xpointTemplates.classes.markAsReadIcon).appendTo(h),ft=$("<div />").attr("class",orgPostCSS.markAsReadDiv).append("Mark As Read").appendTo(h).click(function(n){var r=$(this),u={url:orgPostPaths.markPostAsRead,cache:!1,data:'{"postId":'+t.Id+"}"};$.xpointTemplates.methods.ajaxCall.call(this,u);var i=r.parent().parent().parent().parent().parent().parent().parent(),f=i.parent(),e=i.parent().children().length;e==1?f.remove():i.remove();n.preventDefault()})}};$.xpointTemplates.preContainers.push(function(n){var t=this,i=$("<div />").attr("id",orgPostIds.orgMainContainer).attr("class",orgPostCSS.orgMainContainer).appendTo(t);updatesOrganizationPostMethods.getOrgData.call(i,n)});
/*
//# sourceMappingURL=xpoint.updatesOrgPosts.min.js.map
*/