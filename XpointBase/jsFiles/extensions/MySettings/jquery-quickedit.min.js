(function(n){n.quickEdit={defaults:{prefix:"[qe=?]",oldvalue:"",blur:!1,autosubmit:!0,checkold:!0,space:!1,maxlength:!1,showbtn:!0,submit:function(){},"class":"",cancel:function(){},tmpl:'<span qe="scope"><span><input type="text" qe="input" class="form-control"/><\/span><span><button qe="submit" >Okey<\/button><button qe="cancel">Cancel<\/button><\/span><\/span>'},init:function(t,i){if(this.check(t,i))return this.options=n.extend({},this.defaults,i),this.dom=t.hide(),this.create(),this.initEvent(),this.quickEdit},check:function(n){if(this.quickEdit)if(this.options.blur)this.options.autosubmit&&this.submit()||this.cancel();else{this.hook=n;return}return!0},select:function(n){return this.options.prefix.replace("?",n)},create:function(){var i=this.options.oldvalue,t;i.length||(i=this.dom.text());t=n(this.options.tmpl).eq(0);t.find(this.select("input")).val(i);t.find(this.select("input")).addClass(this.options.class);this.options.showbtn||(this.options.blur=!0,this.options.autosubmit=!0,t.find(this.select("submit")).remove(),t.find(this.select("cancel")).remove());this.quickEdit=t},submit:function(){var t=this,i=t.options,r=n.trim(n(this.select("input"),t.quickEdit).val());(r.length||i.space)&&(r!=i.oldvalue||!i.checkold)?n.isFunction(i.submit)&&i.submit(t.dom,r)!==!1&&t.cancel(!0):t.cancel()},cancel:function(t){var i=this,r;i.quickEdit&&(r=function(){i.quickEdit.remove();i.quickEdit=undefined;i.dom.show();i.hook&&(i.hook.trigger("click"),i.hook=undefined)},!t&&n.isFunction(this.options.cancel)?this.options.cancel(this.dom)!==!1&&this.quickEdit&&r():r())},initEvent:function(){var t=this,i=t.quickEdit;i.off("click.qe");i.on("click.qe",t.select("submit"),function(n){t.submit();n.stopPropagation()});i.on("click.qe",t.select("cancel"),function(n){t.cancel();n.stopPropagation()});i.on("click.qe",t.select("input"),function(n){n.stopPropagation()});i.off("keydown.edit").on("keydown.edit",t.select("input"),function(i){if(i.keyCode==13)return t.submit(),!1;t.options.maxlength&&n(this).val().length>t.options.maxlength&&n(this).val(n(this).val().substr(0,t.options.maxlength))});n(document).off("click.qe").on("click.qe",function(i){i.target==t.dom.get(0)||n(i.target).is(t.select("scope"))||n(i.target).parents(t.select("scope")).length||t.options.blur&&(t.options.autosubmit&&t.submit()||t.cancel())})}};n.fn.quickEdit=function(t,i){if(typeof t=="string")switch(t){case"submit":n.quickEdit.submit();break;case"cancel":n.quickEdit.cancel();break;case"create":return n.quickEdit.init(n(this),i)}else n(this).on("click",function(){var i=n.quickEdit.init(n(this),t);i&&(n(this).after(i),n("input",i)[0].select())})}})(jQuery);
/*
//# sourceMappingURL=jquery-quickedit.min.js.map
*/