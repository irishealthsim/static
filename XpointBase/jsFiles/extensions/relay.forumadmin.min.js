(function(n){n.fn.extend({hackedSlideUp:function(t){t||(t="slow");var i=n(this);n("a",i).hide();i.slideUp(t,function(){n("a",i).hide()})},hackedSlideDown:function(t){t||(t="slow");var i=n(this);i.slideDown(t,function(){n("a",i).show()})}});n.fn.forumadmin=function(t){function l(n){i.addPanel+=n;i.linkPanel+=n;i.addCategoryLink+=n;i.addCategoryPanel+=n;i.dataListPanel+=n;i.confirmPanel+=n}function a(){var t='<div id="'+i.confirmPanel+'" title="Confirmation" style="display:none"><p><span class="ui-icon ui-icon-alert xp-FloatLeft" style="margin:0 7px 0 0;"><\/span><span class="messagespan"><\/span><\/p><\/div>';n("body").append(t)}function s(r,u){var f=n("#"+i.confirmPanel);f.dialog("destroy");n(".messagespan",f).html(r);f.dialog({autoOpen:!0,resizable:!1,modal:!0,buttons:{Delete:function(){u?eval(u):window.location=t.currentlink},Cancel:function(){n(this).dialog("close")}}})}function v(t){var i=n("<div class='xp-Width xp-FloatLeft' />").css({"padding-bottom":"0px"}).append("<div class='xp-DivHeader xp-FloatLeft xp-Padding-8'><span class='xp-FloatLeft Tip-FMManagerHeader'>Forum Categories<\/span><\/div>");t.append(i)}function y(t){var r=n("<div id='"+i.linkPanel+"' />"),u;r.addClass("xp-FloatLeft xp-Width");r.css({padding:"8px 0px 8px 4px"});u=n("<a href='#' id='"+i.addCategoryLink+"' class='ui-primarytabclr Tip-FMAddCategory ui-tabbuttonstyle ui-corner-all xp-TabLink'>"+e.addCategoryLabel+"<\/a>");r.append(u).appendTo(t);u.click(function(){var t=n("#"+i.addCategoryPanel);t.hackedSlideDown(1e3)})}function p(t){var r=n("<div id='"+i.addCategoryPanel+"' class='xp-ClearBoth xp-LeftLargeWidth xp-FloatLeft ui-corner-all xp-OuterPanel xp-BoxShadow'/>").css({display:"none",padding:"10px","border-left":"0px","border-top":"0px"}).append("<div style='margin:auto;' class='xp-Width60'><div class='alertdiv xp-ErrorMsg' style='display:none' /><\/div>"),u=n("<div class='xp-FloatLeft xp-Width'/>").css({padding:"8px 0px"}),p=n("<div class='xp-Font xp-FloatLeft' />").css({width:"100px"}).append("<b>Category<\/b><span class='xp-Error'>*<\/span>"),s,f,c,o;u.append(p);s=n("<div class='xp-FloatLeft xp-Width50 xp-CategoryContainer'/>").append("<input type='text' autocomplete='off' class='counter addCategorytext xp-TxtBox xp-Width90 ' maxlength=30/>");u.append(s);f=n("<div class='xp-FloatRight'/>");c=n("<a href='#' class='xp-CloseThick xp-DisplayBlock xp-Padding-2 '><span class='ui-icon ui-icon-closethick'><\/span><\/a>").click(function(){n("input",r).val("");var t=n(".alertdiv",r);t.empty().hide();n(".addSubCategoryPanel:gt(0)",r).remove();r.hackedSlideUp(1e3)});f.append(c);u.append(f);u.append("<div class='xp-ClearBoth xp-Error' style='font-size:8pt;padding-top:5px;'>There should be atleast one subcategory<\/div>");r.append(u).appendTo(t);o=n("<div />").appendTo(r);h(o);var l=n("<div class='xp-ClearBoth' style='padding:8px 8px' />").append("<div class='xp-FloatLeft' style='width:1%;'>&nbsp;<\/div>"),k=n("<div class='xp-FloatLeft'/>"),a=n("<a href='#' class='ui-secondarytabclr ui-tabbuttonstyle ui-corner-all xp-TabLink' style='text-decoration:none'>"+e.addSubCategoryLabel+"<\/a>");a.click(function(){h(o)});k.append(a).appendTo(l);l.appendTo(r);var v=n("<div class='xp-BtnMaindiv' align='center'/>").appendTo(r),y=n("<div class='xp-BtnDiv'><a href='#' class='ui-primarytabclr ui-tabbuttonstyle' style='text-decoration:none'>Add<\/a><\/div>").appendTo(v),d=n("<div class='xp-BtnDiv'><a href='#' class='ui-secondarytabclr ui-tabbuttonstyle' style='text-decoration:none'>Cancel<\/a><\/div>").appendTo(v).click(function(){var t=n("input",r),i=n(".alertdiv",r);i.empty().hide();t.val("");t.trigger("keypress");n(".addSubCategoryPanel:gt(0)",r).remove();r.hackedSlideUp(1e3)});y.click(function(){if(b(y)==!0){var e=n(".addCategorytext",r).val().replace("'","\\'"),u=[],f;n.each(n(".addSubCategory",r),function(t){var r=n(this).val().replace("'","\\'"),e;if(r.length>0){if(u.length>0&&n.each(u,function(n){u[n]==r&&(f=!0)}),f){e=n(".alertdiv",n("#"+i.addCategoryPanel));e.html("SubCategory Name should be Unique");e.show();return}u[t]=r}});f||w(e,u,t)}})}function w(t,f){var e=n("#"+i.addCategoryPanel);n.ajax({url:r.addurl,contentType:"application/json; charset=utf-8",type:"post",dateType:"json",data:"{category:'"+t+"',subcategory:'"+f+"'}",success:function(t){var r=t.d,f,o;r==undefined&&(r=n.evalJSON(t).d);r.status=="success"?(f=n("input",e),f.val(""),f.trigger("keypress"),e.hackedSlideUp(1e3),n(".addSubCategoryPanel:gt(0)",e).remove(),u()):(o=n(".alertdiv",n("#"+i.addCategoryPanel)),o.html(r.message),o.show())},error:function(){}})}function h(n){var t="<div class='addSubCategoryPanel xp-Font xp-Width xp-FloatLeft' style='padding:8px 0px;' >";t+="<div class='xp-FloatLeft' style='width:100px;height:18px;line-height:18px' ><b>Sub Category<\/b><\/div>";t+="<div class='xp-FloatLeft xp-Width50 xp-CategoryContainer' ><input type='text' autocomplete='off' class='counter addSubCategory xp-TxtBox xp-Width90' maxlength=60 ><\/input><\/div>";t+="<\/div>";n.append(t)}function u(){var t=o;t.empty();n.ajax({url:r.geturl,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{}",success:function(n){nt(n.d,t)},error:function(){}})}function b(t){var u=n(t.parents("#"+i.addCategoryPanel)),r=n(".alertdiv",u),f,e;if(r.empty().hide(),f=n(".addCategorytext",u),f.val().length>0)if(e=n(".addSubCategory",u).filter(function(){var t=n(this);return t.val().length>0}),e.length==0)r.html("Please enter a subcategory"),r.show();else return!0;else r.show(),r.html("Please enter category");return!1}function f(t,i){var r=n(n(t).parents(".rowContainer")).removeClass("xp-CustomBgClr xp-CustomBorderClr"),u=n(".rowLabel",r),f=n(".alertdiv",r).empty().hide();u.empty();u.html(i);var e=n(".addLink",r).length>0?n(".addLink",r).show():"",o=n(".editLink",r).show(),s=n(".saveLink",r).remove(),h=n(".deleteLink",r).show(),c=n(".cancelLink",r).remove();n(".deleteSubCatDiv",r).show()}function c(t,i,r,u){var e=n(n(t).parents(".rowContainer")).addClass("xp-CustomBgClr xp-CustomBorderClr"),o=n(".rowLabel",e),s=o.html();o.empty();o.append("<input type='text' autocomplete='off' size=47 maxlength="+u+" editid='"+r+"' edittype='"+t.attr("edittype")+"' class='counter labeltext xp-TxtBox' value='"+s+"'/>");n("input[editid="+r+"][edittype="+t.attr("edittype")+"]").val(s);var y=n(".addLink",e).length>0?n(".addLink",e).hide():"",h=n(".editLink",e).hide(),a=n("<a href='#' class='saveLink editLink ui-primarytabclr ui-tabbuttonstyle' edittype='"+h.attr("edittype")+"'>Save<\/a>").appendTo(n(h.parent()));a.click(function(){eval(i)});var c=n(".deleteLink",e).hide(),v=n(".deleteSubCatDiv",e),l=n("<a href='#' class='cancelLink editLink ui-secondarytabclr ui-tabbuttonstyle'>Cancel<\/a>").appendTo(c.length>0?n(c.parent()):v.show());l.click(function(){f(l,s)})}function k(t,i){var e=n("<div class='newsubCategoryPanel xp-HightlightRow xp-CustomBgClr xp-CustomBorderClr xp-ClearBoth xp-Width xp-FloatLeft' style='display:none;padding:0px 8px 2px 8px' />").append("<div class='alertdiv xp-ErrorMsg' style='display:none' /><div class='xp-ClearBoth' style='width:2%;height:4px'><\/div><div class='xp-FloatLeft' style='width:100px'>Sub Category<\/div>").append("<div class='xp-FloatLeft xp-SubCategryInput xp-Width43 xp-MarginTop-3  '><input maxlength='60' autocomplete='off' class='counter xp-TxtBox xp-Width99 '   /><\/div>").appendTo(t),f=n("<div  class='xp-ActionBtnsDiv xp-MarginTop-3' style='width:31%'/>").appendTo(e),o=n("<div class='xp-ActionBtn' />").appendTo(f),c=n("<a href='#' class='addLink ui-primarytabclr ui-tabbuttonstyle'>Save<\/a>").appendTo(o).click(function(){var t=n(n(this).parents(".newsubCategoryPanel")),f;subCategoryText=n("input",t).val().replace("'","\\'");f=n(".alertdiv",t).empty().hide();n.trim(subCategoryText).length==0?f.html("Cannot add empty subcategory.").show():n.ajax({url:r.addsubcategoryurl,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{'categoryid':'"+i+"','subcategory':'"+subCategoryText+"'}",success:function(i){var r=i.d;r.status=="success"?(n("input",t).val(""),u(),t.hackedSlideUp(1e3)):f.html(r.message).show()},error:function(){}})}),s=n("<div class='xp-ActionBtn' />").appendTo(f),h=n("<a href='#' class='editLink ui-secondarytabclr ui-tabbuttonstyle' edittype='category'>Cancel<\/a>").appendTo(s);h.click(function(){var t=n(n(this).parents(".newsubCategoryPanel")),i=n("input",t);i.val("");i.trigger("keypress");t.hackedSlideUp(1e3)})}function d(t,i){var u=n("<div  class='rowContainer xp-CatRowContainer'/>").appendTo(i),l=n("<div class='alertdiv xp-ErrorMsg' style='display:none' /><div class='rowLabel xp-FloatLeft'/>").append(t.Name),o,h;u.append(l);var f=n("<div  class='xp-ActionBtnsDiv' style='width:31%;' />").appendTo(u),a=n("<div class='xp-ActionBtn' />").appendTo(f),y=n("<a href='#' class='addLink Tip-FMAddLink'>Add<\/a>").appendTo(a).click(function(){var t=n(this).parents(".rowContainer");n(".newsubCategoryPanel",t).hackedSlideDown(1e3)}),v=n("<div class='xp-ActionBtn' />").appendTo(f),e=n("<a href='#' class='editLink Tip-FMEditLink' edittype='category'>Edit<\/a>").appendTo(v);e.click(function(){c(e,"saveCategory(editLink)",t.Id,30)});o=n("<div class='xp-ActionBtn' />").appendTo(f);h=n("<a href='#' class='deleteLink Tip-FMDeleteLink' deltype='category'>Delete<\/a>").appendTo(o);h.click(function(){s("This will cause all the discussions under this category to be deleted.<br/><br/> Are you sure you want to delete ?","deleteItem('"+r.deletecaturl+"','"+t.Id+"')")});k(u,t.Id)}function g(t,i){var u=n("<div class='rowContainer xp-SubCatRowContainer'/>").appendTo(i),e,l,f;u.append("<div class='alertdiv xp-ErrorMsg' style='display:none' /><div class='xp-FloatLeft' style='width:2%'>&nbsp;<\/div>");e=n("<div  class='rowLabel xp-FloatLeft' style='width:68%' />").append(t.Name);u.append(e);var o=n("<div  class='xp-ActionBtnsDiv' style='width:30%;'/>").appendTo(u),a=n("<div class='xp-ActionBtn' />").appendTo(o),h=n("<a href='#' class='editLink Tip-FMEditSubCat' edittype='subcategory'>Edit<\/a>").appendTo(a);h.click(function(){c(h,"saveSubCategory(editLink)",t.Id,60)});l=n("<div class='deleteSubCatDiv xp-ActionBtn' />").appendTo(o);t.AllowDelete&&(f=n("<a href='#' class='deleteLink Tip-FMDeleteSubCat ' id='subcatDelete"+t.Id+"' deltype='subcategory'>Delete<\/a>"),f.appendTo(l),f.click(function(){s("This will cause all the discussions under this subcategory to be deleted.<br/><br/> Are you sure you want to delete ?","deleteItem('"+r.deletesubcaturl+"','"+t.Id+"')")}))}function nt(t,i){i.empty();t==null?i.html("No categories added"):(n.each(t,function(r){var u=t[r];d(u,i);n.each(u.SubCats,function(n){var t=u.SubCats[n];g(t,i)})}),i.append(""))}var i={addPanel:"addContainer",linkPanel:"links",addCategoryLink:"addCategoryLink",addCategoryPanel:"addCategoryPanel",dataListPanel:"dataListPanel",confirmPanel:"confirmPanel"},e={addCategoryLabel:"Add",addSubCategoryLabel:"Add More"},r=n.extend({geturl:"/_layouts/IImpact.Web/ForumService.asmx/GetAllCategory",deletecaturl:"/_layouts/IImpact.Web/ForumService.asmx/DeleteCategory",deletesubcaturl:"/_layouts/IImpact.Web/ForumService.asmx/DeleteSubCategory",addurl:"/_layouts/IImpact.Web/ForumService.asmx/AddCategory",addsubcategoryurl:"/_layouts/IImpact.Web/ForumService.asmx/AddSubCategory",editcategoryurl:"/_layouts/IImpact.Web/ForumService.asmx/EditCategory",editsubcategoryurl:"/_layouts/IImpact.Web/ForumService.asmx/EditSubCategory",headerimageurl:"xp-IconForums xp-Icon"},t),o;return this.opts=r,this.each(function(){var t=n(this);t.addClass("xp-Overflowhidden xp-FloatLeft");t.css({width:"80%"});l(t.attr("id"));a();v(t);y(t);p(t);o=n("<div class='xp-Font xp-DataListPanel xp-OuterPanel ui-corner-all xp-BoxShadow' id='dataListPanel'/>").appendTo(t);u();n(".counter").livequery(function(){var t=n(this);t.charCounter(t.attr("maxlength"))})})}})(jQuery);
/*
//# sourceMappingURL=relay.forumadmin.min.js.map
*/