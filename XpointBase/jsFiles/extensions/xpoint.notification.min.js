(function(n){n.notification=n.notifcation||{};n.fn.notification=function(t){var r,i;if(this&&this.length!=0)return typeof t=="object"&&(r=n(this),t=n.extend({},n.notification.defaults,t),r.notifyOpts=t,n.notification.methods.init.apply(this,n.makeArray(t))),n.notification.methods[t]?(i=r.notifyOpts,i=n.extend(i,Array.prototype.slice.call(arguments,1)),n.notification.methods[t].apply(this,n.makeArray(i))):void 0};n.notification={defaults:{paths:{addAlertsUrl:"/_layouts/IImpact.Web/NotificationService.asmx/AddAlert",removeAlertsUrl:"/_layouts/IImpact.Web/NotificationService.asmx/RemoveAlert"},cssClass:{unSubscribeImage:"xp-Icon-Highlight xp-IconSub",subscribeImage:"xp-Icon-Highlight  xp-IconUnSub"}},ids:{notificationImage:"notification"},methods:{init:function(t){var i=n(this);n.notification.methods.createHtml.apply(i,n.makeArray(t));n("#"+n.notification.ids.notificationImage).click(function(){n.notification.methods.toggleSubscription.apply(this,n.makeArray(t))})},toggleImg:function(t,i,r){var u,f;t==null&&(t=n("#"+n.notification.ids.notificationImage));u=r.cssClass.unSubscribeImage;f="Subscribe";i===!0&&(u=r.cssClass.subscribeImage,f="UnSubscribe");t.attr("class",u).attr("title",f)},createHtml:function(t){var i=n(this),r;t.subscribePermissionValue==0?r=n("<div id='"+n.notification.ids.notificationImage+"' class='"+t.cssClass.unSubscribeImage+"' style='cursor:pointer'/>").appendTo(i):t.subscribePermissionValue==1&&(r=n("<div id='"+n.notification.ids.notificationImage+"' class='"+t.cssClass.subscribeImage+"' style='cursor:pointer'/>").appendTo(i))},toggleSubscription:function(t){t.alertAdded===!0?n.notification.methods.unSubscribe.apply(this,n.makeArray(t)):n.notification.methods.subscribe.apply(this,n.makeArray(t))},subscribe:function(t){var r=n(this).attr("class"),i;i=r==t.cssClass.subscribeImage?0:1;n.ajax({url:"/_layouts/IImpact.Web/LCNotificationService.asmx/AddSubscription",contentType:"application/json; charset=utf-8",dataType:"json",data:"{ permissionValue:'"+i+"', TrackerID:'"+t.TrackerID+"'}",type:"POST",success:function(i){var f=i.d,r,u;f=="success"&&(r=n("#"+n.notification.ids.notificationImage),u=r.attr("class"),u==t.cssClass.subscribeImage?r.attr("class",t.cssClass.unSubscribeImage).attr("title","UnSubscribe"):r.attr("class",t.cssClass.subscribeImage).attr("title","Subscribe"))}})},unSubscribe:function(t){n.ajax({url:t.removeAlertsUrl,contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",data:"{ componentName: '"+t.componentname+"' ,subCategory: '"+t.subCategory+"',uniqueId: '"+t.uniqueid+"', processExcludedList:"+t.processExcludedList+"}",success:function(i){var r=i.d;r=="success"?(t.alertAdded=!1,n.notification.methods.toggleImg(null,!1,t)):n.notification.methods.toggleImg(null,!0,t)}})}}}})(jQuery);
/*
//# sourceMappingURL=xpoint.notification.min.js.map
*/