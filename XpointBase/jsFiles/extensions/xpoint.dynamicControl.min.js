(function(n){n.widget("ui.dynamicContent",{options:{template:[],headerCSS:"",addText:"Add",contentCSS:"",headerWidth:"100%",contentWidth:"100%",noRowToStart:!0,ids:[],rowCSS:"",rowWidth:"100%",actions:[]},_cellWidth:function(){var n=this.options.template.length>0?this.options.template.length:1;return 100/n-.5},_create:function(){var t,i,r;this.element.empty();t=this.element;this.dynamicHeader=n("<div style='display:none'/>").addClass(this.options.headerCSS).width(this.options.headerWidth).appendTo(this.element);this.dynamicContent=n("<div  class='dynamicContent xp-FloatLeft'  />").addClass(this.options.contentCSS).width(this.options.contentWidth).appendTo(this.element);t.dynamicContent("addRow",!0);this.options.noRowToStart===!1&&this.linkObj.trigger("click");i=this.options.afLinkClk;r=n("<div class='xp-FloatLeft xp-CvAddButton ' />").appendTo(this.dynamicContent);this.linkObj=n("<a class='xp-HoverCursor' >"+this.options.addText+"<\/a>").click(function(){var r=t.dynamicContent("addRow");i&&n.isFunction(i)&&i.apply(t,[r])}).appendTo(r)},updateOptions:function(t){n.extend(this.options,t)},deleteRow:function(t){if(t){var r=this.options.template,i=t.attr("rowId");t.remove();n(r).each(function(){var n=this,t;n&&(t=n.elems,t&&t[i]!=null&&n.elems.splice(i))})}this.resetData()},_getValue:function(){var t=n(this);return t?t.val():null},value:function(){var i=this.options.template,r=this._getValue,t={};return n(i).each(function(u){var f=i[u],e,o,h,c,s;for(key in f.elems)if(e=key.toString(),o=f.elems[key],n.isArray(o))for(subKey in o)h=o[subKey],h&&(t[e]==null&&(t[e]=[]),c=f.value&&n.isFunction(f.value)?f.value:r,s=c.apply(h),s!=null&&n.trim(s).length>0&&t[e].push(s))}),t},resetData:function(t){var i=this.options.template,r;t&&(r=n(".rowControlContainer",this.element),r.remove());n(i).each(function(n){var t=i[n];i[n].elems=null})},addRow:function(t,i){var h=n(".dynamicContent",this.element),r=this.options.ids.length+1,p=t==null;this.options.ids.push(r);var a=h.attr("id"),o=a+"_row_"+r,u=n("<div   id='"+o+"' class='rowContainer xp-FloatLeft' rowId='"+r+"' style='position:relative;width:88%'/>").appendTo(h).addClass(this.options.rowCSS),s=n("<div class='xp-FloatLeft' />").width(this.options.rowWidth).appendTo(u),c=this.options.template,v=this._cellWidth(),f=null,e=null;if(i&&(f=i.beforeAdded&&n.isFunction(i.beforeAdded)?i.beforeAdded:null,e=i.afterAdded&&n.isFunction(i.afterAdded)?i.afterAdded:null),n(c).each(function(i){var h=c[i],l=n("<div class='xp-FloatLeft xp-DynamicInput' cellId='"+i+"' />"),p,a,y;if(n(".xp-DynamicInput>select").wrap("<label class='xp-CustomLabel'/>"),h&&(t===!0?l.append(h.headerText):(u.addClass("rowControlContainer"),u.css("width","92%"),h.elems||(h.elems=[]),n.isArray(h.elems[r])||(h.elems[r]=[]),p=o+"_inputelem_"+i,h.element instanceof jQuery?(a=h.element.clone(!0),a.attr("id",p),f&&f(a,i),l.append(a),h.elems[r][i]=a,e&&e(a,i)):(y=n(h.element),y.attr("id",p),f&&f(y,i),l.append(y),h.elems[r][i]=y,e&&e(y,i))),l.width(v+"%"),l.attr("id",o+"_elem_"+i),s.append(l),h.afterAdded&&n.isFunction(h.afterAdded)&&h.afterAdded.apply(l,n.makeArray({parentRow:s})),h.events&&n.isArray(h.events)))for(eventKey in h.events)l.bind(eventKey,h.events[eventKey])}),this.options.actions&&this.options.actions.length>0&&t==null){var y=n("<div />").addClass("menuDiv").appendTo(u),i=this.options,l=i.actions,w=n("<ul/>");n(l).each(function(t){var r=l[t],f;r&&(f=n("<li class='  actionLi' />").append("<span class='ui-secondarytabclr xp-DisplayBlock ui-corner-all  xp-Padding-4'>delete<\/span>").appendTo(y).click(function(){r.onClick.apply(u,[i])}))})}return s}})})($);
/*
//# sourceMappingURL=xpoint.dynamicControl.min.js.map
*/