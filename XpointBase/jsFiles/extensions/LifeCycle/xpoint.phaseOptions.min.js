var $completePhase=$("#complete-phase-dialog"),$warningMessage=$("#warning-message-dialog"),$rollbackMessage=$("#rollback-message-dialog");(function(n){n.fn.phaseTabs=function(t){function f(t){var r="<div id='jqxMenu' class='slider' style='float:right'>";r+="<ul id='amenu-list' class='phases' style='margin-top:35px; margin-left:00px;'>";n(i.model).each(function(n){i.model[n]&&(r+=l(i.model[n],n))});r+="<\/ul><\/div>";t.append(r);n("ul.phases li").hover(function(){var t=n(this).attr("index"),r=parseInt(t,10),w=i.model[t].design,v=w.indexOf("xp-Current")!==-1,l=i.model[t].url,f=n("<ul  class='sub-menu' style='display:block;margin-left: 120px;margin-top:00px;'>");e(f,l,++t,i.model[r]);var a="",y="",p="";n(i.actionName).each(function(n){i.actionName[n].id==="completePhase_callback"?(a=i.actionName[n].title,y=i.actionName[n].message):i.actionName[n].id==="rollBack_callback"&&(rollbackActionTypeName=i.actionName[n].title,p=i.actionName[n].message)});i.editable==="True"&&v===!0&&t>1?n(i.actionName).each(function(n){i.actionName[n].id==="completePhase_callback"?u(f,i.model[r],a,l):i.actionName[n].id==="rollBack_callback"&&c(f,i.model[r],rollbackActionTypeName)}):i.editable==="True"&&v===!0&&t===1&&n(i.actionName).each(function(n){i.actionName[n].id==="completePhase_callback"&&u(f,i.model[r],a,l)});parentEndUl=n("<\/ul>");f.append(parentEndUl);n(this).append(f);n(this).children(".sub-menu").show();n("ul.sub-menu li").click(function(){var t=n(this).attr("id"),u=n("#actiondialog"),f=t.indexOf("callback")>0;f===!0&&(t.indexOf("_completePhase")>0==!0?(n.relayloading("show"),u.dialog({open:function(){alert("a");n.relayloading("hide")}}),n.ajax({url:"/_layouts/IImpact.Web/LifeCycleService.asmx/IsToolUpdateRequired",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{trackerid:'"+i.trackerId+"'}",success:function(n){var t=n.d;t.Status==="failure"?o(t.Message):s(i.trackerId,y,l,r+1)}})):(h(i.trackerId,p,l,r),u.dialog("open")))})},function(){n(this).children(".sub-menu").hide()})}function e(t,r,u,f){var e,o;i.needPhaseId==="True"&&(e=r.indexOf("&PhaseID=")>0,e===!1&&(r=r+"&PhaseID="+u));o=n("<li id='"+f.title+"_ViewPhase'><a href='"+r+"' style='display:block;float:left;'>View Phase<\/a><\/li>");t.append(o)}function u(t,i,r){var u=n("<li id='"+i.title+"_completePhase_callback' style='display:block;'><a href='#' style='display:block;float:left;'>"+r+"<\/a><\/li>");t.append(u)}function o(t){var u,i;$warningMessage.length>0&&($warningMessage.children().remove(),$warningMessage.remove());u="Warning";$warningMessage=n("<div style='display:block;z-index:999 !important' id='"+r.warningMessageDialogId+"' title='"+u+"' />");i="<div style='display:block;z-index:999 !important margin-top: -23px;' class='xp-FloatLeft xp-Overflowhidden xp-Height-60'><table border=0 width=100% cellspacing=0 cellpadding=6><tbody>";i+="<tr><td height='40px'>"+t+"<\/td>";i+="<\/tr><\/tbody><\/table><\/div>";$warningMessage.html(i);$warningMessage.css("z-index","999");n("body").append($warningMessage);$warningMessage.dialog({autoOpen:!0,dialogClass:"warning-message-dialog",width:450,bgiframe:!1,modal:!0,buttons:[{text:"Ok",id:"primarybutton",click:function(){n(this).dialog("close");n.relayloading("hide")}}]});n(".ui-dialog-titlebar-close").click(function(){n.relayloading("hide")})}function s(t,i,u){var o,e,f;$completePhase.length>0&&($completePhase.children().remove(),$completePhase.remove());o="Any folders and files associated with this folder will be deleted permanently along with this folder and cannot be rolled back. Are you sure want to delete?";e="Complete Phase";n.relayloading("show");$completePhase=n("<div style='display:block;z-index:999 !important' id='"+r.completePhaseDialogId+"' title='"+e+"' />");f="<div style='display:block;z-index:999 !important margin-top: -23px; width:100%;' class='xp-FloatLeft xp-Overflowhidden '><table border=0 width=100% cellspacing=0 cellpadding=6><tbody>";f+="<tr><td height='40px'><p>"+i+"<\/p><\/td>";f+="<\/tr><\/tbody><\/table><\/div>";$completePhase.html(f);$completePhase.css("z-index","999");n("body").append($completePhase);$completePhase.dialog({autoOpen:!0,dialogClass:"complete-phase-dialog",width:450,bgiframe:!1,modal:!0,buttons:[{text:"Cancel",id:"secondarybutton","class":"cancelButton",click:function(){n.relayloading("hide");n(this).dialog("close")}},{text:"Complete",id:"primarybutton","class":"xpThemeButton",click:function(){n.ajax({url:"/_layouts/IImpact.Web/LifeCycleService.asmx/Complete",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{trackerid:'"+t+"'}",success:function(n){var t=n.d;t.Status=="success"&&(window.location.href=u)}})}}]});n(".ui-dialog-titlebar-close").click(function(){n.relayloading("hide")})}function h(t,i,u,f){var s,o,e;$rollbackMessage.length>0&&($rollbackMessage.children().remove(),$rollbackMessage.remove());s="Any folders and files associated with this folder will be deleted permanently along with this folder and cannot be rolled back. Are you sure want to delete?";o="Rollback Phase";n.relayloading("show");$rollbackMessage=n("<div style='display:block;z-index:999 !important' id='"+r.RollbackPhaseDialogId+"' title='"+o+"' />");e="<div style='display:block;z-index:999 !important margin-top: -23px;' class='xp-FloatLeft xp-Overflowhidden xp-Height-60'><table border=0 width=100% cellspacing=0 cellpadding=6><tbody>";e+="<tr><td height='40px'><p>"+i+"<\/p><\/td>";e+="<\/tr><\/tbody><\/table><\/div>";$rollbackMessage.html(e);$rollbackMessage.css("z-index","999");n("body").append($rollbackMessage);$rollbackMessage.dialog({autoOpen:!0,dialogClass:"rollback-message-dialog",width:450,bgiframe:!1,modal:!0,buttons:[{text:"Cancel",id:"secondarybutton","class":"cancelButton",click:function(){n.relayloading("hide");n(this).dialog("close")}},{text:"Roll back",id:"primarybutton","class":"xpThemeButton",click:function(){n.ajax({url:"/_layouts/IImpact.Web/LifeCycleService.asmx/GoBackPhase",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:"{trackerid:'"+t+"'}",success:function(n){var t=n.d;t.Status=="success"&&(u=u+"&PhaseID="+f,window.location.reload(u))}})}},]});n(".ui-dialog-titlebar-close").click(function(){n.relayloading("hide")})}function c(t,i,r){var u=n("<li id='"+i.title+"_rollBack_callback'><a href='#' style='display:block'>"+r+"<\/a><\/li>");t.append(u)}function l(n,t){return"<li index='"+t+"' id='"+r.liId+n.title+"_ViewPhase' style='display:block;' ><a href='"+n.url+"' style='"+n.style+" float:left;' class='"+n.design+"'>"+n.title+"<\/a><\/li><\/br>"}var r={liId:"li",completePhaseDialogId:"complete-phase",warningMessageDialogId:"warning-message",rollbackMessageDialogId:"rollback-message"},i=n.extend({model:[],classification:"",trackerId:"",needPhaseId:!1,actionName:[],editable:!1},t),v=n("#completePhaseDialog");return this.each(function(){var t=n(this),r=n(".xp-classification").find("a.ui-textclr").text();n(i.model).each(function(t){var u=i.model[t].design.indexOf("xp-Current")>=0&&i.classification=="Phase"?"Active/Live":"Read only";i.model[t].design.indexOf("ui-primarytabclr")>=0&&i.classification=="Phase"?n("#currentPhaseName").html("Phase >> "+i.model[t].title+" ("+u+")"):i.classification!="Phase"&&n("#currentPhaseName").html(r)});n("#phasetabs").click(function(){f(t)});n(document).click(function(t){var i=n("#phasetabs");i===t.target||i.has(t.target).length||n(".phases").hide()});n("#amenu-list").amenu({speed:100,animation:"animate"})})}})(jQuery);
/*
//# sourceMappingURL=xpoint.phaseOptions.min.js.map
*/