function FormatKeyword(n){var i=n.split(" "),t="";return $.each(i,function(n){n!=0&&(t+="+");t+=this}),t}function DeFormatKeyword(n){var i=n.split("+"),t="";return $.each(i,function(n){n!=0&&(t+=" ");t+=this}),t}function populateSearchContainer(n){$("#"+n.searchadvanceboxid).find("input").each(function(){var i=$(this).attr("filtertype"),t=$.getquery()[i],n;t!=null&&($(this).hasClass("date")?(n=t.split("-"),$(this).val($.datepicker.formatDate("M dd, yy",new Date(n[0],n[1]-1,n[2])))):$(this).val(t))});$("#"+n.searchadvanceboxid).find("select").each(function(){var n=$.getquery()[$(this).attr("filtertype")],t;n!=null&&(t=this,$(this).attr("filtertype")!="phase"?$(t).val(n):($lifecycle=$(".lcname"),$lifecycle.length>0&&($lifecycle.trigger("change"),setTimeout(function(){$(t).val(n)},250))))})}function bindControlDataTypes(){var e=null,u=null,t=null,f=null,o=$.getquery().advopen,i,r,n;$(".name").length>0&&$.each($(".name"),function(){var n=$(this),t=$.getquery()[n.attr("filtertype")];o!=null&&t!=null?n.peoplepicker({hoverprofile:!1,searchurl:"/_layouts/IImpact.Web/ChatService.asmx/SearchUsers",needformat:!0,prePopulate:Url.decode(t)}):n.peoplepicker({hoverprofile:!1,searchurl:"/_layouts/IImpact.Web/ChatService.asmx/SearchUsers"})});$(".date").datepicker({dateFormat:"M dd, yy"});e="/_layouts/IImpact.Web/ClassificationService.asmx/Classification";u=$(".geog");u.length>0&&(n=$.getquery()[u.attr("filtertype")]?$.getquery()[u.attr("filtertype")]:"",u.classification({listname:"GeographyData",columnname:"GeographyName",valuecolumn:"GeographyName",serviceurl:"/_layouts/IImpact.Web/ClassificationService.asmx/Classification",selectedtext:n}));i=$(".func");i.length>0&&(n=$.getquery()[i.attr("filtertype")]?$.getquery()[i.attr("filtertype")]:"",i=i.classification({listname:"FunctionData",columnname:"FunctionName",valuecolumn:"FunctionName",serviceurl:"/_layouts/IImpact.Web/ClassificationService.asmx/Classification",selectedtext:n}));r=$(".dept");r.length>0&&(n=$.getquery()[r.attr("filtertype")]?$.getquery()[r.attr("filtertype")]:"",r=r.classification({listname:"DepartmentData",columnname:"DepartmentName",valuecolumn:"DepartmentName",serviceurl:"/_layouts/IImpact.Web/ClassificationService.asmx/Classification",selectedtext:n}));t=$(".lcname");n=$.getquery()[t.attr("filtertype")]?$.getquery()[t.attr("filtertype")]:"";t.attr("value",n);t.length>0&&(f=$(".phasetype"),f.length>0&&(n=$.getquery()[f.attr("filtertype")]?$.getquery()[f.attr("filtertype")]:"",f.classification({listname:"LifeCycle Phases",columnname:"Title",parentcolumnname:"LifecycleID",parentid:t.attr("id"),serviceurl:"/_layouts/IImpact.Web/ClassificationService.asmx/Classification",customattr:"lifecycleid",autoindexing:!0,selectedvalue:n})))}function updateSearchContainer(n){var t="{searchtype:'"+n.searchtype+"'}";$.ajax({url:n.advanceurl,contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:t,success:function(t){var r=t.d,i;$("#"+n.searchadvanceboxid).append(r);bindControlDataTypes();$("#"+n.searchadvancelinkid).text("AdvancedSearch [-]");i=$.getquery().advopen;i!=null&&populateSearchContainer(n);$("#"+n.searchadvancelinkid).show();$("#"+n.searchadvanceboxid).show()}})}var Url={encode:function(n){return escape(this._utf8_encode(n))},decode:function(n){return this._utf8_decode(unescape(n))},_utf8_encode:function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},_utf8_decode:function(n){for(var r="",t=0,i=c1=c2=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(c2=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|c2&63),t+=2):(c2=n.charCodeAt(t+1),c3=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r}};(function(n){n.fn.Searchable=function(t){t=n.extend({},n.fn.Searchable.defaults,t);var i=this;return this.each(function(){var f=n(this),i,r,u;this.options=t;i=n("<div  id="+t.searchboxid+" style='border-width:0px 1px 1px 1px !important'  class='ui-state-default xp-FloatLeft xp-Width xp-BoxShadow xp-MarginBottom-10 xp-NoBackground xp-BorderBox ui-corner-bottom xp-Padding0'/>");i.append("<table id="+t.outertableid+" border=0 cellpadding=3 ><tr id="+t.outertableid+"headerrow><td class='xp-FontNormal'>Search Item :<\/td><td><input autocomplete='off' class='Tip-SHSearchBox' type='text' id='"+t.searchtextid+"'/><\/td><td style='padding-left:8px;'><input type='button' id='"+t.searchbuttonid+"' value='Search' class='ui-primarytabclr ui-corner-all'/><\/td>");f.append(i);r=n.getquery().tp;r!=null&&(t.searchtype=r);n("#"+t.searchtextid).bind(n.browser.opera?"keypress":"keydown",function(i){i.keyCode==13&&(i.preventDefault(),n("#"+t.searchbuttonid).trigger("click"))});u=n.getquery().k;u!=null&&(t.keyword=u.toString().replace("%20",""),n("#"+t.searchtextid).val(DeFormatKeyword(t.keyword)));n("#"+t.searchbuttonid).click(function(){t.keyword=n("#"+t.searchtextid).val();f.Searchable.SearchClick(t)})})};n.fn.Searchable.SearchClick=function(t){var i=n.getCurrentUrl(),r;t.keyword!=""?(i+="?k="+FormatKeyword(t.keyword),t.searchtype.length>0&&(i+="&tp="+t.searchtype,r=!1,n("#"+t.searchadvanceboxid).find("input").each(function(){var f,t,u;if(n(this).val()!=null&&n(this).val().length>0&&n(this).val()!="")if(f=n(this).attr("filtertype"),n(this).hasClass("date"))t=new Date(n(this).val()),i+="&"+f+"="+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();else if(n(this).hasClass("name"))try{u=n(this)[0].PeopleTokens()[0];i+="&"+n(this).attr("filtertype")+"="+u.id+"!"+u.name}catch(e){}else i+="&"+n(this).attr("filtertype")+"="+n(this).val();r=!0}),n("#"+t.searchadvanceboxid).find("select").each(function(){n(this).val()!=null&&n(this).val().length>0&&n(this).val()!=""&&(i+="&"+n(this).attr("filtertype")+"="+n(this).val());r=!0})),r&&n("#"+t.searchadvanceboxid).is(":visible")&&(i+="&advopen=1"),window.location.replace(i)):alert("Enter keyword to search")};n.getCurrentUrl=function(){return String(document.location).split("?")[0]};n.fn.Searchable.AdvanceLinkClick=function(t){var i=n("#"+t.searchadvanceboxid).is(":visible");i==!0?(n("#"+t.searchadvancelinkid).text("AdvancedSearch [+]"),n("#"+t.searchadvanceboxid).hide(),n("#"+t.searchadvanceboxid+"*").html("")):updateSearchContainer(t)};n.fn.Searchable.defaults={advanceurl:"",queryparams:[],searchboxid:n(this).attr("id")+"searchdiv",searchtextid:n(this).attr("id")+"searchtext",searchtbuttonid:n(this).attr("id")+"searchbutton",searchadvancelinkid:n(this).attr("id")+"advancelink",searchadvanceboxid:n(this).attr("id")+"searchadvancediv",keyword:"",searchtype:"",outertableid:n(this).attr("id")+"outertable"};n.getquery=function(){var t={},n=location.search;return n=n.replace(/^\?/,""),n=n.replace(/\&$/,""),jQuery.each(n.split("&"),function(){var i=this.split("=")[0],n=this.split("=")[1];/^[0-9.]+$/.test(n)&&(n=parseFloat(n));n&&(t[i]=n)}),t};n.fn.SearchControl=function(t){return t=n.extend({},n.fn.SearchControl.defaults,t),getResult=function(){},this.each(function(){if(t.searchurl!=""){var n={url:location.search,pageSize:t.pageSize},i="{url:'"+location.search+"'}";getResult()}else alert("Search Control not configured for searchurl")})};n.fn.SearchControl.defaults={searchurl:"",pageSize:5,currentPage:1,lastPage:1}})(jQuery);
/*
//# sourceMappingURL=relaysearch.min.js.map
*/