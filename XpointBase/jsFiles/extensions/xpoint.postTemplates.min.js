(function(n){n.fn.postTemplates=function(t){var i,u,t,r;if(this&&this.length!=0)return(i=this,typeof t=="object")?(u=i.get(0),t=n.extend(n.postTemplates.defaults,t),u.options=t,n.postTemplates.methods.init.call(i,t)):(r=n.postTemplates.methods[t],r&&n.isFunction(r)?r.call(i,arguments[1]):void 0)};var t;n.postTemplates={templates:[],navButtons:[],addNavButtons:function(t,i){n.postTemplates.navButtons[t]=i},addTemplate:function(t,i){n.postTemplates.templates[t]=i},defaults:{inputBoxWaterMarkText:"Write a comment and Press Enter",userPictureUrl:"",playableAudioFileTypes:[],playableMediaFileTypes:[],userId:"",isSinglePost:!1,serverUrl:"",ajaxOpts:{type:"GET"},docFileTypes:[],imageFileTypes:[],mediaFileTypes:[]},ids:{descriptionArea:"descriptionArea",container:"container",profilePic:"profilePic",mainDiv:"mainDiv",postDescriptionDiv:"postDescriptionDiv",descriptionTopDiv:"descriptionTopDiv",postDescription:"postDescription",descriptionBottomDiv:"descriptionBottomDiv",profilePicDiv:"profilePicDiv",profileUrl:"profileUrl",contextMenuIcon:"contextMenuIcon",duration:"duration",clockIcon:"clockIcon",descBottomUL:"descBottomUL",postDescriptionFormat:"postDescriptionFormat",postcontextMenu:"postcontextMenu_",likeCommentDetailsMainDiv:"likeCommentDetailsMainDiv_",like:"like_",comment:"comment_",time:"time_",commentCount:"commentCount_",likeCount:"likeCount_",viewMore:"viewMore_",readCount:"readCount_",likedByMainDiv:"likedByMainDiv_",commentCountSpan:"commentCountSpan_",closeCommentDiv:"closeCommentDiv_",commentCountMainDiv:"commentCountMainDiv_",pollChartDiv:"pollChartDiv_",pollContentDiv:"pollContentDiv_",pollOptions:"pollOptions_",pollImageDiv:"pollImageDiv_",pollConfirmButtonDiv:"pollConfirmButtonDiv",pollInputDiv:"pollInputDiv_",likeCountSpan:"likeCountSpan_",likeCommentDiv:"likeCommentDiv",likeCountMainDiv:"likeCountMainDiv",videoIcon:"videoIcon_",audioIcon:"audioIcon_",dateDiv:"dateDiv",viewMoreDiv:"viewMoreDiv_",viewLessDiv:"viewLessDiv_",commentParentDiv:"commentParentDiv",inputBox:"inputBox",postMainDiv:"postMainDiv",likeCount:"likeCount",commentCount:"commentCount",postActionList:"postActionList_",likedByMainDiv:"likedByMainDiv_",deletePost:"deletePost_",followPost:"followPost_",videoElem:"videoElem_",audioElem:"audioElem_",viewComment:"xpointViewCommentDiv_",viewMoreLink:"viewMoreLink",inputComment:"xpointInputCommentDiv_",postsContainerDiv:"postsContainerDiv",likeCountMainDiv:"likeCountMainDiv",likeCommentCountMainDiv:"likeCommentCountMainDiv",closeLike:"closeLike"},classes:{templateContainer:"postTemplateContainer",container:"xp-FloatLeft xp-Width xp-BorderBottomGray",mainDiv:"xp-FloatLeft xp-Width90 xp-Padding-6 xp-PositionRelative",profilePicDiv:"xp-FloatLeft xp-MarginRight-10 xp-SmallProfilePic",postDescriptionDiv:"xp-FloatLeft xp-MarginRight-10 xp-Width88 ",descriptionTopDiv:"xp-FloatLeft xp-Width90 xp-TxtDescription",link:"xp-LinkLabel",descriptionBottomDiv:"xp-FloatLeft xp-Width xp-PaddingTopBottom-10",descBottomUL:"xp-LikeCommentOptions",descriptionArea:"xp-FloatLeft xp-Width xp-PaddingTop-4",contextMenuIcon:"xp-FloatLeft xp-Margin-0 xp-Padding-0 xp-IconPostAction xp-PositionRelative  xp-HoverCursor  xp-Icon-Highlight Tip-HPMyPostsCntxtMenu",duration:"xp-FontLite xp-FloatLeft",clockIcon:"xp-IconTimestamp xp-Icon xp-FloatLeft xp-PaddingRight-3",postcontextMenu:"postcontextMenu postcontextMenu xp-PositionRelative",like:"like Tip-HPMyPostsLike",comment:"comment Tip-HPMyPostsComment",time:"time Tip-HPMyPostsTime",markAsReadCount:"markAsReadCount",commentCount:"commentCount",likeCount:"likeCount",viewMore:"viewMore",postdescriptionArea:"postdescriptionArea",displayNone:"xp-DisplayNone",durationDiv:"xp-FloatLeft xp-PositionRelative xp-Padding-2   xp-Width",dateDiv:"xp-PositionAbsolute xp-Padding-4 ui-state-default xp-BoxShadow xp-DateHoverDiv  xp-DisplayNone",viewMoreDiv:"viewMoreDiv",viewLessDiv:"viewLessDiv",likePost:"likePost",commentPost:"commentPost",viewPost:"viewPost",timeStamp:"timeStamp",dropDown:"dropDown",textCheckBox:"textCheckBox",pollCheckBox:"pollCheckBox",docCheckBox:"docCheckBox",mediaCheckBox:"mediaCheckBox",postMainDiv:"postMainDiv",checkBox:"checkBox",deletePost:"deletePost",followPost:"followPost",readCount:"readCount Tip-HPMyPostsReadCount",closeLike:"closeLike",mediaDiv:"xp-MyPostsImg xp-FloatLeft",contextMenu:"xp-PositionAbsolute ui-state-default xp-FloatLeft xp-BoxShadow xp-PostActionList ui-corner-all xp-Overflowhidden",contextMenuElement:"xp-FloatLeft xp-Width",tourCssViewMore:"Tip-HPUpdatesViewMore",tourCssLikeCount:"Tip-HPMyPostsLikeCount",tourCssCommentCount:"Tip-HPMyPostsCmntCount"},paths:{getFileIcon:"/getFileIcon",getForumById:"/GetForumById",getLifeCycleById:"/GetLifeCycleById",getUserDetails:"/_vti_bin/XPointBase/UpdatesService.svc/GetUserDetails",getPollData:"/getPollData",savePoll:"/SavePoll",likePostMethod:"/LikePost",unlikePostMethod:"/UnlikePost",getPostsMethod:"/GetPosts",addPostCommentMethod:"/AddPostComment",deletePostMethod:"/DeletePost",getPostLikesCommentsCountMethod:"/GetPostLikesCommentsCount",isPostLikedByMethod:"/IsPostLikedBy",getPostLikedByMethod:"/GetPostLikedBy",getPostCommentsMethod:"/GetPostComments",getPostByIdMethod:"/GetPostById",deletePostCommentMethod:"/DeletePostComment",followPost:"/FollowPost",unFollowPost:"/UnfollowPost",getPostFollowStatus:"/GetPostFollowStatus",markPostAsRead:"/MarkPostAsRead",getPostReadCount:"/GetPostReadCount",loadingImagePath:"/_layouts/Images/XPointBase/indicator.gif",defaultImage:"/_layouts/Images/XPointBase/playButton.png",isDeleteAllowedMethod:"/IsDeleteAllowed",getContextMenuText:"/GetContextMenuText"},mediaConfigs:{videoConfigs:{flv:{type:"video/x-flv"},ogv:{type:"video/ogg"},mp4:{type:"video/mp4"},webm:{type:"video/webm"}},defaultVideoConfig:{mp4:{type:"video/mp4"}},audioConfigs:{mp3:{type:"audio/mp3"}},defaultAudioConfigs:{mp3:{type:"audio/mp3"}}},methods:{refreshData:function(t){var r=n("."+n.postTemplates.classes.templateContainer),t=r.postOptions,i=n(":checkbox",n(".xp-PostNavigationList"));i.attr("checked",!1);n(i.first()).trigger("click",t)},init:function(t){var i=this,r=i.postOptions;container=n(i);t&&(r=n.extend(n.postTemplates.defaults,t));i.postOptions=r;i.addClass(n.postTemplates.classes.templateContainer);n.postTemplates.methods.createHtml.apply(i,n.makeArray(r));n("."+n.postTemplates.classes.checkBox).attr("checked",!0);n("."+n.postTemplates.classes.checkBox).click(function(){n.postTemplates.methods.filterPosts.apply(this,n.makeArray(r))})},ajaxCall:function(t,i){var u=this,f,r;n(".loading-indicator").hide();u.showLoading(i);f=t.complete&&n.isFunction(t.complete)?t.complete:null;t&&(r={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:"",cache:!1,complete:function(n,t){u.hideLoading();f&&f.call(u,n,t)}},r=n.extend(r,t),n.ajax(r))},getBasicPostHtml:function(t,i,r){var i=i,nt=new Date(parseInt(i.CreatedDate.substr(6))),c=n("<div />").attr("id",n.postTemplates.ids.container).attr("class",n.postTemplates.classes.container),l=n("<div />").attr("id",n.postTemplates.ids.mainDiv+i.Id).attr("class",n.postTemplates.classes.mainDiv).appendTo(c),tt=n("<div />").attr("id",n.postTemplates.ids.profilePicDiv).attr("class",n.postTemplates.classes.profilePicDiv).appendTo(l),yt=n("<img  />").attr("id",n.postTemplates.ids.profilePic).attr("src",i.CreatedBy.PictureUrl).attr("alt","Unable to display user profile pic").attr("title",i.CreatedBy.DisplayName).appendTo(tt),o=n("<div />").attr("id",n.postTemplates.ids.postDescriptionDiv+i.Id).attr("class",n.postTemplates.classes.postDescriptionDiv).appendTo(l),a=n("<div />").attr("id",n.postTemplates.ids.descriptionTopDiv).attr("class",n.postTemplates.classes.descriptionTopDiv).appendTo(o),it=n("<div class='xp-PaddingBottom-5'/>").appendTo(a),pt=n("<a>"+i.CreatedBy.DisplayName+"<\/a>").attr("id",n.postTemplates.ids.profileUrl).attr("href",i.CreatedBy.ProfileUrl).attr("class",n.postTemplates.classes.link).appendTo(it),v=n("<div>"+i.Description.replace(/\\"/g,'"').replace(/\\\\/g,"\\")+"<\/div>").attr("id",n.postTemplates.ids.postDescription).appendTo(a),wt=n("<div class='xp-Width xp-Float'/>").attr("id",n.postTemplates.ids.postDescriptionFormat+i.Id).appendTo(v),rt=n("<div class='xp-FloatLeft' />").attr("class",n.postTemplates.classes.descriptionBottomDiv).attr("id",n.postTemplates.ids.descriptionBottomDiv).appendTo(v),y=n("<div />").attr("class",n.postTemplates.classes.durationDiv),h=n("<ul id='"+n.postTemplates.ids.descBottomUL+"'/>").attr("class",n.postTemplates.classes.descBottomUL).appendTo(rt),ut=n("<li id='"+n.postTemplates.ids.like+i.Id+"'  class='"+n.postTemplates.classes.like+"' data-postId='"+i.Id+"'/>").appendTo(h),p=n("<li id='"+n.postTemplates.ids.comment+i.Id+"'class='"+n.postTemplates.classes.comment+"' data-postId='"+i.Id+"' />").appendTo(h),w=n("<li id='"+n.postTemplates.ids.time+i.Id+"' class='"+n.postTemplates.classes.time+"'  data-postId='"+i.Id+"'/>").appendTo(h),f,u;likeStatus=i.IsPostLikedBy==!0?"UnLike":"Like";var bt=n("<a href='#' class='xp-LinkLabel'>"+likeStatus+"<\/a>").appendTo(ut),kt=n("<a href='#' class='xp-LinkLabel'>Comment<\/a>").appendTo(p),dt=n("<div />").attr("id",n.postTemplates.ids.clockIcon).attr("class",n.postTemplates.classes.clockIcon).appendTo(w),ft=new Date(parseInt(i.CreatedDate.substr(6))),et=n("<div class='"+n.postTemplates.classes.time+"'>"+n.timeago(nt)+"<\/div>").attr("id",n.postTemplates.ids.duration+i.Id).attr("class",n.postTemplates.classes.duration).appendTo(w),ot=n.postTemplates.methods.formatDate(ft);y.appendTo(et);var gt=n("<div/>").attr("class",n.postTemplates.classes.dateDiv).attr("id",n.postTemplates.ids.dateDiv+i.Id).append(ot).appendTo(y),b=n("<div style= 'float:left;'/ >").data("postID",i.Id).attr("class",n.postTemplates.classes.postcontextMenu).attr("id",n.postTemplates.ids.postcontextMenu+i.Id),ni=n("<div />").attr("id",n.postTemplates.ids.contextMenuIcon).attr("class",n.postTemplates.classes.contextMenuIcon).appendTo(b);b.appendTo(o);var st=i.LikesCount>0||i.CommentsCount>0||i.MarkAsRead==="true"?"":"xp-DisplayNone",s=n("<div id='"+n.postTemplates.ids.likeCommentCountMainDiv+i.Id+"'  class='xp-FloatLeft  xp-Width90  ui-state-default "+st+"'/>"),ht=i.LikesCount>0?"":"xp-DisplayNone",ct=i.LikesCount>0?n.postTemplates.classes.tourCssLikeCount:"",k=n("<div id='"+n.postTemplates.ids.likeCountMainDiv+i.Id+"' class='xp-FloatLeft xp-Padding-4 xp-Width20 "+ht+"'/>").appendTo(s),ti=n("<div class='xp-FloatLeft xp-PaddingRight-3 xp-IconLike-Highlight xp-Icon-Highlight'/>").appendTo(k),ii=n("<div class='xp-FloatLeft xp-PaddingRight-3'><div id='"+n.postTemplates.ids.likeCount+i.Id+"' class = '"+n.postTemplates.classes.likeCount+"' data-postId='"+i.Id+"'><a href='#' class='xp-LinkLabel'><span id='"+n.postTemplates.ids.likeCountSpan+i.Id+"' class='"+ct+"'>"+i.LikesCount+"<\/span> Likes<\/a><\/div><\/div>").appendTo(k),lt=i.CommentsCount>0?"":"xp-DisplayNone",at=i.CommentsCount>0?n.postTemplates.classes.tourCssCommentCount:"",d=n("<div id='"+n.postTemplates.ids.commentCountMainDiv+i.Id+"' class='xp-FloatLeft xp-Padding-4  xp-Width25 "+lt+"'/> ").appendTo(s),ri=n("<div class='xp-FloatLeft xp-PaddingRight-3 xp-IconComment-Highlight xp-Icon-Highlight'/>").appendTo(d),vt=n("<div class='xp-FloatLeft xp-PaddingRight-3' data-postId='"+i.Id+"'><div id='"+n.postTemplates.ids.commentCount+i.Id+"' class='"+n.postTemplates.classes.commentCount+"'><a href='#' class='xp-LinkLabel'><span id='"+n.postTemplates.ids.commentCountSpan+i.Id+"' class='"+at+"'>"+i.CommentsCount+"<\/span> Comments<\/a><\/div><\/div>").appendTo(d),e=n("<div id= '"+n.postTemplates.ids.likedByMainDiv+i.Id+"'class='xp-FloatLeft  xp-Width  '/>"),ui=n("<div id='"+n.postTemplates.ids.closeCommentDiv+i.Id+"' class='xp-FloatLeft  xp-CloseBox xp-Width'><\/div>");if(s.appendTo(o),n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+i.Id).empty(),f=n("<div id='"+n.postTemplates.ids.likeCommentDetailsMainDiv+i.Id+"' class='xp-FloatLeft xp-Width90 ui-state-default xp-NoBackground'/>"),f.appendTo(o),i.CommentsCount==0&&f.hide(),u={},u.id=i.Id,r.isSinglePost&&(u.isSinglePost=r.isSinglePost,u.serverUrl=r.serverUrl),u.userPictureUrl=r.userPictureUrl,u.numberOfComments="2",u.allowInput=!1,u.inputBoxWaterMarkText=r.inputBoxWaterMarkText,u.getCommentsUrl=r.serviceUrl+n.postTemplates.paths.getPostCommentsMethod,u.saveCommentsUrl=r.serviceUrl+n.postTemplates.paths.addPostCommentMethod,u.deleteCommentsUrl=r.serviceUrl+n.postTemplates.paths.deletePostCommentMethod,u.commentCountId=n.postTemplates.ids.commentCountSpan+i.Id,u.commentCountDiv=n.postTemplates.ids.commentCountMainDiv+i.Id,u.viewComment=n.postTemplates.ids.viewComment+i.Id,u.inputComment=n.postTemplates.ids.inputComment+i.Id,u.likeCommentCountMainDiv=n.postTemplates.ids.likeCommentCountMainDiv+i.Id,u.commentsMainDiv=n.postTemplates.ids.likedByMainDiv+i.Id,f.append(e),n.xpointComments.methods.addCommentContainer(e,u),vt.click(function(){return n.postTemplates.methods.viewComments.apply(this,n.makeArray(u)),!1}),p.click(function(){var r,t;return f.show(),r=n("#"+n.postTemplates.ids.inputComment+i.Id),r.length==0?(e.empty(),f.empty(),t={},n.extend(t,u),t.allowInput=!0,n.xpointComments.methods.addCommentContainer(e,t),f.append(e)):n.xpointComments.methods.addInputContainer(u),!1}),r.isAdminSection=="true"&&i.MarkAsRead=="true")var g=n("<div class='xp-FloatLeft xp-Padding-4 xp-Width20'/>").appendTo(s),fi=n("<div class='xp-FloatLeft xp-PaddingRight-3 xp-IconAddAcknowledge xp-Icon-Highlight'/>").appendTo(g),ei=n("<div class='xp-FloatLeft xp-PaddingRight-3'><div id='"+n.postTemplates.ids.readCount+i.Id+"' class = '"+n.postTemplates.classes.readCount+"' data-postId='"+i.Id+"'> <span class='xp-FontLite'><span>"+i.ReadByCount+"<\/span> Read<\/span><\/div><\/div>").appendTo(g);return c},bindEvents:function(t,i){n("#"+n.postTemplates.ids.postcontextMenu+t.Id).click(function(){var r=n(this),u=r.data("postID"),t=n("#"+n.postTemplates.ids.postActionList+u),f=t.length==0||t.is(":hidden");if(f===!0)return n.postTemplates.methods.contextMenuAction.call(r,i,u),!1;t.remove()});n("#"+n.postTemplates.ids.like+t.Id).click(function(){return n.postTemplates.methods.likePost.apply(this,n.makeArray(i)),!1});n("#"+n.postTemplates.ids.time+t.Id).click(function(){n.postTemplates.methods.showActualTime.apply(this,n.makeArray(i))});n("#"+n.postTemplates.ids.likeCount+t.Id).click(function(){return n.postTemplates.methods.viewLike.apply(this,n.makeArray(i)),!1});n("#"+n.postTemplates.ids.closeLike+t.Id).click(function(){return n.postTemplates.methods.closeLikeDetails.apply(this,n.makeArray(i)),!1});n("#"+n.postTemplates.ids.videoIcon+t.Id).click(function(){n.postTemplates.methods.playVideo(this,t,i)});n("#"+n.postTemplates.ids.audioIcon+t.Id).click(function(){n.postTemplates.methods.playAudio(this,t,i)});n("#"+n.postTemplates.ids.viewMore+t.Id).click(function(){n.postTemplates.methods.viewMoreSystemPosts(this,t,i)});n("#"+n.postTemplates.ids.duration+t.Id).hover(function(){n("#"+n.postTemplates.ids.dateDiv+t.Id).show()},function(){n("#"+n.postTemplates.ids.dateDiv+t.Id).hide()});n("#"+n.postTemplates.ids.duration+t.Id).click(function(){n("#"+n.postTemplates.ids.dateDiv+t.Id).toggle()})},formatDate:function(n){if(typeof n=="object"){var i=n.getHours(),t=n.getMinutes(),r=t<10&&t>0?"0"+t:t,u=i>12?i-12+":"+r+" PM":i+":"+r+" AM";return n.formatDate("dd-mmm-yyyy - ")+u}return null},draw:function(t){var i=this;n(t.data).each(function(){var t=this;n.postTemplates.templates[t.tmpType].draw.call(i,t)})},viewMoreSystemPosts:function(t,i,r){t.empty();n("#"+n.postTemplates.ids.viewMore+r).css("visibility")=="visible"?(n("#"+n.postTemplates.ids.viewMore+r).css({display:"none"}),n("#"+n.postTemplates.ids.viewMore+r).css({visibility:"hidden"}),t.append(n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewMore+r+"' class='viewMoreDiv'><a href='#' class='xp-LinkLabel "+n.postTemplates.classes.tourCssViewMore+"'>View More...<\/a><\/div><\/div>"))):(n("#"+n.postTemplates.ids.viewMore+r).css({visibility:"visible"}),n("#"+n.postTemplates.ids.viewMore+r).css({display:"block"}),t.append(n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewMore+r+"' class='viewMoreDiv'><a href='#' class='xp-LinkLabel'>Show less...<\/a><\/div><\/div>")))},closeLikeDetails:function(t,i){var r=n(this);n("#"+n.postTemplates.ids.closeLike+i).hide();n("#"+n.postTemplates.ids.likedByMainDiv+i).hide();n("#"+n.postTemplates.ids.closeDiv+i).hide()},contextMenuAction:function(i,r){var f=this,u=n("<div class='"+n.postTemplates.classes.contextMenu+"' id='"+n.postTemplates.ids.postActionList+r+"'/>").appendTo(f),e=n("<div id ='"+n.postTemplates.ids.deletePost+r+"' class='xp-FloatLeft xp-Width xp-BorderBottom'><a class='xp-DisplayBlock xp-Floatleft xp-Width xp-Padding-4' href='#'>Delete Post<\/a><\/div>"),o={type:"GET",cache:!1,async:!1,dataType:"json",url:i.serviceUrl+n.postTemplates.paths.getContextMenuText,data:{postId:r,isDeleteEnabled:i.isDeleteEnabled},success:function(f){var s,o,h;u=n("#"+n.postTemplates.ids.postActionList+r);s=f.GetContextMenuTextResult.DeleteText;o=f.GetContextMenuTextResult.FollowText;s=="True"&&e.appendTo(u);h=n("<div id='"+n.postTemplates.ids.followPost+r+"' class='xp-FloatLeft xp-Width '><a  class='xp-DisplayBlock xp-Floatleft xp-Width xp-Padding-4' href='#'>"+o+" Post<\/a><\/div>").appendTo(u);n("#"+n.postTemplates.ids.deletePost+r).click(function(){var u={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:i.serviceUrl+n.postTemplates.paths.deletePostMethod,data:'{ "postId": '+r+"}",success:function(r){var u=r.DeletePostResult.Status;if(status="success")return i.isSinglePost?window.location.href=i.serverUrl:n.postTemplates.methods.init.apply(t,n.makeArray(i)),!1}};n.postTemplates.methods.ajaxCall.call(n("#"+n.postTemplates.ids.deletePost+r),u)});n("#"+n.postTemplates.ids.followPost+r).click(function(t){t.preventDefault();o=="Follow"?n.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:i.serviceUrl+n.postTemplates.paths.followPost,data:'{ "postId": '+r+"}",success:function(t){var i=t.FollowPostResult.Status;n("#"+n.postTemplates.ids.postActionList+r).remove()}}):n.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:i.serviceUrl+n.postTemplates.paths.unFollowPost,data:'{ "postId": '+r+"}",success:function(t){var i=t.UnfollowPostResult.Status;n("#"+n.postTemplates.ids.postActionList+r).remove()}})})}};n.postTemplates.methods.ajaxCall.call(f,o)},getLikeStatus:function(t,i){var r,u={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.isPostLikedByMethod,data:{postId:i},success:function(n){r=n.IsPostLikedByResult=="true"?"UnLike":"Like"}};return n.postTemplates.methods.ajaxCall.call(this,u),r},getPostLikesCommentsCount:function(t,i){var r=n(this),u={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.getPostLikesCommentsCountMethod,data:{postId:i},success:function(t){var r=t.GetPostLikesCommentsCountResult;n("#"+n.postTemplates.ids.likeCountSpan+i).text(r.LikesCount)}};n.postTemplates.methods.ajaxCall.call(r,u)},likePost:function(t){var r=n(this),u=n.postTemplates.paths.likePostMethod,i=r.data("postId"),f={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.isPostLikedByMethod,data:{postId:i},success:function(f){u=f.IsPostLikedByResult==!0?t.serviceUrl+n.postTemplates.paths.unlikePostMethod:t.serviceUrl+n.postTemplates.paths.likePostMethod;var e={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:u,data:'{ "postId": '+i+"}",success:function(u){var e=u.LikePostResult!=null?u.LikePostResult:u.UnlikePostResult,u=e.Message,f;u=="Liked"?(r.empty(),r.append(n("<a href='#' class='xp-LinkLabel'>UnLike<\/a>"))):u=="UnLiked"&&(r.empty(),r.append(n("<a href='#' class='xp-LinkLabel'>Like<\/a>")));f={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.getPostLikesCommentsCountMethod,data:{postId:i},success:function(t){var r=t.GetPostLikesCommentsCountResult;r.LikesCount>0?(n("#"+n.postTemplates.ids.likeCountMainDiv+i).removeClass("xp-DisplayNone"),n("#"+n.postTemplates.ids.likeCommentCountMainDiv+i).removeClass("xp-DisplayNone"),n("#"+n.postTemplates.ids.likeCountSpan+i).text(r.LikesCount),n("#"+n.postTemplates.ids.likeCountSpan+i).addClass(n.postTemplates.classes.tourCssLikeCount)):(n("#"+n.postTemplates.ids.likeCountSpan+i).removeClass(n.postTemplates.classes.tourCssLikeCount),n("#"+n.postTemplates.ids.likeCountMainDiv+i).addClass("xp-DisplayNone"),r.CommentsCount<0&&n("#"+n.postTemplates.ids.likeCommentCountMainDiv+i).addClass("xp-DisplayNone"))}};n.postTemplates.methods.ajaxCall.call(r,f)}};n.postTemplates.methods.ajaxCall.call(r,e)}};n.postTemplates.methods.ajaxCall.call(r,f)},viewLike:function(t){var r=n(this),u=n(r.parent()),i=r.data("postId"),f={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.getPostLikedByMethod,data:{postId:i},success:function(r){var u=r.GetPostLikedByResult,o=u.length,f=n("<div id= '"+n.postTemplates.ids.likedByMainDiv+i+"'class='xp-FloatLeft  xp-Width  '/>"),s=n("<div class='xp-Width xp-FloatLeft xp-PositionRelative '/>").appendTo(f),h=n("<div class='xp-FloatLeft  xp-Width xp-NoBackground xp-BottomBorder ui-state-default'/>").appendTo(s),e;n(u).each(function(){var t=this,i=n("<div class='xp-FloatLeft xp-Padding-4 xp-Width30 xp-Height-60'>").appendTo(h),r=n("<div class='xp-FloatLeft xp-PaddingRight-5 xp-SmallProfilePic '><img src='"+t.LikedBy.PictureUrl+"' /> <\/div>").appendTo(i),u=n("<div class='xp-FloatLeft'><a href='"+t.LikedBy.ProfileUrl+"' class='xp-LinkLabel'>"+t.LikedBy.DisplayName+"<\/a><\/div>").appendTo(i)});n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+i).empty();n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+i).append(f);n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+i).show();o>9&&(n("#"+n.postTemplates.ids.likedByMainDiv+i).addClass("xp-LikeCommentScroll "),n("#"+n.postTemplates.ids.likedByMainDiv+i).jScrollPane({verticalDragMinHeight:"60",autoReinitialise:!0}));e=n("<div id='"+n.postTemplates.ids.closeDiv+i+"' class='xp-FloatLeft xp-CloseBox xp-Width'><div class='xp-FloatLeft xp-Padding-4'><div id='"+n.postTemplates.ids.closeLike+i+"'><a href='#' class='xp-PaddingLeft-7 xp-LinkLabel'>Close<\/a><\/div><\/div><\/div>");n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+i).append(e);n("#"+n.postTemplates.ids.closeLike+i).click(function(){return n.postTemplates.methods.closeLikeDetails(t,i),!1})}};n.postTemplates.methods.ajaxCall.call(u,f)},viewComments:function(t){var o=n(this),f=o.data("postId"),r=n("#"+n.postTemplates.ids.likeCommentDetailsMainDiv+f),u,e,i;return r.empty(),u={},n.extend(u,t),u.numberOfComments="0",u.allowInput=!0,e=n("<div id= '"+n.postTemplates.ids.likedByMainDiv+f+"'class='xp-FloatLeft  xp-Width'/>"),n.xpointComments.methods.addCommentContainer(e,u),r.append(e),i=n("#"+n.postTemplates.ids.closeCommentDiv+f),i.length>0&&i.remove(),i=n("<div id='"+n.postTemplates.ids.closeCommentDiv+f+"' class='xp-FloatLeft  xp-CloseBox xp-Width'><\/div>").appendTo(r),i.append("<div class='xp-FloatLeft xp-Padding-4'><a href='#' class='xp-PaddingLeft-7 xp-LinkLabel'>Close<\/a><\/div>"),i.click(function(){r.empty();n.xpointComments.methods.addCommentContainer(r,t);n(this).hide()}),!1},createHtml:function(i){var f;t=n(this);t.empty();var e=n("<div id='"+n.postTemplates.ids.postMainDiv+"' class='xp-FloatLeft xp-Width xp-MarginTop-10' style='2px solid red'><\/div>").appendTo(t),u=n("<div class='xp-FloatLeft xp-Width99 xp-Padding-4 xp-BorderBottomBlack'/>"),s=n("<div class='xp-FloatLeft xp-Padding-4' ><div class='xp-FloatLeft xp-PaddingRight-5 xp-Icon-Highlight "+i.iconClass+" '> <\/div>").appendTo(u),h=n("<div class='xp-FloatLeft xp-Padding-4'><a href='#' class='xp-LinkLabel xp-FontBold Tip-HP"+i.navigationTitle.replace(" ","")+"'>"+i.navigationTitle+"<\/a><\/div>").appendTo(u),o=n("<div style='margin-top:-5px' class='xp-FloatLeft  xp-Padding-4 Tip-HPMyPostsFilter '/>").appendTo(u),r=n("<ul class='xp-PostNavigationList xp-CustomForm xp-Margin-0 xp-Padding-0'/>").appendTo(o),c=n("<li><input type='checkbox' id='Text' data-ContentType='TextPostContentType' class='"+n.postTemplates.classes.checkBox+"' name='text' value='Text' /> <label for='Text'>Text<\/label><\/li>").appendTo(r),l=n("<li ><input type='checkbox' data-ContentType='MediaPostContentType' class='"+n.postTemplates.classes.checkBox+"' name='media' id='Media' value='Media' /><label for='Media'> Media<\/label>").appendTo(r),a=n("<li><input type='checkbox' data-ContentType='DocumentPostContentType'  class='"+n.postTemplates.classes.checkBox+"' name='documents' id='Documents' value='Documents' /><label for='Documents'>Documents<\/label><\/li>").appendTo(r),v=n("<li><input type='checkbox' data-ContentType='PollPostContentType' class='"+n.postTemplates.classes.checkBox+"' name='polls' id='Polls' value='Polls'/><label for='Polls'>Polls<\/label><\/li>").appendTo(r),y=n("<li><input type='checkbox' data-ContentType='LinkPostContentType' class='"+n.postTemplates.classes.checkBox+"' name='polls' id='Links' value='Links'/> <label for='Links'>Links<\/label><\/li>").appendTo(r);t.append(u);t.append(e);f=n("<div id='"+n.postTemplates.ids.postsContainerDiv+"' class='xp-FloatLeft xp-Width99 xp-Padding-4'/>").appendTo(t);n.postTemplates.methods.displayPosts(f,i,"ALL")},displayPosts:function(i,r,u){var f={type:"GET",dataType:"json",cache:!1,url:r.serviceUrl+n.postTemplates.paths.getPostsMethod,data:{numberOfPosts:r.numPosts,contentTypes:u,page:r.currentPage,needPage:r.isPagingEnabled},success:function(t){var f=t.GetPostsResult,e,o;n(f.Data).each(function(){var t=this;t.IsPostValid&&n.postTemplates.templates[t.FormatType].draw(i,t,r)});f.NeedPage===!0&&(e=n("#"+n.postTemplates.ids.viewMoreLink+"_Container"),e.remove(),f.TotalCount>f.PageSize*f.Page&&(e=n("<div id='"+n.postTemplates.ids.viewMoreLink+"_Container' class='xp-FloatLeft xp-Width ui-state-default xp-TextAlignCenter ui-corner-all xp-MarginTop-5 xp-HoverCursor' />"),e.appendTo(i),o=n("<a id='"+n.postTemplates.ids.viewMoreLink+"' class='xp-nothers xp-PositionRelative xp-LinkLabel xp-HoverCursor xp-Height-20 xp-LineHeight-35 "+n.postTemplates.classes.tourCssViewMore+"' >View More<\/a>").appendTo(e).click(function(){var t=r;t.currentPage=f.Page+1;n.postTemplates.methods.displayPosts(i,t,u)})))}};n.postTemplates.methods.ajaxCall.call(t,f,{marginTop:"300px"})},filterPosts:function(i){var f=n(this),s=f.parents("ul").get(0),c=n(f).is(":checked"),e=n("input:checked",n(s)),h=e.length,u,o,r;h==0?n.postTemplates.methods.init.apply(t,n.makeArray(i)):(u="",n.each(e,function(){var t=this;u+=n(t).data("ContentType")+","}),o=u.substr(0,u.lastIndexOf(",")),r=n("#"+n.postTemplates.ids.postsContainerDiv),r.length>0&&(r.children().remove(),r.remove()),r=n("<div id='"+n.postTemplates.ids.postsContainerDiv+"' class='xp-FloatLeft xp-Width xp-MarginTop-10' style='2px solid red'><\/div>").appendTo(t),n.postTemplates.methods.displayPosts(r,i,o))},createPostLayout:function(t,i,r){var u=i.Id;i.IsPostValid&&n.postTemplates.templates[i.FormatType].draw(t,i,r)},getPostById:function(t){var i=n(this),r={type:"GET",cache:!1,dataType:"json",url:t.serviceUrl+n.postTemplates.paths.getPostByIdMethod,data:{postId:t.postId},success:function(r){postData=r.GetPostByIdResult;postData.IsPostValid&&n.postTemplates.templates[postData.FormatType].draw(i,postData,t)}};n.postTemplates.methods.ajaxCall.call(i,r)},playVideo:function(t,i){var o=n(t).data("postId"),r=n("<div class='"+n.postTemplates.classes.mediaDiv+"'/>"),s=n("<video id='"+n.postTemplates.ids.videoElem+i.Id+"' width='300' height='230' controls preload='auto' autoplay='true' class='video-js vjs-default-skin'><\/video>").appendTo(r);n(t).hide();n(t).parent().prepend(r);var u=i.FileName.substr(i.FileName.lastIndexOf(".")+1).toLowerCase(),f=n.postTemplates.mediaConfigs.videoConfigs[u]!=null?n.postTemplates.mediaConfigs.videoConfigs[u]:n.postTemplates.mediaConfigs.defaultVideoConfig,e=n.extend({src:i.FileUrl},f);_V_("#"+n.postTemplates.ids.videoElem+i.Id).ready(function(){var n=this;n.src(e)})},playAudio:function(t,i){var u=i.FileName.substr(i.FileName.lastIndexOf(".")+1).toLowerCase(),o=n.postTemplates.mediaConfigs.audioConfigs[u]!=null?n.postTemplates.mediaConfigs.audioConfigs[u]:n.postTemplates.mediaConfigs.defaultAudioConfig,r=n("<div class='"+n.postTemplates.classes.mediaDiv+"'/>"),f,e;n(t).hide();n(t).parent().prepend(r);n.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());n.browser.chrome?(f=n("<audio id='"+n.postTemplates.ids.audioElem+i.Id+"' controls='controls' autoplay='autoplay'><\/audio>").appendTo(r),e=n("<source src='"+i.FileUrl+"' type='audio/mp3'/>").appendTo(f)):(n("<audio id='"+n.postTemplates.ids.audioElem+i.Id+"' src='"+i.FileUrl+"' type='audio/mp3' controls='controls'><\/audio>").appendTo(r),n("#"+n.postTemplates.ids.audioElem+i.Id).ready(function(){n("#"+n.postTemplates.ids.audioElem+i.Id).mediaelementplayer({build:"/_layouts/xpointbase/jsFiles/others/",plugins:["flash"],success:function(n){n.play()}})}))}}};n.postTemplates.addTemplate("Text",{draw:function(t,i,r){return t.append(n.postTemplates.methods.getBasicPostHtml(t,i,r)),n.postTemplates.methods.bindEvents(i,r),t}});n.postTemplates.addTemplate("Image",{draw:function(t,i,r){var u,o,s;i.Link!=""?t.append(n.postTemplates.templates.Link.draw(t,i,r)):(u=n.postTemplates.methods.getBasicPostHtml(t,i,r),t.append(u));var f=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id),e=n("<div class='xp-MyPostsImg xp-FloatLeft' />"),h=n("<a href='"+i.FileUrl+"'><img  src='"+i.FileUrl+"' alt='"+i.FileName+"' text='Image posted By+"+i.CreatedBy.DisplayName+"' /><\/a>").appendTo(e);n(f).append(e);n.postTemplates.methods.bindEvents(i,r);o=n("<div class='xp-VerticalAlignTop xp-Breakword xp-Width-170 xp-FloatLeft xp-MarginLeft-5' />").appendTo(f);s=n("<a href='"+i.FileUrl+"'>"+i.FileName+"<a/>").val(i.FileName).appendTo(o)}});n.postTemplates.addTemplate("Link",{draw:function(t,i,r){var l=n.postTemplates.methods.getBasicPostHtml(t,i,r),u,a,s,c,v,y;if(t.append(l),n.postTemplates.methods.bindEvents(i,r),u=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id),a=n("<a href='"+i.Link+"'><div class=' xp-FloatLeft xp-Width xp-FontBold xp-LinkLabel'>"+i.Link+"<\/div><\/a>").appendTo(u),i.ShowThumbnail){var o=n("<div class='xp-FloatLeft xp-Width' />"),f=n("<div class=' xp-Width90 xp-Padding-10 xp-FloatLeft xp-PostBackground '/>").appendTo(o),h=n("<div class=' xp-FloatLeft xp-Width20 xp-Padding-4 xp-TextAlignCenter '/>").appendTo(f);if(i.LinkHtml.length>0){s=n("<div style='border:0px solid red;float-Left'/>").append(i.LinkHtml);n("iframe",s).attr("width","100%").attr("height","248");c=s.html();f.append(c);var e=n("<div class=' xp-FloatLeft xp-Width'/>").appendTo(f),p=n("<div class=' xp-FloatLeft xp-Width xp-FontBold xp-LinkLabel'>"+i.UrlTitle+"<\/div>").appendTo(e),w=n("<div class=' xp-FloatLeft xp-Width xp-PaddingTop-4 xp-FontLite'>"+i.UrlDescription+"<\/div>").appendTo(e);n(u).append(o)}else i.UrlThumbnailIcon.length>0?v=n("\t<img src='"+i.UrlThumbnailIcon+"' class='xp-Width'/>").appendTo(h):y=n("<div class=' xp-FloatLeft xp-Width30 xp-IconNoUrl xp-Icon'/>").appendTo(h);var e=n("<div class=' xp-FloatLeft xp-Width75'/>").appendTo(f),p=n("<a href='"+i.Link+"'><div class=' xp-FloatLeft xp-Width xp-FontBold xp-LinkLabel'>"+i.UrlTitle+"<\/div><\/a>").appendTo(e),w=n("<div class=' xp-FloatLeft xp-Width xp-PaddingTop-4 xp-FontLite'>"+i.UrlDescription+"<\/div>").appendTo(e);n(u).append(o)}}});n.postTemplates.addTemplate("Video",{draw:function(t,i,r){var u,e;if(i.Link!=""?t.append(n.postTemplates.templates.Link.draw(t,i,r)):(u=n.postTemplates.methods.getBasicPostHtml(t,i,r),t.append(u)),e=i.FileName.substr(i.FileName.lastIndexOf(".")+1).toLowerCase(),n.inArray(e,r.playableMediaFileTypes)>-1){t.append(u);var o=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id),f=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4' data-postId='"+i.Id+"'/>"),s=n("<div id ='"+n.postTemplates.ids.videoIcon+i.Id+"' class='xp-IconVideoPlay xp-FloatLeft xp-Icon-Highlight'><\/div>").appendTo(f),h=n("<div class='xp-VerticalAlignTop xp-FloatLeft xp-MarginLeft-5 xp-Breakword xp-Width25'><a href='"+i.FileUrl+"' class='xp-LinkLabel'>"+i.FileName+"<\/a><\/div>").appendTo(f);n(o).append(f);n.postTemplates.methods.bindEvents(i,r)}else n.postTemplates.templates.Document.draw(t,i,r)}});n.postTemplates.addTemplate("Audio",{draw:function(t,i,r){var f,e;if(i.Link!=""?t.append(n.postTemplates.templates.Link.draw(t,i,r)):(f=n.postTemplates.methods.getBasicPostHtml(t,i,r),t.append(f)),e=i.FileName.substr(i.FileName.lastIndexOf(".")+1).toLowerCase(),n.inArray(e,r.playableAudioFileTypes)>-1){var o=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id),u=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4' data-postId='"+i.Id+"'/>"),s=n("<div id ='"+n.postTemplates.ids.audioIcon+i.Id+"' class='xp-IconAudioPlay xp-FloatLeft  xp-Icon-Highlight'><\/div>").appendTo(u),h=n("<div class='xp-VerticalAlignTop xp-FloatLeft xp-MarginLeft-5 xp-Breakword xp-Width25'><a href='"+i.FileUrl+"' class='xp-LinkLabel'>"+i.FileName+"<\/a><\/div>").appendTo(u);n(o).append(u);n.postTemplates.methods.bindEvents(i,r)}else n.postTemplates.templates.Document.draw(t,i,r)}});n.postTemplates.addTemplate("SystemForumPosts",{draw:function(t,r,u){var s=n.postTemplates.methods.getBasicPostHtml(t,r,u);t.append(s);var o=n("#"+n.postTemplates.ids.postDescriptionFormat+r.Id),f=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4'/>"),e=n("<ul class='xp-OrgUpdatesList'/>").appendTo(f),h={type:"GET",cache:!1,dataType:"json",url:u.serviceUrl+n.postTemplates.paths.getForumById,data:{forumIds:r.FilterValues},success:function(t){var a=t.GetForumByIdResult,v=r.FilterValues.split(",").length,c,l,s,h;for(i=0;i<v;i++){c="xp-DisplayBlock";l="";i>=5&&(c="xp-DisplayNone",l=n.postTemplates.classes.viewMore);var y=n("<li class='"+l+" "+c+"'/>").appendTo(e),p=n("<div class='xp-FloatLeft xp-ForumTopics xp-Icon xp-Icon'><span class='xp-BadgePicIcon xp-Icon'><\/span><\/div>").appendTo(y),w=n("<div class='xp-FloatLeft xp-Padding-2'><a href='"+a[i].Url+"' class='xp-LinkLabel'>"+a[i].Title+"<\/a><\/div>").appendTo(y)}v>5&&(s=n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewMoreDiv+r.Id+"' class='"+n.postTemplates.classes.viewMoreDiv+"'><a href='#' class='xp-LinkLabel "+n.postTemplates.classes.tourCssViewMore+"'>View More...<\/a><\/div><\/div>").appendTo(f),h=n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewLessDiv+r.Id+"' class='"+n.postTemplates.classes.viewLessDiv+"'><a href='#' class='xp-LinkLabel'>View Less...<\/a><\/div><\/div>").appendTo(f).hide(),s.click(function(){e.find("li").show();s.hide();h.show()}),h.click(function(){e.find("li."+n.postTemplates.classes.viewMore).hide();h.hide();s.show()}));n(o).append(f);n.postTemplates.methods.bindEvents(r,u)}};return n.postTemplates.methods.ajaxCall.call(o,h),t}});n.postTemplates.addTemplate("SystemLifeCyclePosts",{draw:function(t,r,u){var s=n.postTemplates.methods.getBasicPostHtml(t,r,u);t.append(s);var o=n("#"+n.postTemplates.ids.postDescriptionFormat+r.Id),f=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4'/>"),e=n("<ul class='xp-OrgUpdatesList'/>").appendTo(f),c=[r.FilterValues],h={type:"GET",cache:!1,dataType:"json",url:u.serviceUrl+n.postTemplates.paths.getLifeCycleById,data:{trackerIds:r.FilterValues},success:function(t){var a=t.GetLifeCycleByIdResult,v=r.FilterValues.split(",").length,c,l,s,h;for(i=0;i<v;i++){c="xp-DisplayBlock";l="";i>=5&&(c="xp-DisplayNone",l=n.postTemplates.classes.viewMore);var y=n("<li class='"+l+" "+c+"'/>").appendTo(e),p=n("<div class='xp-FloatLeft xp-LifeCycleTopics xp-Icon xp-Icon'><span class='xp-BadgePicIcon xp-Icon'><\/span><\/div>").appendTo(y),w=n("<div class='xp-FloatLeft xp-Padding-2'><a href='"+a[i].Url+"' class='xp-LinkLabel'>"+a[i].Title+"<\/a><\/div>").appendTo(y)}v>5&&(s=n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewMoreDiv+r.Id+"' class='"+n.postTemplates.classes.viewMoreDiv+"'><a href='#' class='xp-LinkLabel "+n.postTemplates.classes.tourCssViewMore+"'>View More...<\/a><\/div><\/div>").appendTo(f),h=n("<div class='xp-FloatLeft xp-Width xp-Padding-4'><div id='"+n.postTemplates.ids.viewLessDiv+r.Id+"' class='"+n.postTemplates.classes.viewLessDiv+"'><a href='#' class='xp-LinkLabel'>View Less...<\/a><\/div><\/div>").appendTo(f).hide(),s.click(function(){e.find("li").show();s.hide();h.show()}),h.click(function(){e.find("li."+n.postTemplates.classes.viewMore).hide();h.hide();s.show()}));n(o).append(f);n.postTemplates.methods.bindEvents(r,u)}};return n.postTemplates.methods.ajaxCall.call(o,h),t}});n.postTemplates.addTemplate("SystemTopContributorsPosts",{draw:function(t,r,u){var o=n.postTemplates.methods.getBasicPostHtml(t,r,u);t.append(o);var f=n("#"+n.postTemplates.ids.postDescriptionFormat+r.Id),e=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4'/>"),s=n("<div class='xp-FloatLeft xp-Width60'/>").appendTo(e),h={type:"GET",cache:!1,dataType:"json",url:n.postTemplates.paths.getUserDetails,data:{userMessage:r.FilterValues},success:function(t){var u=t.GetUserDetailsResult;for(i=0;i<r.FilterValues.split(",").length;i++)var f=n("<div class='xp-FloatLeft xp-Padding-2'/>").appendTo(s),e=n("<span class='xp-UserBadgePic'/>").appendTo(f),o=n("<a href='"+u[i].UserProfileUrl+"'><img  src='"+u[i].UserProfilePic+"' alt='"+u[i].UserName+"' title='"+u[i].UserName+"'/><span class='xp-BadgePicIcon xp-Icon'><\/span><\/a>").appendTo(e)}};return n.postTemplates.methods.ajaxCall.call(f,h),n(f).append(e),n.postTemplates.methods.bindEvents(r,u),t}});n.postTemplates.addTemplate("Poll",{draw:function(t,i,r){var u,e,f,o,s;i.Link!=""||i.FileName!=""?i.Link!=""?t.append(n.postTemplates.templates.Link.draw(t,i,r)):(u=i.FileName.substr(i.FileName.lastIndexOf(".")+1).toLowerCase(),n.inArray(u,r.docFileTypes)>-1?t.append(n.postTemplates.templates.Document.draw(t,i,r)):n.inArray(u,r.mediaFileTypes)>-1?t.append(n.postTemplates.templates.Video.draw(t,i,r)):n.inArray(u,r.imageFileTypes)>-1&&t.append(n.postTemplates.templates.Image.draw(t,i,r))):(f=n.postTemplates.methods.getBasicPostHtml(t,i,r),t.append(f),n.postTemplates.methods.bindEvents(i,r));e=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id);e.length==0&&(f=n.postTemplates.methods.getBasicPostHtml(t,i,opts),t.append(f),e=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id));o=n("<div class='xp-FloatLeft xp-Width' id='chartArea_"+i.Id+"'/>").appendTo(e);s=i;n.postTemplates.templates.Poll.drawPoll(o,s,r)},drawPoll:function(t,i,r){var u={type:"GET",cache:!1,dataType:"json",url:r.serviceUrl+n.postTemplates.paths.getPollData,data:{postId:i.Id},success:function(i){var u=i.GetPollDataResult;u&&(u.CurrentUserSelection.length==0?n.postTemplates.templates.Poll.voteForPoll(t,u,r):n.postTemplates.templates.Poll.renderPoll(t,u,r))}};n.postTemplates.methods.ajaxCall.call(t,u)},voteForPoll:function(t,i,r){var s,u,f;t.empty();var h=i.MultipleChoiceAllowed==!0?"checkbox":"radio",e=n("<div id='"+n.postTemplates.ids.pollContentDiv+i.Id+"' class='xp-FloatLeft xp-Width xp-PaddingTop-4'>").appendTo(t),o=1;n(i.Options).each(function(t){var u=i.Options[t];if(u){var r=n("<div style='padding:5px 5px 5px 1px' class='xp-Width xp-CustomForm '/>"),f="polloption"+i.Id+"_"+o,s=n("<input autocomplete='off' type='"+h+"' id='"+f+"' optionLabel='"+o+"' name='"+n.postTemplates.ids.pollOptions+i.Id+"' />").appendTo(r),c=n("<label class='xp-PollOptionLabel' for='"+f+"'>"+u+"<\/label>").appendTo(r);e.append(r)}o++});s=n("<div class='xp-OriginatorBtn'><\/div>").appendTo(e).hide();u=n("<div class='ui-secondarytabclr ui-tabbuttonstyle xp-FloatLeft xp-FollowButton'><\/div>").appendTo(s);u.append("<div class='xp-FloatLeft xp-FollowButtonPadding' ><a href='#' class='Fontclrlight xp-Login'>Confirm<\/a><\/div>");f=n("input[name='"+n.postTemplates.ids.pollOptions+i.Id+"']");f.click(function(){var n,t;s.show();i.MultipleChoiceAllowed==!1&&(n=this,f.not(n).attr("checked",!1),t=f.is(":checked"))});u.click(function(){var f=[],e,o;n("input[name='"+n.postTemplates.ids.pollOptions+i.Id+"']:checked").each(function(){f.push(n(this).attr("optionLabel"))});e={postId:i.Id,optionNumbers:f};o={type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:r.serviceUrl+n.postTemplates.paths.savePoll,data:n.toJSON(e),success:function(i){var u=i.SavePollResult;n.postTemplates.templates.Poll.renderPoll(t,u,r)}};n.postTemplates.methods.ajaxCall.call(u,o)});t.append(e)},renderPoll:function(t,i,r){var s=["#800080","#FFC000","#9BBB59","#C0504D","#4F81BD"],h=0,u,c,v,y,l,p,b,a,e,o;if(i&&i.Results&&i.Options){for(t.empty(),u=0;u<n(i.Results).length;u++)h=h+parseInt(i.Results[u]);for(c=[],u=0;u<n(i.Options).length;u++)v=parseInt(i.Results[u])/h*100,c.push(v);y=[];l=i.Results;n(l).length>0&&(p=n("<div class='xp-FloatLeft xp-Width49' ><\/div>").appendTo(t),b=n("<div  id='"+n.postTemplates.ids.pollChartDiv+i.Id+"' class='xp-MarginTop-25' style='height:230px;'/>").appendTo(p),n.jqplot.config.enablePlugins=!0,n.jqplot(n.postTemplates.ids.pollChartDiv+i.Id,[l.reverse()],{legend:{show:!1,showLabel:!1},cursor:{show:!0,tooltipLocation:"ne",followMouse:!1},seriesColors:s,seriesDefaults:{renderer:n.jqplot.BarRenderer,rendererOptions:{barWidth:25,barDirection:"horizontal",barPadding:7,barMargin:18,shadowAngle:135,varyBarColor:!0,highlightColors:s},pointLabels:{show:!0,location:"w",formatString:"%d"}},axes:{xaxis:{tickOptions:{showLabel:!1}},yaxis:{showLabel:!1,renderer:n.jqplot.CategoryAxisRenderer,ticks:y,tickOptions:{show:!1,showLabel:!1}}},grid:{background:"#efefef",borderWidth:1,drawGridLines:!1,gridLineColor:"#d9d9d9",borderColor:"#000000",shadow:!1}}),n.postTemplates.templates.Poll.addHighlighter(t,i));n(".jqplot-yaxis-tick").hide();n(".jqplot-point-label").css("color","#000000");var w=n("<div id='"+n.postTemplates.ids.pollInputDiv+i.Id+"' class='xp-FloatLeft xp-PaddingTop-4 xp-Width50 xp-FontBold xp-MarginTop-25' ><div>").appendTo(t),k=i.MultipleChoiceAllowed==!0?"checkbox":"radio",f=1;n(i.Options).each(function(t){var l=i.Options[t].length>20?i.Options[t].substring(0,20).substring(0,i.Options[t].substring(0,20).lastIndexOf(" "))+"...":i.Options[t],u,e,v,y,p;if(l){u="";e="";n.inArray(f,i.CurrentUserSelection)>-1&&(u="checked='checked'",e="<img src='"+i.UserPictureUrl+"'/>");var o=n("<div class='xp-ClearBoth'>"),r=n(".jqplot-event-canvas").height()/i.Options.length,a=n("<div style='line-height:"+r+"px;height:"+r+"px;' class='xp-FloatLeft xp-CustomForm' />").appendTo(o),h="polloption"+i.Id+"_"+f;i.AnswerChangesAllowed==!0&&(v=n("<input autocomplete='off' type='"+k+"' id='"+h+"' optionLabel='"+f+"' name='"+n.postTemplates.ids.pollOptions+i.Id+"'"+u+"/>").appendTo(a));y=n("<label for='"+h+"' title='"+i.Options[t]+"' style='color:"+s[i.Options.length-f]+";'>"+l+" - "+parseInt(c[f-1])+"% <\/label>").appendTo(a);p=n("<div id='"+n.postTemplates.ids.pollImageDiv+h+"' style='height:"+r+"px;' class='xp-DisplayBlock xp-FloatLeft xp-MarginLeft-12 xp-Width12' ><div class='xp-Width xp-FloatLeft ' style='height:"+r/3.5+"px;' ><\/div><div class='xp-PollProfilePic xp-FloatLeft'>"+e+"<\/div><\/div>").appendTo(o);w.append(o)}f++});a=n("<div class='xp-OriginatorBtn'><\/div>").appendTo(w).hide();e=n("<div id='"+n.postTemplates.ids.pollConfirmButtonDiv+i.Id+"' class='ui-secondarytabclr ui-tabbuttonstyle xp-FloatLeft xp-FollowButton'><\/div>").appendTo(a);e.append("<div class='xp-FloatLeft xp-FollowButtonPadding' ><a href='#' class='Fontclrlight xp-Login'>Confirm<\/a><\/div>");o=n("input[name='"+n.postTemplates.ids.pollOptions+i.Id+"']");o.click(function(){var t,r,u;a.show();t=n("#"+n.postTemplates.ids.pollImageDiv+n(this).attr("id"));t.toggle();i.MultipleChoiceAllowed==!1&&(r=this,o.not(r).attr("checked",!1),u=o.is(":checked"))});e.click(function(){var u=[],f,o;n("input[name='"+n.postTemplates.ids.pollOptions+i.Id+"']:checked").each(function(){u.push(n(this).attr("optionLabel"))});f={postId:i.Id,optionNumbers:u};o={type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:r.serviceUrl+n.postTemplates.paths.savePoll,data:n.toJSON(f),success:function(i){var u=i.SavePollResult;u.CurrentUserSelection.length==0?n.postTemplates.templates.Poll.voteForPoll(t,u,r):n.postTemplates.templates.Poll.renderPoll(t,u,r)}};n.postTemplates.methods.ajaxCall.call(e,o)})}},addHighlighter:function(t,i){n("#"+t.attr("id")).bind("jqplotDataHighlight",function(t,r,u,f){var o;if(n(f).get(1))try{var e=i.Options,s=i.Results[parseInt(n(f).get(1))-1],h=e[e.length-parseInt(n(f).get(1))];mouseX=t.pageX;mouseY=t.pageY;o=n(".jqplot-highlighter-tooltip").css({"z-index":999999});o.html("<div style='background-color:#ffffff;padding:3px;border:1px solid #3f3f40' class='xp-FontBold'>"+h+": "+s+" votes<\/div>")}catch(c){}});n("#"+t.attr("id")).bind("jqplotDataUnhighlight",function(){n(".jqplot-highlighter-tooltip").html("")})}});n.postTemplates.addTemplate("Document",{draw:function(t,i,r){var f,o,h;i.Link!=""?t.append(n.postTemplates.templates.Link.draw(t,i,r)):(f=n.postTemplates.methods.getBasicPostHtml(t,i,r),t.append(f),n.postTemplates.methods.bindEvents(i,r));var s=n("#"+n.postTemplates.ids.postDescriptionFormat+i.Id),u=n("<div class='xp-FloatLeft xp-Width xp-PaddingTop-4'/>"),e=n("<div class='xp-MyPostsImg xp-FloatLeft'/>").appendTo(u);n.xpoint.utils.getImageUrl(i.FileName,function(t){if(t!=null)var i=n("<img src='"+t+"'/>").appendTo(e)},function(t){var i=n("<img src='"+t+"'/>").appendTo(e)});o=n("<div class='xp-VerticalAlignTop xp-Width-170 xp-Breakword xp-FloatLeft xp-MarginLeft-5'/>").appendTo(u);h=n("<a href='"+i.FileUrl+"'  class='xp-LinkLabel'>"+i.FileName+"<\/a>").appendTo(o);n(s).append(u)}})})(jQuery);
/*
//# sourceMappingURL=xpoint.postTemplates.min.js.map
*/