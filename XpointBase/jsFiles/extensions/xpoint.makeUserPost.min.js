(function(n){n.fn.makeUserPost=function(t){if(this&&this.length!=0){if(typeof t=="object"){var i=n(this);return n.makeUserPost.methods.init.call(i,t)}if(n.makeUserPost.methods[t])return makeUserPostOptions=n.extend(makeUserPostOptions,Array.prototype.slice.call(arguments,1)),n.makeUserPost.methods[t].call(n(this),makeUserPostOptions)}};var u=!1,o="txt",t=!1,r=!1,f=!1,s=!0,e="TextPostContentType",h=!1;n.makeUserPost={defaults:{inputBoxWaterMarkText:"Write / Ask something",addPollOptionWaterMarkText:"+ Add a poll option",urlWaterMarkText:"Type/ Paste link here",maxTextBoxCharCount:140,systemAdmin:!1,maxPollOptions:5,minPollOptions:2,validFileExtensions:["eps","mp4","csv","mp3","accd","accdt","accdc","accde","accdr","asax","ascx","asmx","asp","aspx","avi","bmp","cat","chm","config","css","db","dib","disc","doc","docm","docx","dot","dotm","dotx","dvd","dwp","dwt","eml","est","fwp","flv","gif","hdp","hlp","hta","htm","htt","inf","ini","jfif","jpe","jpeg","jpg","jse","log","master","mht","mhtml","mov","mpd","mpp","mps","mpt","mpw","mpx","msg","msi","ocx","ogv","odc","odp","odt","ods","one","onepkg","onetoc2","pdf","png","pot","potm","potx","ppa","ppam","ppt","pptm","pptx","pps","ppsd","ppsm","ppsx","psp","psd","ptm","ptt","pub","rdl","rsapplication","rsc","rsd","rsds","rtf","smdl","stp","stt","thmx","tif","tiff","txt","vbe","vbs","vdw","vdx","vsd","vsl","vss","vst","vsu","vsw","vsx","vtx","wdp","webpart","wm","wma","wmd","wmp","wms","wmv","wmx","wmz","wsf","xla","xlam","xls","xlsm","xlsx","xlt","xltb","xltm","xltx","xml","xps","xsd","xsl","xsn","xslt","zip"],mediaFileTypes:["gif","jpg","mp4","mp3","wmv","avi","mov","mkv","m4a","png","ogv","flv"],thumbnailIconSrc:"",minPollToShow:2,timeOut:2500},paths:{addUserFile:"/_Layouts/IImpact.Web/UserPostsService.asmx/AddFile",addOrganizationFile:"/_Layouts/IImpact.Web/OrganizationPostsService.asmx/AddFile",addUserPost:"/_vti_bin/XPointBase/UserPostsService.svc/AddPost",addOrganizationPost:"/_vti_bin/XPointBase/OrganizationPostsService.svc/AddPost",getIconUrl:"/_vti_bin/XPointBase/UserPostsService.svc/getFileIcon",saveLinkInfo:""},ids:{containerDiv:"mainDiv",inputBox:"inputBox",pollDiv:"pollDiv",pollLink:"pollLink",urlInputBox:"urlInputBox",url:"url",linkDiv:"linkDiv",urlLoading:"urlLoading",urlTitle:"urlTitle",urlIcon:"urlIcon",urlDescription:"urlDescription",urlThumbnailPreview:"urlThumbnailPreview",urlDeleteIcon:"urlDeleteIcon",urlAcceptIcon:"urlAcceptIcon",urlInputSubDiv:"urlInputSubDiv",pollRemoveLink:"pollRemoveLink",removePollLinkHref:"removePollLinkHref",showThumbnailOption:"showThumbnailOption",pollOptionsContainer:"pollOptionsContainer",thumbnailIconSrcDiv:"thumbnailIconSrcDiv",thumbnailDefaultIcon:"thumbnailDefaultIcon",acknowledgeOption:"acknowledgeOption",acknowledgeIcon:"acknowledgeIcon",acknowledgeOptionUrl:"acknowledgeOptionUrl",acknowledgeMainDiv:"acknowledgeMainDiv",pollOptionsText:"pollOptionsText",errorMainDiv:"errorMainDiv",errorTextDiv:"errorTextDiv",errorText:"errorText",successMainDiv:"successMainDiv",successTextDiv:"successTextDiv",successText:"successText",urlPreview:"urlPreview",buttonDiv:"buttonDiv",uploadDiv:"uploadDiv",fileUpload:"fileUpload",fileIcon:"fileIcon",fileMainDiv:"fileMainDiv",fileDeleteIcon:"fileDeleteIcon",counterDiv:"counterDiv",asUserOption:"asUserOption",fileNameID:"fileNameID",allowMultipleOption:"allowMultipleOption",allowAnswerChange:"allowAnswerChange",selectOptions:"selectOptions",asOrganizationOption:"asOrganizationOption",radioButtonContainer:"radioButtonContainer",radioButtonMainDiv:"radioButtonMainDiv",multilineInputBox:"multilineInputBox",postUpdateDialog:"postUpdateDialog",asUserRadioButton:"asUserRadioButton",forOrganizationRadioButton:"forOrganizationRadioButton",chooseFileButton:"chooseFileButton",removeFile:"removeFile",postUpdateText:"postUpdateText",customFileName:"customFileName",addPollDiv:"addPollDiv",createPollLink:"createPollLink",addOptionDiv:"addOptionDiv",addPollOptionInput:"addPollOptionInput",pollOptionsDiv:"pollOptionsDiv",postButton:"postButton",cancelButton:"cancelButton",linkFileText:"linkFileText",newlyCreated:"newlyCreated"},classes:{floatRight:"xp-FloatRight",resetMarginPadding:"xp-ResetMarginPadding xp-FloatLeft",multilineCss:"xp-TextAreaWidthIe",counterDiv:"xp-FloatRight xp-MarginRight-3",counterDivCss:"xp-FloatLeft xp-Width  xp-DottedBorderBottom xp-CounterDivCss",floatLeft:"xp-FloatLeft",linkLabel:"xp-LinkLabel",linksCss:"xp-FloatLeft xp-Padding-4 Tip-HPFileLink",dialogDiv:"xp-Dialog xp-OverflowHidden xp-ResetMarginPadding  ",dialogHeader:"xp-DialogHeader",headerText:" xp-PaddingDialog xp-LinkColor ",dialogHeaderDiv:" xp-DialogHeader xp-DialogBorderBottom xp-PaddingDialog xp-DialogBottom xp-DialogFooterPadding ",textBoxDivCss:" xp-PaddingDialog xp-DialogHeader ",overflowHidden:"xp-OverflowHidden",fullWidth:"xp-Width",displayBlock:"xp-DisplayBlock",dialogTopBottomPadding:"xp-DialogFooterPadding",dialogBorderBottom:"xp-DialogBorderBottom ",dialogBgColor:"xp-DialogBottom",dialogPadding:"xp-PaddingDialog",textColor:"xp-LinkColor",dashedBorder:"xp-DashedBorder",noBorder:"xp-BorderNone",marginLeft20:" xp-MarginLeft20 ",dialogHeader:"xp-DialogHeader",transparent:"xp-Transparent",displayNone:"xp-DisplayNone",allUsersDiv:" xp-FloatLeft xp-Width10 xp-BorderRight xp-PaddingDialog xp-DialogFooterPadding ",borderRight:"xp-BorderRight xp-PaddingDialog xp-DialogFooterPadding",visibilityHidden:"xp-VisibilityHidden",dialogCheckBox:"xp-DialogCheckBox",pollBorderBottom:"xp-PollBorderBottom",dashedDivCss:" xp-DialogHeader xp-PaddingDialog xp-DashedBorder ",buttonCss:"xp-FloatLeft xp-DialogFooterPadding xp-PaddingDialog ",checkBoxCss:"xp-width32 xp-BorderRight xp-DialogFooterPadding xp-PaddingDialog xp-FloatLeft xp-VisibilityHidden xp-DialogCheckBox ",createPollcss:" xp-DialogHeader xp-Transparent xp-PollBorderBottom ",pollOption:" xp-ResetMarginPadding xp-FloatLeft xp-DialogHeader xp-Width xp-PollBorderBottom ",addAnOption:" xp-ResetMarginPadding xp-PaddingDialog xp-FloatLeft ",markAsRead:" xp-ResetMarginPadding xp-FloatLeft xp-Width xp-DialogHeader xp-PaddingDialog xp-DisplayNone xp-MarkAsRead ",acknowledgeMainDiv:"xp-FloatLeft xp-Width xp-PostBackground xp-DisplayNone xp-TxtBox xp-BottomBorder",acknowledgeIcon:"xp-FloatLeft xp-Padding-4  xp-Icon-Highlight  xp-IconAddAcknowledge-Highlight",acknowledgeOption:"xp-FloatLeft xp-Padding-4",acknowledgeOptionUrl:"xp-LinkLabel xp-HoverCursor",acknowledgeUrlTour:"Tip-HPAckOptionUrl",successMainDiv:"xp-FloatLeft xp-Width xp-PositionAbsolute",successMain:"xp-PositionRelative xp-FloatLeft xp-Width xp-Height-0",successTextDiv:"xp-SuccessMsg xp-DisplayBlock"},methods:{init:function(t){var r=this,i;t=n.extend(n.makeUserPost.defaults,t);i=n("<div class='xp-FloatLeft xp-Width xp-TxtBox xp_link'  id= '"+n.makeUserPost.ids.containerDiv+"' />");i.appendTo(r);i.data("updateOptions",t);n.makeUserPost.methods.createWaterMarkHtml.call(i,t)},createWaterMarkHtml:function(t){var i=n(this).empty(),r;t=n.extend({},i.options,t);r=n("<div class='xp-Padding-5 Tip-HPMakePost no_padding' ><span id='"+n.makeUserPost.ids.inputBox+"' name='"+n.makeUserPost.ids.inputBox+"' /><\/div>").append(t.inputBoxWaterMarkText).appendTo(i).hide().fadeIn("slow").click(function(){n.makeUserPost.methods.createPostHtml.apply(i,n.makeArray(t))})},determineContentType:function(){},addPoll:function(i){e="PollPostContentType";t=!0;n("#"+n.makeUserPost.ids.pollLink).addClass(n.makeUserPost.classes.displayNone);n("#"+n.makeUserPost.ids.pollRemoveLink).removeClass(n.makeUserPost.classes.displayNone).hide().fadeIn("slow");n.makeUserPost.methods.addPollOptions.apply(this,n.makeArray(i))},removePoll:function(){e="TextPostContentType";t=!1;n("#"+n.makeUserPost.ids.pollLink).removeClass(n.makeUserPost.classes.displayNone);n("#"+n.makeUserPost.ids.pollRemoveLink).addClass(n.makeUserPost.classes.displayNone).show().fadeOut("slow");n("#"+n.makeUserPost.ids.pollOptionsDiv).remove();n("#"+n.makeUserPost.ids.selectOptions).addClass(n.makeUserPost.classes.displayNone).show().fadeOut("medium");n.makeUserPost.methods.clearError()},addPollOptions:function(t){var s=n("#"+n.makeUserPost.ids.pollOptionsContainer),u;for(u=n("#"+n.makeUserPost.ids.pollOptionsDiv).length==0?n("<div id='"+n.makeUserPost.ids.pollOptionsDiv+"'>").appendTo(s).hide().fadeIn("slow"):n("#"+n.makeUserPost.ids.pollOptionsDiv),i=0;i<t.maxPollOptions;i++){var f=i<t.minPollToShow,h=f===!0?"block":"none",c="pollIdPrefix"+i,r=n("<div id='"+c+"' style='display:"+h+"' class='xp-FloatLeft xp-Width xp-PostBackground  xp-DottedBorderBottom pollOptionMainDiv' />"),l=n("<div class='xp-FloatLeft xp-Padding-4  xp-Icon-Highlight  xp-IconAddPoll'/>"),e=n("<div class='xp-FloatLeft xp-Padding-4 ' />"),o=n("<input  type='text'  autocomplete='off'/>").attr("maxlength",t.maxTextBoxCharCount).appendTo(e);o.keypress(function(){var i=n(this).parents(".pollOptionMainDiv").next();i.slideDown("slow");n("input",i).watermark(t.addPollOptionWaterMarkText).blur()});l.appendTo(r);e.appendTo(r);r.appendTo(u);f===!0&&o.watermark(t.addPollOptionWaterMarkText)}n("#"+n.makeUserPost.ids.selectOptions).removeClass(n.makeUserPost.classes.displayNone).hide().fadeIn("slow")},processPollAddition:function(t){var i=this;n.makeUserPost.methods.addPoll.apply(i,n.makeArray(t))},validatePollAddition:function(t){var r=n("input[type='text']",n("#"+n.makeUserPost.ids.pollDiv)),i;return r.length<t.maxPollOptions?(i=n(this),n(i.parents(".pollOptionMainDiv").get(0)).next(".pollOptionMainDiv").length==0):!1},validateUrl:function(n){var t=new RegExp("^(http|Http|HTTP|Https|https|ftp|Ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$");return t.test(n)},processUrl:function(){var u=n("#"+n.makeUserPost.ids.url),t=u.val(),i=n("#"+n.makeUserPost.ids.urlInputSubDiv),r;t.length>0&&(n.makeUserPost.methods.validateUrl(t)?(n.makeUserPost.methods.clearError(),i.showLoading(),r=t.slice(0,t.indexOf(":")).toLowerCase()+t.slice(t.indexOf(":"),t.length),n.makeUserPost.methods.getUrlInfo.call(i,r),n("#"+n.makeUserPost.ids.showThumbnailOption).click().change()):n.makeUserPost.methods.addError("Invalid Url"))},validatePost:function(r){var f=n("#"+n.makeUserPost.ids.url).val(),u,e;if(n("#"+n.makeUserPost.ids.multilineInputBox).val().length==0)return n.makeUserPost.methods.addError("Sorry, the post is empty"),!1;if(!n.makeUserPost.methods.validateUrl(f)&&f.length>0)return n.makeUserPost.methods.addError("Invalid Url"),!1;if(s){if(u=0,t){for(i=0;i<r.maxPollOptions;i++)e="#pollIdPrefix"+i+" input",n(e).val().length>0&&u++;if(u<r.minPollOptions)return n.makeUserPost.methods.addError("Sorry, minimum poll options are "+r.minPollOptions),!1}return!0}return!1},orderPoll:function(t){for(i=1;i<=t.maxPollOptions;i++)if(n("#"+n.makeUserPost.ids.pollOptionsText+i).val().length==0){var r=!1;for(j=1+i;j+i<=t.maxPollOptions&&!r;j++)n("#"+n.makeUserPost.ids.pollOptionsText+(j+i)).val().length!=0&&(n("#"+n.makeUserPost.ids.pollOptionsText+i).val(n("#"+n.makeUserPost.ids.pollOptionsText+(j+i)).val()),n("#"+n.makeUserPost.ids.pollOptionsText+(j+i)).val(""),r=!0)}},getFileIcon:function(t){var i=t.fileIconSrc;return n.ajax({url:n.makeUserPost.paths.getIconUrl,type:"GET",cache:!1,async:!1,datatype:"json",data:{fileName:t.fileName},success:function(n){n&&n.GetFileIconResult&&(i=n.GetFileIconResult)}}),i},applyFileIcon:function(t){t!=null&&n("#"+n.makeUserPost.ids.fileIcon).attr("src",t)},validateFileUpload:function(t,i){return n.inArray(t.toLowerCase(),i.validFileExtensions)<0?!1:!0},determineMediaExtension:function(t,i){n.inArray(t,i.mediaFileTypes)+1<0?(o=t,e="DocumentPostContentType"):(o=t,e="MediaPostContentType")},getPostData:function(i){var u={},c=n("#"+n.makeUserPost.ids.multilineInputBox).val(),l,o,s;return u.description=c.replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),u.pollOption1=t?n("#pollIdPrefix0 input").val():"",u.pollOption2=t?n("#pollIdPrefix1 input").val():"",u.pollOption3=t?n("#pollIdPrefix2 input").val():"",u.pollOption4=t?n("#pollIdPrefix3 input").val():"",u.pollOption5=t?n("#pollIdPrefix4 input").val():"",u.isAnswerChangesAllowed=t?n("#"+n.makeUserPost.ids.allowAnswerChange).attr("checked"):!1,u.isMultipleAnswersAllowed=t?n("#"+n.makeUserPost.ids.allowMultipleOption).attr("checked"):!1,u.forOrganization=n("#"+n.makeUserPost.ids.asOrganizationOption).attr("checked")?!0:!1,u.isMarkAsRead=h,l=i.isAdmin===!0?n.makeUserPost.paths.addOrganizationPost:n.makeUserPost.paths.addUserPost,u.link=r?n("#"+n.makeUserPost.ids.url).val():"",u.urlTitle=r&&f?n("#"+n.makeUserPost.ids.urlTitle).html():"",u.showThumbnail=n("#"+n.makeUserPost.ids.showThumbnailOption).attr("checked")?!0:!1,u.urlThumbnailIcon=r&&f?n("#"+n.makeUserPost.ids.urlIcon).attr("src"):"",u.urlDescription=r&&f?n("#"+n.makeUserPost.ids.urlDescription).html():"",o=n("#"+n.makeUserPost.ids.urlInputSubDiv),r&&f?(s=n("iframe",o.data().linkInfo.code).length>0?o.data().linkInfo.code:"",u.linkHtml=s):u.linkHtml="",u.fileIncluded=!1,u.contentType=e,u.contentType=n.makeUserPost.methods.determineContentType.call(this,i),u},determineContentType:function(i){return t?"PollPostContentType":u?n.inArray(o,i.mediaFileTypes)>-1?"MediaPostContentType":"DocumentPostContentType":r?"LinkPostContentType":"TextPostContentType"},postData:function(t,i){var r=n(this),u,f;r.options=i;u=n("#"+n.makeUserPost.ids.asOrganizationOption).attr("checked")?n.makeUserPost.paths.addOrganizationPost:n.makeUserPost.paths.addUserPost;f={url:u,data:n.toJSON(t),success:function(){n.makeUserPost.methods.afterPost.call(r,t,i)}};n.xpoint.utils.ajaxCall(f)},afterPost:function(t){var h=n(this),o=n("#"+n.makeUserPost.ids.containerDiv),u,f,e,s,r,i;t.isMarkAsRead===!0&&n(".preUpdatesContainer").xpointTemplates("refreshPreContainer",{});n("#"+n.makeUserPost.ids.successMainDiv).length==0?(f=n("<div />").attr("class",n.makeUserPost.classes.successMain).appendTo(o.parent()),u=n("<div />").attr("class",n.makeUserPost.classes.successMainDiv).attr("style","z-index:10").attr("id",n.makeUserPost.ids.successMainDiv).appendTo(f),e=n("<div />").attr("class",n.makeUserPost.classes.successTextDiv).attr("id",n.makeUserPost.ids.successTextDiv).appendTo(u).fadeIn(2500).fadeOut(2500),s=n("<span />").attr("id",n.makeUserPost.ids.successText).appendTo(e).text("Your post is successful !")):n("#"+n.makeUserPost.ids.successMainDiv).fadeIn(2500).fadeOut(2500);r=n("#"+n.postSummary.ids.summaryPostContainer);i={};i.postCount=1;i.page=1;i.needPage=!1;n.postSummary.methods.getPostData.call(r,i);n.postTemplates&&r.postTemplates("refreshData")},getUrlInfo:function(t){var i=n(this),r=n("#"+n.makeUserPost.ids.containerDiv),u=r.data().updateOptions,f=n("<div id='"+n.makeUserPost.ids.newlyCreated+"' />").append("<a href='"+t+"'><\/a>");f.embedly({maxWidth:150,wmode:"transparent",method:"after",key:u.embedlyKey,success:function(t){var r,u;n.makeUserPost.methods.clearError();r=t;i.hideLoading();n.makeUserPost.methods.createLinkHtml.call(i,r);u=n("#"+n.makeUserPost.ids.url);u.attr("readonly",!0)},error:function(){i.hideLoading();n.makeUserPost.methods.addError("Unable to retrieve url")}})},saveLinkInfo:function(t){var i=t,r={url:n.makeUserPost.paths.saveLinkInfo,data:'{"uniqueId":'+i.UniqueID+"}",success:function(){}};n.xpointTemplates.methods.ajaxCall.call(r)},createLinkHtml:function(t){var r=n(this),i=t;r.data("linkInfo",t);n("#"+n.makeUserPost.ids.urlPreview).removeClass(n.makeUserPost.classes.displayNone);n("#"+n.makeUserPost.ids.urlTitle).text(i.title);n("#"+n.makeUserPost.ids.urlDescription).text(i.description);i.thumbnail_url!=null?(n("#"+n.makeUserPost.ids.thumbnailIconSrcDiv).removeClass(n.makeUserPost.classes.displayNone),n("#"+n.makeUserPost.ids.thumbnailDefaultIcon).addClass(n.makeUserPost.classes.displayNone),n("#"+n.makeUserPost.ids.urlIcon).attr("src",i.thumbnail_url).attr("width","89")):(n("#"+n.makeUserPost.ids.thumbnailIconSrcDiv).addClass(n.makeUserPost.classes.displayNone),n("#"+n.makeUserPost.ids.thumbnailDefaultIcon).removeClass(n.makeUserPost.classes.displayNone))},clearError:function(){var t=n("#"+n.makeUserPost.ids.errorTextDiv);n("#"+n.makeUserPost.ids.errorMainDiv).addClass(n.makeUserPost.classes.displayNone);t.removeClass(n.makeUserPost.classes.displayBlock);t.empty()},addError:function(t){n("#"+n.makeUserPost.ids.errorMainDiv).removeClass(n.makeUserPost.classes.displayNone);n("#"+n.makeUserPost.ids.errorTextDiv).fadeIn(2500);n("#"+n.makeUserPost.ids.errorTextDiv).text(t).fadeOut(2500)},createPostHtml:function(t){var i=n(this).empty(),et,ot,o;if(t.isAdmin===!0){var g=n("<div id='"+n.makeUserPost.ids.radioButtonContainer+"' class='xp-FloatLeft xp-Width xp-PostBackground xp-CustomForm'><\/div>"),st=n("<div class='xp-FloatLeft' ><input type='radio' name='AdminOptions' class='Updates_Radiobutton' value= '"+n.makeUserPost.ids.asUserOption+"' id='"+n.makeUserPost.ids.asUserOption+"' checked ><label  for='"+n.makeUserPost.ids.asUserOption+"' class='xp-VerticalAlignMiddle Tip-HPForUser'>As User<\/label><\/option><\/div>"),ht=n("<div class='xp-FloatLeft'><input type='radio' name='AdminOptions' class='Updates_Radiobutton  ' value= '"+n.makeUserPost.ids.asOrganizationOption+"' id='"+n.makeUserPost.ids.asOrganizationOption+"'><label for='"+n.makeUserPost.ids.asOrganizationOption+"' class='xp-VerticalAlignMiddle xp-MarginLeft-5 Tip-HPForOrg'>For Organization<\/label><\/option><\/div>"),nt=n("<div id='"+n.makeUserPost.ids.radioButtonMainDiv+"'class='xp-FloatLeft xp-Padding-4 xp-Width98 '><\/div>").appendTo(g);st.appendTo(nt);ht.appendTo(nt);g.appendTo(i)}var ct=n("<a class='"+n.makeUserPost.classes.linkLabel+"' id='"+n.makeUserPost.ids.fileUpload+"' href='#'>File<\/a>"),lt=n("<a class='"+n.makeUserPost.classes.linkLabel+"' id='"+n.makeUserPost.ids.urlInputBox+"'  href='#'>Link<\/a>"),v=n("<div id='"+n.makeUserPost.ids.linkDiv+"'class='xp-FloatLeft xp-Width xp-DottedBorderBottom xp-DisplayNone '/>"),y=n("<div id='"+n.makeUserPost.ids.urlInputSubDiv+"'class='xp-FloatLeft xp-Width99' /> "),p=n("<div class='xp-FloatLeft xp-Width85'><textarea class='xp-Width xp-FloatLeft' id='"+n.makeUserPost.ids.url+"' ><\/textarea><\/div>");p.appendTo(y);var pt=n("<div id='"+n.makeUserPost.ids.urlLoading+"' class='xp-FloatLeft xp-Width80 xp-Padding-4 xp-TextAlignCenter xp-DisplayNone'><img  src='/_layouts/Images/XpointBase/indicator.gif' height='12' alt='Loading ...' title='Loading...' /><\/div>").appendTo(y),w=n("<div class=' xp-FloatLeft xp-Width xp-DisplayNone ' id='"+n.makeUserPost.ids.urlPreview+"'/>"),c=n("<div class='xp-Width93 xp-Padding-10 xp-Margin-5 xp-FloatLeft xp-PostBackground xp-DisplayNone' id='"+n.makeUserPost.ids.urlThumbnailPreview+"'><\/div>"),wt=n("<div class='xp-FloatLeft xp-Width40 xp-TextAlignCenter xp-Overflowhidden xp-DisplayNone' id='"+n.makeUserPost.ids.thumbnailIconSrcDiv+"'><img id='"+n.makeUserPost.ids.urlIcon+"'  alt='Sorry, NO Thumbnail to show' title='Url Thumbnail' /><\/div>").appendTo(c),bt=n("<div id='"+n.makeUserPost.ids.thumbnailDefaultIcon+"' class='xp-FloatLeft xp-Width40  xp-IconNoUrl xp-Icon xp-DisplayNone' title='No Thumbnails available'><\/div>").appendTo(c),b=n("<div class='xp-FloatRight xp-Width58'><\/div>"),kt=n("<div id='"+n.makeUserPost.ids.urlTitle+"' class='xp-FloatLeft xp-Width xp-FontBold xp-LinkLabel'><\/div>").appendTo(b),dt=n("<div id='"+n.makeUserPost.ids.urlDescription+"' class='xp-FloatLeft xp-Width xp-PaddingTop-4 xp-FontLite'><\/div>").appendTo(b);b.appendTo(c);c.appendTo(w);var gt=n("<div id='"+n.makeUserPost.ids.urlAcceptIcon+"' class='xp-FloatRight xp-IconLinkSubmit xp-Icon xp-HoverCursor '><\/div>").insertAfter(p),ni=n("<div id='"+n.makeUserPost.ids.urlDeleteIcon+"'class=' xp-FloatRight  xp-Icon xp-IconDelete xp-HoverCursor  '/>").insertAfter(p),tt=n("<div class='xp-FloatLeft xp-Width'/>"),ti=n("<input type='checkbox' id='"+n.makeUserPost.ids.showThumbnailOption+"'>Show thumbnail<\/input>").appendTo(tt);tt.appendTo(w);y.appendTo(v);w.appendTo(v);var l=n("<div id='"+n.makeUserPost.ids.fileMainDiv+"'class='xp-FloatLeft xp-Width xp-DottedBorderBottom xp-DisplayNone'/>"),ii=n("<div class='xp-FloatLeft xp-Width30 xp-Padding-4' ><img  width='42' id='"+n.makeUserPost.ids.fileIcon+"' alt='No Preview available' /><\/div>").appendTo(l),ri=n("<div id='"+n.makeUserPost.ids.fileNameID+"'class='xp-FloatLeft xp-Width-125 xp-Overflowhidden xp-Breakword xp-Padding-4 xp-LinkLabel' />").appendTo(l),ui=n("<div id='"+n.makeUserPost.ids.fileDeleteIcon+"'class= 'xp-FloatRight xp-Padding-4  xp-Icon xp-IconDelete xp-HoverCursor' />").appendTo(l),a=n("<div id='"+n.makeUserPost.ids.buttonDiv+"' class='xp-Width xp-FloatLeft xp-PostBackground'><\/div>"),fi=n("<div class=' xp-FloatLeft'><button class='ui-primarytabclr ui-tabbuttonstyle ui-corner-all' id='"+n.makeUserPost.ids.postButton+"'>Post<\/button><\/div>").appendTo(a),ei=n("<div class=' xp-FloatLeft'><button class='ui-secondarytabclr ui-tabbuttonstyle ui-corner-all' id='"+n.makeUserPost.ids.cancelButton+"'>Cancel<\/button><\/div>").appendTo(a),at=n("<div class='xp-FloatRight ui-state-default xp-NoBackground xp-WidthIe33 xp-Width35 xp-PaddingTopIe-8 xp-LeftBorder' style='width:auto'><div class='xp-FloatLeft xp-Padding-2  xp-Icon  xp-IconAllUsers '><\/div><div class='xp-FloatLeft xp-Padding-4 xp-PaddingIe-2 xp-CharCounter'>All Users<\/div><\/div>"),vt=n("<div id='"+n.makeUserPost.ids.counterDiv+"' class='"+n.makeUserPost.classes.counterDiv+"'>"+t.maxTextBoxCharCount+"<\/div>"),it=n("<div class='"+n.makeUserPost.classes.counterDivCss+"'><textarea style='margin:0;'  id='"+n.makeUserPost.ids.multilineInputBox+"' class='"+n.makeUserPost.classes.multilineCss+"'><\/textarea><\/div>"),rt=n("<div class='xp-FloatLeft xp-Width xp-PostBackground xp-DottedBorderBottom'><div class='xp-FloatLeft xp-Padding-4  xp-Icon-Highlight  xp-IconAddFile' /><\/div>"),k=n("<div id='"+n.makeUserPost.ids.linkFileText+"' class='"+n.makeUserPost.classes.linksCss+"'/>").appendTo(rt),e=n("<div id='"+n.makeUserPost.ids.pollDiv+"'class='xp-Width xp-BorderBottom'><\/div>"),oi=n("<div id='"+n.makeUserPost.ids.pollLink+"'class='xp-FloatLeft xp-Width xp-PostBackground xp-TxtBox xp-BottomBorder'><div class='xp-FloatLeft xp-Padding-4  xp-Icon-Highlight  xp-IconAddPoll'><\/div><div class='xp-FloatLeft xp-Padding-4 '><a id='"+n.makeUserPost.ids.createPollLink+"'class='"+n.makeUserPost.classes.linkLabel+" Tip-HPAddPollOpts' href='#'>Add poll options<\/a><\/div><\/div>").appendTo(e),si=n("<div id='"+n.makeUserPost.ids.pollRemoveLink+"'class='xp-FloatLeft xp-Width xp-PostBackground  xp-DottedBorderBottom xp-DisplayNone'><div class='xp-FloatLeft xp-Padding-4  xp-Icon-Highlight  xp-IconAddPoll'><\/div><div class='xp-FloatLeft xp-Padding-4 '><a id='"+n.makeUserPost.ids.removePollLinkHref+"'class='xp.linkLabel' href='#'>Remove poll options<\/a><\/div><\/div>").appendTo(e),ut=n("<div id='"+n.makeUserPost.ids.pollOptionsContainer+"'class='xp-FloatLeft xp-Width '><\/div>"),hi=n("<div id='"+n.makeUserPost.ids.pollOptionsDiv+"' ><\/div>").appendTo(ut);ut.appendTo(e);var ci=n("<div id= '"+n.makeUserPost.ids.selectOptions+"'class='xp-FloatLeft xp-Width xp-PostBackground  xp-FontNormal  xp-TxtBox xp-BottomBorder xp-DisplayNone xp-CustomForm xp-PaddingBottom-8'><\/div>").append("<div class='xp-FloatLeft Tip-HPAllowMultiple xp-Breakword xp-FontSize9pt xp-PaddingRight-3 xp-AnswerChange '><input type='checkbox' id='"+n.makeUserPost.ids.allowMultipleOption+"' ><\/input><label for='"+n.makeUserPost.ids.allowMultipleOption+"' class='xp-VerticalAlignMiddle'>Allow Multiple Choices<\/label><\/div>").append("<div class='xp-FloatLeft Tip-HPAllowAnsChange  xp-Breakword xp-FontSize9pt xp-MultipleOption'><input type='checkbox' id='"+n.makeUserPost.ids.allowAnswerChange+"' ><\/input><label for='"+n.makeUserPost.ids.allowAnswerChange+"' class='xp-VerticalAlignMiddle'>Allow Answer Changes<\/label><\/div>").appendTo(e),ft=n("<div id='"+n.makeUserPost.ids.errorMainDiv+"' class= 'xp-FloatLeft xp-Width xp-DisplayNone'><\/div>"),li=n("<div id='"+n.makeUserPost.ids.errorTextDiv+"'class='xp-ErrorMsg'><span id='"+n.makeUserPost.ids.errorText+"'/><\/div>").appendTo(ft),d=n("<div />").attr("id",n.makeUserPost.ids.acknowledgeMainDiv).attr("class",n.makeUserPost.classes.acknowledgeMainDiv),ai=n("<div />").attr("id",n.makeUserPost.ids.acknowledgeIcon).attr("class",n.makeUserPost.classes.acknowledgeIcon).appendTo(d),yt=n("<div />").attr("id",n.makeUserPost.ids.acknowledgeOption).attr("class",n.makeUserPost.classes.acknowledgeOption).appendTo(d),vi=n("<a>Add acknowledgement<\/a>").attr("id",n.makeUserPost.ids.acknowledgeOptionUrl).attr("class",n.makeUserPost.classes.acknowledgeOptionUrl+" "+n.makeUserPost.classes.acknowledgeUrlTour).attr("href","#").appendTo(yt).click(function(t){var i=n(this);i.text()=="Add acknowledgement"?(h=!0,i.text("Remove acknowledgement"),i.removeClass(n.makeUserPost.classes.acknowledgeUrlTour)):(h=!1,i.text("Add acknowledgement"),i.addClass(n.makeUserPost.classes.acknowledgeUrlTour));t.preventDefault()});k.append(lt);k.append(" or ");k.append(ct);at.appendTo(a);it.appendTo(i);vt.insertBefore(it);l.appendTo(i);v.appendTo(i);rt.appendTo(i);e.appendTo(i);d.appendTo(i);a.appendTo(i);ft.appendTo(i);i.hide().fadeIn("slow");et=n("#"+n.makeUserPost.ids.multilineInputBox).charCounter(t.maxTextBoxCharCount,{container:"#"+n.makeUserPost.ids.counterDiv,format:"%1","class":n.makeUserPost.classes.floatRight});ot=n("#"+n.makeUserPost.ids.asOrganizationOption)?n("#"+n.makeUserPost.ids.asOrganizationOption).attr("checked")?n.makeUserPost.paths.addOrganizationFile:n.makeUserPost.paths.addUserFile:n.makeUserPost.paths.addUserFile;et.focus();o=new AjaxUpload(n("#"+n.makeUserPost.ids.fileUpload),{action:ot,autoSubmit:!1,name:"uploadFile",onComplete:function(i,r){var u=r.status;n.makeUserPost.methods.afterPost.call(this,t)},onSubmit:function(i,r){n.makeUserPost.methods.determineMediaExtension(r,t);var f=n.makeUserPost.methods.getPostData(t);return f.fileIncluded=!0,o.setData(f),u=!0},onChange:function(i,r){u=!0;var f=this;if(s=!0,!n.makeUserPost.methods.validateFileUpload(r,t))return s=!1,n.makeUserPost.methods.addError("Sorry, this file type cannot be shared"),u=!1,!1;n.makeUserPost.methods.clearError();n("#"+n.makeUserPost.ids.fileNameID).text(i);n.xpoint.utils.getImageUrl(i,function(t){n.makeUserPost.methods.applyFileIcon.call(f,t);n("#"+n.makeUserPost.ids.fileMainDiv).removeClass(n.makeUserPost.classes.displayNone)},function(t){n.makeUserPost.methods.applyFileIcon.call(f,t);n("#"+n.makeUserPost.ids.fileMainDiv).removeClass(n.makeUserPost.classes.displayNone)})}});n(".Updates_Radiobutton").live("change",function(){var t=n(this).val();t=="asOrganizationOption"?(o._settings.action=n.makeUserPost.paths.addOrganizationFile,n("#"+n.makeUserPost.ids.acknowledgeMainDiv).removeClass(n.makeUserPost.classes.displayNone)):t=="asUserOption"&&(o._settings.action=n.makeUserPost.paths.addUserFile,n("#"+n.makeUserPost.ids.acknowledgeMainDiv).addClass(n.makeUserPost.classes.displayNone))});n("#"+n.makeUserPost.ids.removePollLinkHref).click(function(i){n.makeUserPost.methods.removePoll.apply(this,n.makeArray(t));i.preventDefault()});n("#"+n.makeUserPost.ids.urlAcceptIcon).click(function(t){n.makeUserPost.methods.processUrl();t.preventDefault()});n("#"+n.makeUserPost.ids.urlDeleteIcon).click(function(t){var i,u;n.makeUserPost.methods.clearError();r=!1;i=n("#"+n.makeUserPost.ids.url);i.attr("readonly",!1);i.val("");u=i.prev(".watermark");n(u).show();n("#"+n.makeUserPost.ids.urlDescription).empty();n("#"+n.makeUserPost.ids.urlIcon).attr("src","");n("#"+n.makeUserPost.ids.urlTitle).empty();n("#"+n.makeUserPost.ids.showThumbnailOption).attr("checked",!1);n("#"+n.makeUserPost.ids.linkDiv).addClass(n.makeUserPost.classes.displayNone);n("#"+n.makeUserPost.ids.urlPreview).addClass(n.makeUserPost.classes.displayNone);t.preventDefault()});n("#"+n.makeUserPost.ids.fileDeleteIcon).click(function(t){var i,r;n.makeUserPost.methods.clearError();n("#"+n.makeUserPost.ids.fileMainDiv).addClass(n.makeUserPost.classes.displayNone);u=!1;t.preventDefault();i=n(":file");i.length>0&&(r=n(i.get(0)),r.wrap("<form>").closest("form").get(0).reset(),r.unwrap())});n("#"+n.makeUserPost.ids.urlInputBox).click(function(i){var e=this,u,f;r=!0;n("#"+n.makeUserPost.ids.linkDiv).removeClass(n.makeUserPost.classes.displayNone);u=n("#"+n.makeUserPost.ids.url);u.parent("span").length==0&&(f=u.watermark(t.urlWaterMarkText),f.blur());i.preventDefault()});n("#"+n.makeUserPost.ids.createPollLink).click(function(i){var r=this;n.makeUserPost.methods.processPollAddition.call(r,t);i.preventDefault()});n("#"+n.makeUserPost.ids.showThumbnailOption).change(function(){n(this).attr("checked")===!0?(f=!0,n("#"+n.makeUserPost.ids.urlThumbnailPreview).removeClass(n.makeUserPost.classes.displayNone)):(f=!1,n("#"+n.makeUserPost.ids.urlThumbnailPreview).addClass(n.makeUserPost.classes.displayNone))});n("#"+n.makeUserPost.ids.postButton).click(function(i){var r,f;n.makeUserPost.methods.validatePost(t)===!0&&(n.makeUserPost.methods.clearError(),u===!0?o.submit():(r=n.makeUserPost.methods.getPostData.apply(this,n.makeArray(t)),n.makeUserPost.methods.postData.call(this,r,t)),f=n("#"+n.makeUserPost.ids.containerDiv),n.makeUserPost.methods.createWaterMarkHtml.call(f,t),i.preventDefault());i.preventDefault()});n("#"+n.makeUserPost.ids.cancelButton).click(function(i){var r=n("#"+n.makeUserPost.ids.containerDiv);n.makeUserPost.methods.createWaterMarkHtml.call(r,t);i.preventDefault()})}}}})(jQuery);
/*
//# sourceMappingURL=xpoint.makeUserPost.min.js.map
*/