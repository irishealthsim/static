(function(n){var i=[],t=[];n.fn.tour=function(r){function y(){i.length==0&&(i=[],p());t.length==0?i.length!=0?w():f():e()}function e(){u.totalSteps=t.length;n("#"+n.tourAttributes.ids.startTour).remove();n("#"+n.tourAttributes.ids.endTour).show();u.totalSteps>1&&n("#"+n.tourAttributes.ids.nextStep).show();h()}function p(){var i=n("*[class*='Tip-'],*[class*='ui-']"),t;n.each(i,function(){if(!(n(this).css("visibility")=="hidden")){var t=n(this).attr("class").split(" ");o(t)}});t=u.dynamicClass.split(" ");o(t)}function o(t){n.each(t,function(){var n=/^Tip\-(.+)/.exec(this),t=/^ui\-(.+)/.exec(this);s(n);s(t)})}function s(t){t!=null&&n.inArray(t[0],i)==-1&&i.push(t[0])}function w(){t=[];n.ajax({url:n.tourAttributes.serviceUrl,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({classNames:i}),success:function(i){var r=i.GetTourDataResult;n.each(r,function(){t.push({name:this.tourClass,tipStyle:this.tipStyle,position:this.tipPosition,text:this.tourTip})});t.length==0?f():e()},error:function(){f()}})}function h(){if(u.step<u.totalSteps-1&&(u.step=c(u.step,!0)),u.step>0?n("#"+n.tourAttributes.ids.prevStep).show():n("#"+n.tourAttributes.ids.prevStep).hide(),u.step==u.totalSteps-1?n("#"+n.tourAttributes.ids.nextStep).hide():n("#"+n.tourAttributes.ids.nextStep).show(),u.step>=u.totalSteps)return l(),!1;++u.step;a()}function b(){if(u.step>1&&(u.step=c(u.step,!1)),u.step>2?n("#"+n.tourAttributes.ids.prevStep).show():n("#"+n.tourAttributes.ids.prevStep).hide(),u.step==u.totalSteps&&n("#"+n.tourAttributes.ids.nextStep).show(),u.step<=1)return!1;--u.step;a()}function c(i,r){for(var f=r?i:i-2,e=t[f],u=n("."+e.name),o=u.length>0?u.is(":hidden"):!0;o;)f=r?++i:--i-2,e=t[f],u=n("."+e.name),o=u.length>0?u.is(":hidden"):!0;return i}function f(){n("#"+n.tourAttributes.ids.tourCtrlText).html(u.showNoTip);n("#"+n.tourAttributes.ids.startTour).hide()}function l(){g();v();d()}function a(){var l;v();var h=t[u.step-1],a=n("."+h.name),i=n("<div/>").attr("id",n.tourAttributes.ids.tourTip).attr("style","border-width:1px !important;display:none;"+(h.tipStyle!="Default"?h.tipStyle:"")+"").attr("class",n.tourAttributes.classes.tourTip);n("<p/>").html(h.text).appendTo(i);n("<span/>").attr("class",n.tourAttributes.classes.tourTipArrow).appendTo(i);n("BODY").prepend(i);var r={},w=h.position,s=a.outerWidth(),o=a.outerHeight(),e=a.offset().left,f=a.offset().top;switch(w){case"Top Left":r={left:e+5+"px",top:f+o+14+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowTL");break;case"Top Right":r={left:e+s-i.width()-3+"px",top:f+o+6+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowTR");break;case"Bottom Left":r={left:e-4+"px",top:f-i.height()-4+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowBL");break;case"Bottom Right":r={left:e+s-i.width()+"px",top:f-i.height()+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowBR");break;case"Left Top":r={left:e+s+10+"px",top:f+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowLT");break;case"Left Bottom":r={left:e+s+"px",top:f+o-i.height()+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowLB");break;case"Right Top":r={left:e-i.width()+"px",top:f+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowRT");break;case"Right Bottom":r={left:e-i.width()+"px",top:f+o-i.height()+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowRB");break;case"Top":r={left:e+s/2-i.width()/2-3+"px",top:f+o+5+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowT");break;case"Right":r={left:e-i.width()-5+"px",top:f+o/2-i.height()/2+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowR");break;case"Bottom":r={left:e+s/2-i.width()/2-3+"px",top:f-i.height()-8+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowB");break;case"Left":r={left:e+s+10+"px",top:f+o/2-i.height()/2+"px","z-index":"9999"};i.find("span."+n.tourAttributes.classes.tourTipArrow).addClass("xp-TourTipArrowL");break;default:r={left:"50%",top:"50%","margin-top":i.height()/-2,"margin-left":i.width()/-2,"z-index":"9999"}}var y=n(window).scrollTop(),p=n(window).scrollTop()+n(window).height(),c=parseFloat(r.top,10);f<c&&(c=f);l=parseFloat(r.top,10)+i.height();f+o>l&&(l=f+o);c<y||c>p||l<y||l>p?n("html, body").stop().animate({scrollTop:c-13},500,"easeInOutExpo",function(){i.css(r).show()}):i.css(r).show()}function v(){n("#"+n.tourAttributes.ids.tourTip).remove()}function k(){var r=window.location.pathname,f=r.substring(r.lastIndexOf("/")+1).split(".")[0],t,i;if(n("#tourContainer").length>=1)return!1;t=n("<div/>").attr("id",n.tourAttributes.ids.tourContainer).attr("class",n.tourAttributes.classes.tourContainer);n("<p/>").attr("id",n.tourAttributes.ids.tourCtrlText).html(u.tourCtrlText).appendTo(t);n("<span/>").attr("id",n.tourAttributes.ids.startTour).attr("class",n.tourAttributes.classes.buttonCss).html("Start the tour").appendTo(t);i=n("<div/>").attr("class",n.tourAttributes.classes.navigationDivCss).appendTo(t);n("<span/>").attr("id",n.tourAttributes.ids.prevStep).attr("class",n.tourAttributes.classes.buttonCss).html('<i class="fa fa-angle-double-left" aria-hidden="true"><\/i> Previous').attr("style","display:none").appendTo(i);n("<span/>").attr("id",n.tourAttributes.ids.nextStep).attr("class",n.tourAttributes.classes.buttonCss).html('Next <i class="fa fa-angle-double-right" aria-hidden="true"><\/i>').attr("style","display:none").appendTo(i);n("<span/>").attr("id",n.tourAttributes.ids.endTour).attr("class",n.tourAttributes.classes.endTour).html("x").appendTo(t);n("BODY").prepend(t);n("#"+n.tourAttributes.ids.tourContainer).animate({right:"20px"},500)}function d(){n("#"+n.tourAttributes.ids.tourContainer).remove()}function g(){n("#"+u.tourId).click(function(){n(this).tour()})}function nt(){n("#"+n.tourAttributes.ids.startTour).click(function(){y()});n("#"+n.tourAttributes.ids.endTour).click(function(){l()});n("#"+n.tourAttributes.ids.nextStep).click(function(){h()});n("#"+n.tourAttributes.ids.prevStep).click(function(){b()})}n.tourAttributes={defaults:{step:0,totalSteps:0,tourId:"",showNoTip:"No tip available for this Page",tourCtrlText:"Take a look at what you can do in this Page"},serviceUrl:"/_vti_bin/XPointBase/TourService.svc/GetTourData",ids:{tourContainer:"tourContainer",tourCtrlText:"tourCtrlText",tourOverlay:"tourOverlay",startTour:"startTour",endTour:"endTour",prevStep:"prevStep",nextStep:"nextStep",tourTip:"tourTip"},classes:{tourContainer:"xp-TourControls",tourOverlay:"xp-TourOverlay",buttonCss:"xp-Button ui-primarytabclr",navigationDivCss:"xp-Navigation",endTour:"xp-EndTour",tourTip:"xp-TourTip ui-corner-all",tourTipArrow:"xp-TourTipArrow"}};var u=n.extend(n.tourAttributes.defaults,r);return this.each(function(){var t=n(this);u.tourId=t.context.id;n("#"+u.tourId).unbind("click");k(t);nt()})}})(jQuery);
/*
//# sourceMappingURL=xpoint.tour.min.js.map
*/