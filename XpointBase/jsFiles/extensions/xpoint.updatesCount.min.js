(function(n){n.updatesCount=n.updatesCount|{};n.fn.updatesCount=function(t){var i,u,t,r;if(this&&this.length!=0)return(i=this,typeof(t=="object"))?(u=i.get(0),t=n.extend(n.updatesCount.defaults,t),u.options=t,n.updatesCount.methods.init.call(i,t)):(r=n.updatesCount.methods[t],r&&n.isFunction(r)?r.methods[t].call(i,arguments[1]):void 0)};n.updatesCount={defaults:{refreshDuration:9e5,currentUserId:"",homeUrl:"",prepareUrl:function(t){return n.updatesCount.paths.GetUnreadCount+"?userId="+t.currentUserId}},paths:{getUnreadCount:"/_vti_bin/XPointBase/UpdatesService.svc/getUnreadCount"},methods:{init:function(t){return this.each(function(){var i=n(this),r;n.updatesCount.methods.refreshData.call(i,t);r=window.setInterval(function(){n.updatesCount.methods.refreshData.call(i,t)},t.refreshDuration);i.click(function(n){window.location=t.homeUrl;n.preventDefault()})})},CheckForLogin:function(){if(n.ajaxSetup({beforeSend:function(){return!1}}),n("#loginNeeded").length==0)var t=n("<div id='loginNeeded'/>").append("Session time out. Need to login again.").appendTo("body").dialog({closeOnEscape:!1,open:function(){n(".ui-dialog-titlebar-close").hide()},modal:!0,buttons:{"Click to login again":function(){location.reload()}}})},refreshData:function(t){var i=this;t.currentUserId!=""&&n.ajax({type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,url:n.updatesCount.paths.getUnreadCount+"?userId="+t.currentUserId,success:function(t){var u=t.GetUnreadCountResult.NeedLogin,r;u===!1?(r=t.GetUnreadCountResult.UnreadCount,i.empty(),i.append(r),r==0?i.addClass("xp-DisplayNone"):i.removeClass("xp-DisplayNone")):n.updatesCount.methods.CheckForLogin()}})}}}})(jQuery);
/*
//# sourceMappingURL=xpoint.updatesCount.min.js.map
*/