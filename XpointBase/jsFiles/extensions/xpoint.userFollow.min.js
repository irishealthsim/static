(function(n){n.userFollow=n.userFollow||{};n.fn.userFollow=function(t){var r,i;if(this&&this.length!=0)return typeof t=="object"&&(r=n(this),n.data(document,"userFollowOptions",t),n.userFollow.methods.init.apply(this,n.makeArray(t))),n.userFollow.methods[t]?(i=n.data(document,"userFollowOptions"),i=n.extend(i,Array.prototype.slice.call(arguments,1)),n.userFollow.methods[t].apply(this,n.makeArray(i))):void 0};n.userFollow={paths:{userImagePath:"/_layouts/Images/XpointBase/software-developer.jpg",followerServiceUrl:"/_vti_bin/xpointbase/ProfileService.svc/getFollowers",followingServiceUrl:"/_vti_bin/xpointbase/ProfileService.svc/getFollowing",ServiceUrl:"/_vti_bin/xpointbase/ProfileService.svc/"},classes:{action:"ui-secondarytabclr",noData:"xp-NoData xp-Height-36  xp-FontBold",tourClass:"Tip-Hp"},ids:{userDiv:"userDiv_",userSearchBox:"userSearchBox",action:"action",status:"status_",action:"action_",followDiv:"followDiv"},methods:{init:function(t){var i=n(this);n.userFollow.methods.createHtml.apply(i,n.makeArray(t));n("#"+n.userFollow.ids.userSearchBox).watermark("Find By Name")},ajaxCall:function(t,i){var u=this,f,r;u.showLoading(i);f=t.onComplete&&n.isFunction(t.onComplete)?t.onComplete:null;t&&(r={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:"",complete:function(n,t){u.hideLoading();f&&f.call(u,n,t)}},r=n.extend(r,t),n.ajax(r))},GetUserInformation:function(t){var i=n("<div id='"+n.userFollow.ids.userDiv+t.Id+"'  class='userDiv xp-FollowMiniBox xp-FollowMiniBoxIe xp-FloatLeft xp-BorderBox xp-Padding-4 xp-BorderGray xp-Body'/> "),o=n("<div style='height:84px;' class='xp-FloatLeft  xp-Width30 xp-Overflowhidden'><div class=' xp-FloatLeft xp-FollowImgDiv'><img src='"+t.ImageUrl+"' alt='userProfile pic' /><\/div><\/div>").appendTo(i),r=n("<div class='xp-FloatLeft xp-Width60 xp-MarginLeft-5'/>").appendTo(i),s=n("<div id = 'namesearchBox' class=''><a href= "+t.ProfileUrl+" class='xp-LinkLabel'>"+t.Name+"<\/a><\/div>").appendTo(r),u=t.Department!=null?t.Department:"",h=n("<div>"+u+"<\/div>").appendTo(r),f=t.Function!=null?t.Function:"",c=n("<div>"+f+"<\/div>").appendTo(r),e=t.Location!=null?t.Location:"",l=n("<div>"+e+"<\/div>").appendTo(r),a=n("<div class='xp-FloatLeft xp-Width'><div id='"+n.userFollow.followDiv+t.Id+"' class='"+n.userFollow.classes.action+" xp-TextAlignCenter "+n.userFollow.classes.tourClass+"Btn ui-corner-all xp-Padding-5'><a href='#' id='"+n.userFollow.ids.action+t.Id+"' class='xp-LinkLabel'>"+t.Action+"<\/a><span id='"+n.userFollow.ids.status+t.Id+"' class='xp-LinksDefault'>/"+t.ConnectionStatus+"<\/span> <\/div><\/div>").appendTo(i);return i},bindAction:function(t,i,r){n("#"+n.userFollow.ids.action+t).click(function(){n.userFollow.methods.userFollowAction(t,i,r)})},createHtml:function(t){var i=n(this),o,s,r;n.userFollow.classes.tourClass+=t.classification;var f=n("<div  class='xp-FloatLeft xp-BorderBox  ui-corner-all xp-MarginLeft-5 xp-Width98 xp-RelativePositionIe ui-state-default xp-NoBackground'/>").appendTo(i),h=n("<input autocomplete='off' class='"+n.userFollow.classes.tourClass+"Input' type='text' id = '"+n.userFollow.ids.userSearchBox+"' />"),l=n("<div style='margin:0 auto;' class='xp-ClearBoth xp-PaddingTopBottom-10  xp-Width98 '/>").append(h).appendTo(f),c=n("<div style='margin:0 auto;' class='xp-ClearBoth xp-Width98' >").appendTo(f),u=n("<div style='padding-bottom:10px' class='xp-FloatLeft xp-Width' >").appendTo(c),e=-1;t.classification=="FollowingMe"?(o={type:"GET",dataType:"json",cache:!1,url:n.userFollow.paths.followerServiceUrl,onComplete:function(){n("#"+n.userFollow.ids.userSearchBox).quicksearch(".userDiv",{selector:"#namesearchBox"})},data:{userId:t.userId,numberOfUsers:e},success:function(r){var f,e;r.GetFollowersResult.length>0?(f=r.GetFollowersResult,n.each(f,function(){var r=this;u.append(n.userFollow.methods.GetUserInformation(r));n.userFollow.methods.bindAction(r.Id,i,t)})):(e=n("<div class='"+n.userFollow.classes.noData+"'>There are no items to display. You currently have no followers<div/>"),u.append(e))}},r={marginTop:"200px"},n.userFollow.methods.ajaxCall.call(i,o,r)):(s={type:"GET",dataType:"json",cache:!1,onComplete:function(){n("#"+n.userFollow.ids.userSearchBox).quicksearch(".userDiv",{selector:"#namesearchBox"})},url:n.userFollow.paths.followingServiceUrl,data:{userId:t.userId,numberOfUsers:e},success:function(t){var i,r;t.GetFollowingResult.length>0?(i=t.GetFollowingResult,n.each(i,function(){})):(r=n("<div class='"+n.userFollow.classes.noData+"'>There are no items to display. You are currently not following anyone<div/>"),u.append(r))}},r={marginTop:"200px"},n.userFollow.methods.ajaxCall.call(i,s,r))},userFollowAction:function(t,i,r){n.ajax({type:"GET",cache:!1,dataType:"json",url:n.userFollow.paths.ServiceUrl+"IsFollowing",data:{userId:t},success:function(i){var u,f;i.IsFollowingResult===!1?(u={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:n.userFollow.paths.ServiceUrl+"UserFollow",data:'{ "userId": '+t+"}",success:function(i){i.UserFollowResult.FollowStatus==""?(n("#"+n.userFollow.ids.userDiv+t).remove(),n("#followingCount").text(i.ToggleFollowResult.FollowingCount),n("#followersCount").text(i.ToggleFollowResult.FollowersCount)):(n("#"+n.userFollow.ids.action+t).text(""),n("#"+n.userFollow.ids.action+t).text(i.UserFollowResult.ActionStatus+"/"),n("#"+n.userFollow.ids.status+t).text(""),n("#"+n.userFollow.ids.status+t).text(i.UserFollowResult.FollowStatus),n("#followingCount").text(i.UserFollowResult.FollowingCount),n("#followersCount").text(i.UserFollowResult.FollowersCount))}},n.userFollow.methods.ajaxCall.call(n("#"+n.userFollow.ids.userDiv+t),u)):(f={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:n.userFollow.paths.ServiceUrl+"UserUnFollow",data:'{ "userId": '+t+"}",success:function(i){r.classification=="IFollowing"&&i.UserUnFollowResult.FollowStatus=="Following Me"&&(n("#"+n.userFollow.ids.userDiv+t).remove(),n("#followingCount").text(i.UserUnFollowResult.FollowingCount),n("#followersCount").text(i.UserUnFollowResult.FollowersCount));i.UserUnFollowResult.FollowStatus==""?(n("#"+n.userFollow.ids.userDiv+t).remove(),n("#followingCount").text(i.UserUnFollowResult.FollowingCount),n("#followersCount").text(i.UserUnFollowResult.FollowersCount)):(n("#"+n.userFollow.ids.action+t).text(""),n("#"+n.userFollow.ids.action+t).text(i.UserUnFollowResult.ActionStatus+"/"),n("#"+n.userFollow.ids.status+t).text(""),n("#"+n.userFollow.ids.status+t).text(i.UserUnFollowResult.FollowStatus),n("#followingCount").text(i.UserUnFollowResult.FollowingCount),n("#followersCount").text(i.UserUnFollowResult.FollowersCount))}},n.userFollow.methods.ajaxCall.call(n("#"+n.userFollow.ids.userDiv+t),f))}})}}}})(jQuery);
/*
//# sourceMappingURL=xpoint.userFollow.min.js.map
*/