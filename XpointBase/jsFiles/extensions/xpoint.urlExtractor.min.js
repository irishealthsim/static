(function(n){n.urlExtractor={defaults:{getUrl:"/_vti_bin/XPointBase/UserPostsService.svc/GetLinkInfo",defaultClosed:!0,linkLabel:"Attach link",buttonLabel:"Attach"},ids:{textBox:"linkTextBox",button:"getLinkButton",container:"attachLinkContainer",resultContainer:"linkResultContainer"},methods:{show:function(t){var i="",t=t?t:{};t.effect||(i=t.effect);n("#"+n.urlExtractor.ids.container).show(i,t.options,t.duration,t.callBack)},clearResult:function(){n("#"+n.urlExtractor.ids.textBox).val("");n("#"+n.urlExtractor.ids.resultContainer).html("")},getResult:function(){return n("#"+n.urlExtractor.ids.resultContainer).html()},hide:function(t){t=t?t:{};t.clearBeforeHide===!0&&(n.urlExtractor.methods.clearResult(),n("#"+n.urlExtractor.ids.textBox).val(""));var i="";t.effect||(i="");n("#"+n.urlExtractor.ids.container).hide(i,t.options,t.duration,t.callBack)},validateUrl:function(n){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},addLoadingImg:function(){n("#"+n.urlExtractor.ids.resultContainer).empty().append("<img src='/_layouts/XPointCommunities/images/loading.gif' style='width:30%'/>").show()},prepareUrlData:function(t,i){var r,f;if(t){r=n("#"+n.urlExtractor.ids.resultContainer).empty();t.thumbNail&&(f=n("<div />").css({float:"left","padding-right":"14px"}).append("<img src='"+t.thumbNail+"' style='width:90px;height:60px'  />").appendTo(r));var u=n("<div />").css({float:"left"}).appendTo(r),e=n("<div />").css({float:"left",width:"100%"}).html("<strong>"+t.title+"<\/strong>").appendTo(u),o=n("<div />").css({float:"left",width:"100%"}).html("<a href='"+i+"'>"+i+"<\/a>").appendTo(u),s=n("<div />").css({float:"left",width:"100%"}).html(t.description).appendTo(u);r.show()}},getLink:function(t,i){var u,r;n.urlExtractor.methods.addLoadingImg();u=n.urlExtractor.methods.validateUrl(t);u===!0?(r={},r.url=t,n.ajax({url:"/_vti_bin/XPointBase/UserPostsService.svc/GetLinkInfo",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:n.toJSON(r),success:function(r){if(r&&r.GetLinkInfoResult){var u=jQuery.parseJSON(r.GetLinkInfoResult);i!=null&&n.isFunction(i)?i.call(u):n.urlExtractor.methods.prepareUrlData(u,t)}},error:function(){}})):alert("Enter valid url")},init:function(t){var r=n(this),i=n("<div id='"+n.urlExtractor.ids.container+"' />").css({width:"100%",float:"left"}).appendTo(r);t.defaultClosed===!0&&i.hide();var u=n("<div />").css({float:"left"}).appendTo(i),e=n("<input autocomplete='off' id='"+n.urlExtractor.ids.textBox+"'  />").css({border:"1px solid #C6CFCE",width:"485px",height:"27px","-moz-border-radius":"4px 4px 4px 4px"}).appendTo(u),f=n("<div />").css({float:"left","padding-left":"12px"}).appendTo(i),o=n("<input autocomplete='off' type='button'  id='"+n.urlExtractor.ids.button+"' style='font-size:10px' />").val(t.buttonLabel).button().appendTo(f).click(function(){n.urlExtractor.methods.getLink(t.getUrl,n("#"+n.urlExtractor.ids.textBox).val())});n("<div id='"+n.urlExtractor.ids.resultContainer+"'/>").css({width:"100%",float:"left",display:"none","padding-top":"6px","text-align":"left"}).appendTo(i)}}};n.fn.urlExtractor=function(t){if(this&&this.length!==0){if("string"==typeof t&&n.urlExtractor.methods[t]){var i=n.extend(this.get(0).options,n.makeArray(arguments).slice(1)[0]);return n.urlExtractor.methods[t].apply(this,n.makeArray(i))}return this.each(function(){this.options=n.extend(n.urlExtractor.defaults,t);n.urlExtractor.methods.init.apply(this,n.makeArray(this.options))})}}})(jQuery);
/*
//# sourceMappingURL=xpoint.urlExtractor.min.js.map
*/